<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>P2P</title>
  <meta name="description" content="เปลี่ยนขวดพลาสติกเป็นแต้มสะสม ง่ายๆ แค่โยนขวด รับแต้มทันที เพื่อโลกที่ยั่งยืน" />
  <meta name="keywords" content="P2P, Plastic to Point, รีไซเคิล, ขวดพลาสติก, สิ่งแวดล้อม, AI, YOLOv11, Arduino" />
  <meta name="author" content="P2P Team" />
  <meta name="robots" content="index, follow" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css" rel="stylesheet">
  <link rel="stylesheet" href="animations.css">
  
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
  
  <!-- Custom Firebase Manager -->
  <script src="firebase-manager.js"></script>
  <style>
    /* Bai Jamjuree Font Faces */
    @font-face {
      font-family: 'Bai Jamjuree';
      src: url('./fonts/BaiJamjuree-Regular.ttf') format('truetype');
      font-weight: 400;
      font-style: normal;
    }
    @font-face {
      font-family: 'Bai Jamjuree';
      src: url('./fonts/BaiJamjuree-Medium.ttf') format('truetype');
      font-weight: 500;
      font-style: normal;
    }
    @font-face {
      font-family: 'Bai Jamjuree';
      src: url('./fonts/BaiJamjuree-SemiBold.ttf') format('truetype');
      font-weight: 600;
      font-style: normal;
    }
    @font-face {
      font-family: 'Bai Jamjuree';
      src: url('./fonts/BaiJamjuree-Bold.ttf') format('truetype');
      font-weight: 700;
      font-style: normal;
    }
    @font-face {
      font-family: 'Bai Jamjuree';
      src: url('./fonts/BaiJamjuree-Light.ttf') format('truetype');
      font-weight: 300;
      font-style: normal;
    }
    @font-face {
      font-family: 'Bai Jamjuree';
      src: url('./fonts/BaiJamjuree-ExtraLight.ttf') format('truetype');
      font-weight: 200;
      font-style: normal;
    }

    :root{
      --bg: #fff5f5;          /* พื้นหลังชมพูอ่อน */
      --bg-secondary: #fef3c7; /* พื้นหลังเหลืองอ่อน */
      --card: #ffffff;        /* การ์ดขาว */
      --text: #1f2937;        /* ข้อความหลัก เข้ม */
      --muted: #6b7280;       /* ข้อความรอง */
      --brand: #ec4899;       /* ชมพูสดใส */
      --brand-2: #06b6d4;     /* ฟ้าสดใส */
      --accent: #f59e0b;      /* ส้มสดใส */
      --accent-2: #10b981;    /* เขียวสดใส */
      --accent-3: #8b5cf6;    /* ม่วงสดใส */
      --accent-4: #ef4444;    /* แดงสดใส */
      --accent-5: #06d6a0;    /* เขียวมิ้นท์ */
      --radius-xl: 32px;
      --radius: 24px;
      --radius-sm: 16px;
      --shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
      --shadow-soft: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      --shadow-colorful: 0 20px 25px -5px rgba(236, 72, 153, 0.3), 0 10px 10px -5px rgba(6, 182, 212, 0.2);
      
      /* Loader variables */
      --block-size: 60px;
      --light-color: rgba(236, 72, 153, 0.3);
      --dot-size: 8px;
      --dot-size-half: 4px;
      --dot-size-half-neg: -4px;
      --loader-size-half: calc(var(--block-size) / 6);
    }

    /* รีเซ็ตเล็กน้อย */
    *,*::before,*::after{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0; font-family: 'Bai Jamjuree', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans Thai", "Noto Sans", "Liberation Sans", sans-serif;
      color:var(--text); 
      background: 
        linear-gradient(135deg, var(--bg) 0%, var(--bg-secondary) 50%, #e0f2fe 100%);
      background-attachment: fixed;
      line-height:1.6; letter-spacing:.2px;
      min-height: 100vh;
      overflow-x: hidden;
    }
    
    /* Colorful floating shapes */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        radial-gradient(circle at 15% 25%, var(--brand) 0%, transparent 35%),
        radial-gradient(circle at 85% 15%, var(--brand-2) 0%, transparent 30%),
        radial-gradient(circle at 35% 75%, var(--accent) 0%, transparent 25%),
        radial-gradient(circle at 75% 85%, var(--accent-2) 0%, transparent 30%),
        radial-gradient(circle at 95% 55%, var(--accent-3) 0%, transparent 20%),
        radial-gradient(circle at 5% 65%, var(--accent-4) 0%, transparent 25%),
        radial-gradient(circle at 55% 5%, var(--accent-5) 0%, transparent 20%);
      background-size: 900px 900px, 700px 700px, 800px 800px, 600px 600px, 500px 500px, 650px 650px, 550px 550px;
      opacity: 0.15;
      animation: floatColorful 45s ease-in-out infinite;
      z-index: -1;
      pointer-events: none;
    }
    
    /* Elegant floating animation */
    @keyframes floatColorful {
      0%, 100% {
        transform: translate(0, 0) rotate(0deg);
        filter: hue-rotate(0deg);
      }
      25% {
        transform: translate(-5px, -8px) rotate(1deg);
        filter: hue-rotate(90deg);
      }
      50% {
        transform: translate(3px, -5px) rotate(-1deg);
        filter: hue-rotate(180deg);
      }
      75% {
        transform: translate(-2px, 5px) rotate(0.5deg);
        filter: hue-rotate(270deg);
      }
    }

    /* Smooth breathing animation */
    @keyframes breathe {
      0%, 100% {
        transform: scale(1);
        opacity: 0.8;
      }
      50% {
        transform: scale(1.05);
        opacity: 1;
      }
    }

    /* Elegant gradient shift */
    @keyframes gradientShift {
      0% {
        background-position: 0% 50%;
      }
      50% {
        background-position: 100% 50%;
      }
      100% {
        background-position: 0% 50%;
      }
    }

    /* Spotlight effect */
    @keyframes spotlight {
      0% {
        transform: translateX(-100%) rotate(45deg);
        opacity: 0;
      }
      50% {
        opacity: 1;
      }
      100% {
        transform: translateX(300%) rotate(45deg);
        opacity: 0;
      }
    }

    /* Magnetic hover effect */
    @keyframes magneticPull {
      0% {
        transform: scale(1) rotate(0deg);
      }
      25% {
        transform: scale(1.1) rotate(2deg);
      }
      50% {
        transform: scale(1.15) rotate(-1deg);
      }
      75% {
        transform: scale(1.1) rotate(1deg);
      }
      100% {
        transform: scale(1) rotate(0deg);
      }
    }

    /* Particle burst effect */
    @keyframes particleBurst {
      0% {
        transform: scale(0) rotate(0deg);
        opacity: 1;
      }
      50% {
        transform: scale(1.5) rotate(180deg);
        opacity: 0.7;
      }
      100% {
        transform: scale(3) rotate(360deg);
        opacity: 0;
      }
    }

    /* Typewriter effect */
    @keyframes typewriter {
      from {
        width: 0;
      }
      to {
        width: 100%;
      }
    }

    /* Blink cursor */
    @keyframes blinkCursor {
      from, to {
        border-color: transparent;
      }
      50% {
        border-color: var(--brand);
      }
    }

    /* Wave animation */
    @keyframes wave {
      0%, 100% {
        transform: translateY(0) rotate(0deg);
      }
      25% {
        transform: translateY(-10px) rotate(5deg);
      }
      50% {
        transform: translateY(-5px) rotate(-3deg);
      }
      75% {
        transform: translateY(-15px) rotate(2deg);
      }
    }

    /* Elegant gradient shift */
    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      25% { background-position: 100% 50%; }
      50% { background-position: 100% 100%; }
      75% { background-position: 0% 100%; }
      100% { background-position: 0% 50%; }
    }

    /* Elegant glow pulse */
    @keyframes elegantGlow {
      0%, 100% {
        box-shadow: 0 4px 20px rgba(236, 72, 153, 0.3), 0 0 40px rgba(6, 182, 212, 0.1);
      }
      50% {
        box-shadow: 0 8px 30px rgba(236, 72, 153, 0.4), 0 0 60px rgba(6, 182, 212, 0.2);
      }
    }

    .container{ width:min(1100px, 92%); margin-inline:auto; }

    /* Elegant utility classes */
    .elegant-hover:hover { 
      transform: translateY(-3px) scale(1.02); 
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      filter: brightness(1.1);
    }
    .elegant-glow { 
      animation: elegantGlow 3s ease-in-out infinite;
    }
    .gradient-text {
      background: linear-gradient(45deg, var(--brand), var(--accent), var(--accent-2), var(--accent-3), var(--accent-4), var(--brand));
      background-size: 400% 400%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: gradientShift 8s ease-in-out infinite;
    }
    .breathe-gentle {
      animation: breathe 4s ease-in-out infinite;
    }
    .shimmer-on-hover {
      position: relative;
      overflow: hidden;
      transition: all 0.3s ease;
    }
    .shimmer-on-hover::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
      transition: left 0.6s ease;
    }
    .shimmer-on-hover:hover::before {
      left: 100%;
    }

    /* New Animation Classes */
    .spotlight-effect {
      position: relative;
      overflow: hidden;
    }
    .spotlight-effect::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.4) 50%, transparent 70%);
      transform: translateX(-100%) rotate(45deg);
      animation: spotlight 3s ease-in-out infinite;
    }
    .magnetic-hover {
      transition: all 0.3s ease;
    }
    .magnetic-hover:hover {
      animation: magneticPull 0.6s ease-in-out;
    }
    .wave-animation {
      animation: wave 2s ease-in-out infinite;
    }
    .typewriter-text {
      overflow: hidden;
      border-right: 3px solid var(--brand);
      white-space: nowrap;
      animation: typewriter 3s steps(40, end), blinkCursor 0.75s step-end infinite;
    }
    .particle-burst {
      position: relative;
    }
    .particle-burst::before {
      content: '✨';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 20px;
      opacity: 0;
      animation: particleBurst 2s ease-out infinite;
    }
    .floating-icon {
      animation: wave 3s ease-in-out infinite;
    }
    .floating-icon:nth-child(2n) {
      animation-delay: 0.5s;
    }
    .floating-icon:nth-child(3n) {
      animation-delay: 1s;
    }

    /* Dark mode variables */
    [data-theme="dark"] {
      --bg: #0f0f23;          /* พื้นหลังดำนวล */
      --bg-secondary: #1a1a2e; /* พื้นหลังรองดำ */
      --card: #16213e;        /* การ์ดดำ */
      --text: #e2e8f0;        /* ข้อความหลัก ขาว */
      --muted: #94a3b8;       /* ข้อความรอง */
      --brand: #a78bfa;       /* ม่วงพาสเทล */
      --brand-2: #67e8f9;     /* ฟ้าพาสเทล */
      --accent: #fb7185;      /* ชมพูพาสเทล */
      --accent-2: #4ade80;    /* เขียวพาสเทล */
      --accent-3: #fbbf24;    /* เหลืองพาสเทล */
      --shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.4), 0 10px 10px -5px rgba(0, 0, 0, 0.2);
      --shadow-soft: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.1);
    }
    /* Playful Navbar */
    .nav{ position:sticky; top:0; z-index:50; backdrop-filter:saturate(180%) blur(20px); background:rgba(255, 255, 255, 0.9); border-bottom:3px solid var(--brand); border-radius: 0 0 var(--radius-xl) var(--radius-xl); margin: 0 20px; box-shadow: var(--shadow); }
    .nav-inner{ display:flex; align-items:center; justify-content:space-between; padding:20px 24px; }
    .brand{ display:flex; align-items:center; gap:16px; text-decoration:none; color:var(--text); font-weight:900; font-size:20px; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
    .brand:hover{ transform: translateY(-2px) scale(1.05); filter: brightness(1.1); }
    .logo{ width:48px; height:48px; border-radius:var(--radius); background: linear-gradient(135deg, var(--brand), var(--accent)); box-shadow: var(--shadow-soft); transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
    .logo:hover{ transform: translateY(-3px) rotate(5deg); box-shadow: 0 10px 30px rgba(236, 72, 153, 0.4); }
    .logo-img{ width:60px; height:60px; border-radius:var(--radius); object-fit:cover; box-shadow: var(--shadow); border: 3px solid var(--brand); transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
    .logo-img:hover{ transform: translateY(-3px) scale(1.1); box-shadow: 0 15px 35px -5px var(--brand); filter: brightness(1.1); }
    .nav-links{ display:flex; gap:12px; }
    .nav-links a{ color:var(--muted); text-decoration:none; font-weight:700; padding:12px 20px; border-radius:var(--radius); transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); background: var(--card); border: 2px solid transparent; position: relative; overflow: hidden; }
    .nav-links a:hover{ color:white; background:linear-gradient(135deg, var(--brand), var(--accent)); transform:translateY(-3px) scale(1.05); box-shadow: 0 8px 25px rgba(236, 72, 153, 0.3); border-color: var(--accent-2); }

    /* Playful Hero */
    .hero{ padding:120px 0 80px; }
    .hero-grid{ display:grid; grid-template-columns: 1.2fr .8fr; gap:50px; align-items:center; }
    .eyebrow{ display:inline-flex; align-items:center; gap:16px; padding:12px 24px; border:3px solid var(--brand); border-radius:999px; color:white; background: linear-gradient(135deg, var(--brand), var(--accent)); font-weight:800; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); box-shadow: var(--shadow-soft); }
    .eyebrow:hover { transform: translateY(-3px) scale(1.05); box-shadow: 0 15px 35px rgba(236, 72, 153, 0.4); filter: brightness(1.1); }
    .pulse-dot{ width:12px; height:12px; border-radius:50%; background: var(--accent-2); box-shadow:0 0 0 10px rgba(74, 222, 128, 0.3); animation:elegantPulse 2s ease-in-out infinite; }
    @keyframes elegantPulse { 0%, 100% { transform:scale(1); opacity:1; box-shadow:0 0 0 10px rgba(74, 222, 128, 0.3); } 50% { transform:scale(1.2); opacity:0.8; box-shadow:0 0 0 20px rgba(74, 222, 128, 0.1); } }
    h1{ font-size: clamp(48px, 8vw, 88px); line-height:1.05; margin:28px 0 24px; background:linear-gradient(135deg, var(--brand), var(--accent), var(--accent-2), var(--accent-4)); background-size: 400% 400%; background-clip:text; -webkit-background-clip:text; -webkit-text-fill-color:transparent; font-weight:900; text-shadow: 0 12px 30px rgba(167, 139, 250, 0.4); letter-spacing: -0.02em; animation: gradientShift 6s ease-in-out infinite; }
    .lead{ font-size: clamp(22px, 3vw, 28px); color:var(--muted); max-width:65ch; line-height:1.7; font-weight:600; }
    .cta{ display:flex; gap:20px; margin-top:40px; flex-wrap:wrap; }
    .btn{ appearance:none; border:none; cursor:pointer; font-weight:800; padding:18px 32px; border-radius:var(--radius-xl); transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); text-decoration:none; font-size:18px; position:relative; overflow:hidden; }
    .btn-primary{ background:linear-gradient(135deg, var(--brand), var(--accent)); color:white; box-shadow:var(--shadow); border: 3px solid transparent; }
    .btn-primary:hover{ transform: translateY(-4px) scale(1.05); box-shadow:0 20px 40px -8px var(--brand); filter: brightness(1.1); }
    .btn-ghost{ background:var(--card); color:var(--text); border:3px solid var(--brand); box-shadow:var(--shadow-soft); }
    .btn-ghost:hover{ background:linear-gradient(135deg, var(--accent-2), var(--accent-3)); color:white; transform: translateY(-4px) scale(1.05); box-shadow: 0 15px 30px rgba(16, 185, 129, 0.3); }

    .hero-card{ background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(255,255,255,0.7)); border:3px solid var(--brand); border-radius: var(--radius-xl); padding:24px; box-shadow: var(--shadow); transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
    .hero-card:hover{ transform: translateY(-6px) scale(1.02); box-shadow: 0 25px 50px -10px var(--brand); filter: brightness(1.05); }
    .hero-media{ aspect-ratio: 16/10; border-radius: var(--radius-xl); overflow:hidden; position:relative; background: linear-gradient(135deg, var(--brand), var(--accent)); }
    .hero-media img{ width:100%; height:100%; object-fit:cover; opacity:.9; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
    .hero-media:hover img{ opacity:1; transform: scale(1.08) rotate(1deg); filter: brightness(1.1); }
    .badge{ position:absolute; right:14px; top:14px; background:rgba(11,16,32,.7); border:1px solid rgba(255,255,255,.12); padding:6px 10px; border-radius:999px; font-size:12px; color:var(--muted); }

    /* Playful Feature cards */
    .section{ padding:60px 0; }
    .section h2{ font-size: clamp(32px, 5vw, 52px); margin:0 0 32px; position: relative; display: inline-block; font-weight:900; background: linear-gradient(135deg, var(--brand), var(--accent-2)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; letter-spacing: -0.01em; }
    .section h2::after { content: ''; position: absolute; bottom: -12px; left: 0; width: 80px; height: 6px; background: linear-gradient(90deg, var(--brand), var(--accent), var(--accent-2)); border-radius: var(--radius); }
    .features{ display:grid; grid-template-columns: repeat(3, 1fr); gap:32px; }
    .card{ background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(255,255,255,0.85)); border:3px solid var(--brand); border-radius: var(--radius-xl); padding:32px; box-shadow: var(--shadow); transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); position:relative; overflow:hidden; }
    .card:hover { transform: translateY(-6px) scale(1.02) rotate(1deg); box-shadow: 0 20px 40px rgba(236, 72, 153, 0.2); border-color: var(--accent); filter: brightness(1.05); }
    .card h3{ margin:16px 0 16px; font-size: 26px; font-weight:800; color:var(--text); letter-spacing: -0.01em; }
    .card p{ color:var(--muted); margin:0; font-size:16px; line-height:1.6; }
    .chip{ display:inline-flex; align-items:center; gap:12px; font-size:14px; padding:8px 16px; border-radius:999px; background:linear-gradient(135deg, var(--accent-2), var(--accent-3)); border:2px solid var(--accent); color:white; font-weight:700; }

    /* Playful Stats */
    .stats{ display:grid; grid-template-columns: repeat(4, 1fr); gap:24px; margin-top:32px; }
    .stat{ background:linear-gradient(135deg, rgba(255,255,255,0.9), rgba(255,255,255,0.7)); border:3px solid var(--accent); border-radius:var(--radius-xl); padding:28px; text-align:center; transition:all 0.4s cubic-bezier(0.4, 0, 0.2, 1); box-shadow:var(--shadow); position:relative; overflow:hidden; }
    .stat:hover{ transform:translateY(-5px) scale(1.03); box-shadow:0 15px 35px rgba(245, 158, 11, 0.3); border-color:var(--brand); filter: brightness(1.05); }
    .stat::before{ content:''; position:absolute; top:-50%; left:-50%; width:200%; height:200%; background:radial-gradient(circle, var(--accent-2) 0%, transparent 70%); opacity:0; transition:opacity 0.5s ease; pointer-events:none; }
    .stat:hover::before{ opacity:0.08; }
    .stat-icon{ font-size:42px; margin-bottom:16px; display:inline-block; transform:scale(1); transition:all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
    .stat:hover .stat-icon{ transform:scale(1.15) rotate(5deg); }
    .stat strong{ display:block; font-size: clamp(20px, 2.5vw, 26px); margin-bottom:10px; background: linear-gradient(135deg, var(--brand), var(--accent)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; overflow:hidden; text-overflow:ellipsis; font-weight:900; }
    .stat span{ color:var(--muted); font-size:15px; line-height:1.4; display:block; max-width:100%; overflow:hidden; text-overflow:ellipsis; font-weight:600; }

    /* Playful How to Use */
    .how-to-use-grid{ display:grid; grid-template-columns: repeat(3, 1fr); gap:32px; margin-bottom:50px; }
    .step-card{ background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(255,255,255,0.85)); border:3px solid var(--accent-2); border-radius: var(--radius-xl); padding:36px; text-align:center; box-shadow: var(--shadow); transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); position:relative; overflow:hidden; }
    .step-card:hover{ transform: translateY(-6px) scale(1.02) rotate(-1deg); box-shadow: 0 20px 40px rgba(16, 185, 129, 0.2); border-color: var(--brand); filter: brightness(1.05); }
    .step-card::before{ content:''; position:absolute; top:-50%; left:-50%; width:200%; height:200%; background:radial-gradient(circle, var(--accent-3) 0%, transparent 70%); opacity:0; transition:opacity 0.5s ease; pointer-events:none; }
    .step-card:hover::before{ opacity:0.08; }
    .step-number{ position:absolute; top:20px; right:20px; width:40px; height:40px; border-radius:50%; background:linear-gradient(135deg, var(--brand), var(--accent)); color:white; display:flex; align-items:center; justify-content:center; font-weight:800; font-size:16px; box-shadow: var(--shadow-soft); transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
    .step-card:hover .step-number{ transform: scale(1.1) rotate(10deg); }

    /* Tooltip Styles */
    .tooltip-container {
      position: relative;
    }
    
    .tooltip, .chart-tooltip {
      position: absolute;
      top: -10px;
      left: 50%;
      transform: translateX(-50%) translateY(-100%);
      background: linear-gradient(135deg, rgba(255,255,255,0.98), rgba(255,255,255,0.95));
      border: 3px solid var(--brand);
      border-radius: var(--radius);
      padding: 16px;
      box-shadow: 0 20px 40px -8px rgba(0,0,0,0.3), 0 0 0 1px rgba(255,255,255,0.1);
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      z-index: 1000;
      min-width: 280px;
      max-width: 320px;
      backdrop-filter: blur(20px);
      pointer-events: none;
    }
    
    .tooltip-container:hover .tooltip,
    .tooltip-container:hover .chart-tooltip {
      opacity: 1;
      visibility: visible;
      transform: translateX(-50%) translateY(-100%) translateY(-8px);
    }
    
    .tooltip::before, .chart-tooltip::before {
      content: '';
      position: absolute;
      top: 100%;
      left: 50%;
      transform: translateX(-50%);
      border: 8px solid transparent;
      border-top-color: var(--brand);
    }
    
    .tooltip-header {
      font-weight: 800;
      font-size: 16px;
      color: var(--text);
      margin-bottom: 12px;
      padding-bottom: 8px;
      border-bottom: 2px solid var(--brand);
      background: linear-gradient(135deg, var(--brand), var(--accent));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .tooltip-content {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    
    .tooltip-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 6px 0;
      border-bottom: 1px solid rgba(236, 72, 153, 0.1);
    }
    
    .tooltip-item:last-child {
      border-bottom: none;
    }
    
    .tooltip-label {
      font-weight: 600;
      color: var(--muted);
      font-size: 14px;
    }
    
    .tooltip-value {
      font-weight: 800;
      color: var(--text);
      font-size: 14px;
      background: linear-gradient(135deg, var(--brand), var(--accent-2));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    /* Chart tooltip specific positioning */
    .chart-bar .chart-tooltip {
      bottom: 100%;
      top: auto;
      transform: translateX(-50%) translateY(-8px);
    }
    
    .chart-bar:hover .chart-tooltip {
      transform: translateX(-50%) translateY(-16px);
    }
    
    .chart-tooltip::before {
      top: auto;
      bottom: -8px;
      border-top-color: transparent;
      border-bottom-color: var(--brand);
    }
    
    /* Dark mode tooltip styles */
    [data-theme="dark"] .tooltip,
    [data-theme="dark"] .chart-tooltip {
      background: linear-gradient(135deg, rgba(22, 33, 62, 0.98), rgba(22, 33, 62, 0.95));
      border-color: var(--brand);
      color: var(--text);
    }
    
    /* Responsive tooltip */
    @media (max-width: 768px) {
      .tooltip, .chart-tooltip {
        min-width: 240px;
        max-width: 280px;
        font-size: 13px;
      }
      
      .tooltip-header {
        font-size: 14px;
      }
      
      .tooltip-label,
      .tooltip-value {
        font-size: 12px;
      }
    }
    .step-icon{ font-size:56px; margin-bottom:20px; display:inline-block; transform:scale(1); transition:all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
    .step-card:hover .step-icon{ transform:scale(1.1) rotate(-5deg); }
    .step-card h3{ margin:0 0 20px; font-size:26px; color:var(--text); font-weight:800; letter-spacing: -0.01em; }
    .step-card p{ color:var(--muted); margin:0; line-height:1.6; font-size:16px; }
    
    .scoring-info{ margin-top:40px; }
    .scoring-card{ background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(255,255,255,0.85)); border:4px solid var(--brand); border-radius: var(--radius-xl); padding:40px; text-align:center; box-shadow: var(--shadow); transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); position:relative; overflow:hidden; }
    .scoring-card:hover{ transform: translateY(-6px) scale(1.03); box-shadow: 0 25px 50px rgba(236, 72, 153, 0.2); border-color: var(--accent); filter: brightness(1.05); }
    .scoring-icon{ font-size:64px; margin-bottom:20px; display:inline-block; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
    .scoring-card:hover .scoring-icon{ transform: scale(1.1) rotate(10deg); }
    .scoring-card h3{ margin:0 0 24px; font-size:28px; background: linear-gradient(135deg, var(--brand), var(--accent), var(--accent-2)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; font-weight:900; }
    .scoring-item{ display:flex; align-items:center; justify-content:center; gap:20px; margin-bottom:20px; font-size:24px; font-weight:800; }
    .bottles{ color:var(--accent); }
    .equals{ color:var(--muted); font-size:28px; }
    .hours{ color:var(--accent-2); }
    .scoring-details p{ color:var(--muted); margin:0; line-height:1.6; max-width:500px; margin:0 auto; font-size:16px; font-weight:500; }

    /* Testimonial */
    .quote{ display:grid; grid-template-columns: .9fr 1.1fr; gap:22px; align-items:center; }
    .quote-card{ background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03)); border:1px solid rgba(255,255,255,.12); border-radius: var(--radius-xl); padding:22px; box-shadow: var(--shadow); }
    blockquote{ margin:0; font-size: clamp(16px, 1.4vw, 18px); }
    .author{ display:flex; align-items:center; gap:12px; margin-top:14px; color:var(--muted); }
    .avatar{ width:38px; height:38px; border-radius:50%; background:linear-gradient(135deg, var(--brand), var(--brand-2)); }

    /* CTA strip */
    .cta-strip{ 
      margin: 60px auto; 
      padding: 50px 40px; 
      border-radius: var(--radius-xl); 
      background: linear-gradient(135deg, 
        rgba(124,92,255,.15) 0%, 
        rgba(34,211,238,.12) 50%, 
        rgba(236,72,153,.08) 100%); 
      border: 2px solid rgba(255,255,255,.25); 
      display: flex; 
      flex-direction: column; 
      align-items: center; 
      justify-content: center; 
      gap: 30px; 
      text-align: center; 
      max-width: 800px; 
      box-shadow: var(--shadow-colorful); 
      position: relative; 
      overflow: hidden; 
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      backdrop-filter: blur(20px);
    }
    
    .cta-strip::before { 
      content: ''; 
      position: absolute; 
      top: -50%; 
      left: -50%; 
      width: 200%; 
      height: 200%; 
      background: radial-gradient(circle, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0) 70%); 
      opacity: 0; 
      transition: opacity 0.6s ease; 
      pointer-events: none; 
    }
    
    .cta-strip:hover::before { opacity: 1; }
    .cta-strip:hover { 
      transform: translateY(-8px) scale(1.03); 
      box-shadow: 0 30px 60px rgba(124,92,255,0.25), 0 0 0 1px rgba(255,255,255,0.3);
    }
    
    .cta-content {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 25px;
      width: 100%;
    }
    
    .cta-title {
      font-size: clamp(28px, 4vw, 36px);
      font-weight: 900;
      margin: 0;
      background: linear-gradient(135deg, var(--brand), var(--accent), var(--accent-2));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      letter-spacing: -0.02em;
      line-height: 1.2;
    }
    
    .cta-subtitle {
      font-size: clamp(16px, 2.5vw, 20px);
      color: var(--muted);
      margin: 0;
      max-width: 600px;
      line-height: 1.6;
      font-weight: 500;
    }
    
    .cta-buttons {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
    }
    
    .cta-extra-buttons {
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
    }
    
    .cta-btn-main {
      background: linear-gradient(135deg, var(--brand), var(--accent));
      color: white;
      padding: 16px 32px;
      border-radius: var(--radius);
      text-decoration: none;
      font-weight: 700;
      font-size: 18px;
      display: flex;
      align-items: center;
      gap: 10px;
      box-shadow: 0 8px 25px rgba(124,92,255,0.3);
      border: none;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }
    
    .cta-btn-main::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      transition: left 0.6s ease;
    }
    
    .cta-btn-main:hover::before {
      left: 100%;
    }
    
    .cta-btn-main:hover {
      transform: translateY(-6px) scale(1.05);
      box-shadow: 0 15px 40px rgba(124,92,255,0.4);
      filter: brightness(1.1);
    }
    
    .cta-btn-secondary {
      background: rgba(255,255,255,0.9);
      color: var(--text);
      padding: 16px 32px;
      border-radius: var(--radius);
      text-decoration: none;
      font-weight: 600;
      font-size: 18px;
      display: flex;
      align-items: center;
      gap: 10px;
      border: 2px solid var(--brand);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      backdrop-filter: blur(10px);
    }
    
    .cta-btn-secondary:hover {
      background: var(--brand);
      color: white;
      transform: translateY(-4px) scale(1.05);
      box-shadow: 0 12px 30px rgba(124,92,255,0.3);
    }
    
    .cta-btn-ghost {
      background: rgba(255,255,255,0.1);
      color: var(--muted);
      padding: 12px 24px;
      border-radius: var(--radius);
      text-decoration: none;
      font-weight: 500;
      font-size: 16px;
      display: flex;
      align-items: center;
      gap: 8px;
      border: 1px solid rgba(255,255,255,0.2);
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
    }
    
    .cta-btn-ghost:hover {
      background: rgba(255,255,255,0.2);
      color: var(--text);
      transform: translateY(-2px);
      border-color: var(--brand);
    }
    
    .btn-icon {
      font-size: 1.2em;
      transition: transform 0.3s ease;
    }
    
    .btn:hover .btn-icon {
      transform: scale(1.2) rotate(5deg);
    }
    
    .btn-text {
      transition: all 0.3s ease;
    }
    
    /* Responsive CTA */
    @media (max-width: 768px) {
      .cta-strip {
        margin: 40px auto;
        padding: 40px 30px;
        max-width: 95%;
      }
      
      .cta-buttons {
        flex-direction: column;
        width: 100%;
      }
      
      .cta-btn-main,
      .cta-btn-secondary {
        width: 100%;
        justify-content: center;
        padding: 18px 24px;
      }
      
      .cta-extra-buttons {
        flex-direction: column;
        width: 100%;
        gap: 10px;
      }
      
      .cta-btn-ghost {
        width: 100%;
        justify-content: center;
      }
    }
    
    .cta-strip strong { font-size: 22px; }
    .btn { transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
    .btn:hover { transform: translateY(-4px) scale(1.05); box-shadow: 0 12px 25px rgba(0,0,0,0.2); filter: brightness(1.1); }

    /* Leaderboard */
    .leaderboard-container{ background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03)); border:1px solid rgba(255,255,255,.12); border-radius: var(--radius-xl); padding:32px; box-shadow: var(--shadow); }
    .leaderboard-loading{ text-align:center; padding:40px; }
    .loading-spinner{ width:40px; height:40px; border:4px solid rgba(167, 139, 250, 0.2); border-top:4px solid var(--brand); border-radius:50%; animation:spin 1s linear infinite; margin:0 auto 16px; }
    @keyframes spin{ 0%{ transform:rotate(0deg); } 100%{ transform:rotate(360deg); } }
    
    /* Loader Animation */
    .loader--3 {
      --loader-size: calc(var(--block-size) / 3);
      --anim-duration: 1.2s;
      width: var(--loader-size);
      height: var(--loader-size);
      aspect-ratio: 1 / 1;
      border: 1px solid var(--light-color);
      border-radius: 50%;
      position: relative;
      animation: loader-3 calc(var(--anim-duration) * 3) linear infinite;
    }
    
    .loader--3::before,
    .loader--3::after {
      content: '';
      position: absolute;
      width: var(--dot-size);
      height: var(--dot-size);
      aspect-ratio: 1 / 1;
      background: currentColor;
      border-radius: 50%;
      top: var(--dot-size-half-neg);
      left: calc(50% - var(--dot-size-half));
      animation: loader-3 var(--anim-duration) cubic-bezier(0.27, 0.08, 0.26, 0.7) infinite;
      transform-origin: center calc(var(--loader-size-half) + var(--dot-size-half) - 1px);
    }
    
    .loader--3::after {
      animation-delay: calc(var(--anim-duration) / 3 * -1);
    }
    
    @keyframes loader-3 {
      100% {
        transform: rotate(1turn);
      }
    }
    
    /* Loader container for centering */
    .loader-container {
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 40px;
      color: var(--brand);
    }
    .leaderboard-podium{ display:grid; grid-template-columns: repeat(3, 1fr); gap:20px; margin-bottom:32px; }
    .podium-item{ background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04)); border:2px solid; border-radius: var(--radius); padding:24px; text-align:center; position:relative; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); animation: bounceIn 0.8s ease-out; opacity: 0; animation-fill-mode: forwards; }
     .podium-item:hover{ transform: translateY(-4px) scale(1.05); box-shadow: 0 15px 35px rgba(0,0,0,0.2); filter: brightness(1.1); }
     .podium-item.first{ border-color: #ffd700; background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 215, 0, 0.05)); animation-delay: 0.2s; }
     .podium-item.second{ border-color: #c0c0c0; background: linear-gradient(135deg, rgba(192, 192, 192, 0.1), rgba(192, 192, 192, 0.05)); animation-delay: 0s; }
     .podium-item.third{ border-color: #cd7f32; background: linear-gradient(135deg, rgba(205, 127, 50, 0.1), rgba(205, 127, 50, 0.05)); animation-delay: 0.4s; }
    .podium-rank{ position:absolute; top:-12px; left:50%; transform:translateX(-50%); width:32px; height:32px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:800; font-size:14px; }
    .podium-rank.first{ background: linear-gradient(135deg, #ffd700, #ffed4e); color:#000; }
    .podium-rank.second{ background: linear-gradient(135deg, #c0c0c0, #e5e5e5); color:#000; }
    .podium-rank.third{ background: linear-gradient(135deg, #cd7f32, #daa520); color:#fff; }
    .podium-avatar{ width:60px; height:60px; border-radius:50%; background: linear-gradient(135deg, var(--brand), var(--brand-2)); margin:0 auto 12px; display:flex; align-items:center; justify-content:center; font-size:24px; color:white; font-weight:800; }
    .podium-name{ font-weight:700; margin-bottom:8px; color:var(--text); }
    .podium-bottles{ font-size:20px; font-weight:800; margin-bottom:4px; }
    .podium-bottles.first{ background: linear-gradient(135deg, #ffd700, #ffed4e); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
    .podium-bottles.second{ background: linear-gradient(135deg, #c0c0c0, #e5e5e5); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
    .podium-bottles.third{ background: linear-gradient(135deg, #cd7f32, #daa520); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
    .podium-hours{ color:var(--muted); font-size:14px; }
    .leaderboard-item{ display:flex; align-items:center; gap:16px; padding:16px; background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02)); border:1px solid rgba(255,255,255,.08); border-radius: var(--radius); margin-bottom:12px; transition: all 0.3s ease, transform 0.5s ease, background 0.3s ease; animation: fadeInUp 0.6s ease-out; }
    .leaderboard-item.updating{ transform: scale(1.02); background: linear-gradient(180deg, rgba(74, 144, 226, 0.1), rgba(74, 144, 226, 0.05)); border-color: rgba(74, 144, 226, 0.3); box-shadow: 0 6px 20px rgba(74, 144, 226, 0.2); }
    .leaderboard-item.rank-up{ animation: rankUp 0.8s ease; }
    .leaderboard-item.rank-down{ animation: rankDown 0.8s ease; }
    .leaderboard-item:hover{ background: linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.06)); border-color: rgba(255,255,255,.25); transform: translateX(6px) scale(1.02); filter: brightness(1.05); }
    .leaderboard-rank{ width:32px; height:32px; border-radius:50%; background: linear-gradient(135deg, var(--brand), var(--brand-2)); color:white; display:flex; align-items:center; justify-content:center; font-weight:700; font-size:14px; flex-shrink:0; }
    .leaderboard-avatar{ width:48px; height:48px; border-radius:50%; background: linear-gradient(135deg, var(--brand), var(--brand-2)); display:flex; align-items:center; justify-content:center; font-size:18px; color:white; font-weight:700; flex-shrink:0; }
    .leaderboard-info{ flex:1; }
    .leaderboard-name{ font-weight:600; margin-bottom:4px; color:var(--text); }
    .leaderboard-details{ color:var(--muted); font-size:14px; }
    .leaderboard-bottles{ font-size:18px; font-weight:800; color:var(--brand); margin-right:8px; }
    .leaderboard-hours{ color:var(--muted); font-size:14px; }
    .leaderboard-error{ text-align:center; padding:40px; color:var(--muted); }
    
    /* Leaderboard Tabs */
    .leaderboard-tabs{ display:flex; gap:8px; margin:24px 0; justify-content:center; }
    .tab-btn{ padding:12px 24px; border:2px solid rgba(255,255,255,.12); background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03)); color:var(--muted); border-radius: var(--radius); cursor:pointer; transition: all 0.3s ease; font-weight:600; }
    .tab-btn:hover{ border-color: rgba(167, 139, 250, 0.5); color:var(--text); transform: translateY(-3px) scale(1.05); filter: brightness(1.1); }
    .tab-btn.active{ border-color: var(--brand); background: linear-gradient(135deg, var(--brand), var(--brand-2)); color:white; box-shadow: 0 8px 25px rgba(167, 139, 250, 0.4); animation: elegantGlow 3s ease-in-out infinite; }
    .podium-team{ color:var(--muted); font-size:12px; margin-bottom:8px; font-weight:500; }

    /* Mini Game Styles */
    .game-container{ background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04)); border:1px solid rgba(255,255,255,.15); border-radius: var(--radius-xl); padding:32px; box-shadow: var(--shadow-soft); margin:24px 0; }
    .game-info{ display:flex; justify-content:space-between; align-items:center; margin-bottom:24px; flex-wrap:wrap; gap:16px; }
    .game-stats{ display:flex; gap:24px; flex-wrap:wrap; }
    .stat-item{ display:flex; flex-direction:column; align-items:center; }
    .stat-label{ color:var(--muted); font-size:14px; margin-bottom:4px; }
    .stat-value{ font-weight:800; font-size:18px; color:var(--text); }
    .game-area{ position:relative; width:100%; height:400px; background: linear-gradient(180deg, #87CEEB 0%, #98FB98 100%); border-radius: var(--radius); overflow:hidden; border:3px solid rgba(167, 139, 250, 0.3); }
    .game-instructions{ position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); text-align:center; background:rgba(255,255,255,0.95); padding:24px; border-radius: var(--radius); box-shadow: var(--shadow); }
    .game-instructions h3{ margin:0 0 16px; color:#2d3748; }
    .game-instructions p{ margin:8px 0; color:#4a5568; font-size:14px; }
    .game-controls{ margin-top:16px; padding:12px; background:rgba(167, 139, 250, 0.1); border-radius: var(--radius); color:#5a67d8; font-weight:600; }
    .basket{ position:absolute; bottom:10px; left:50%; transform:translateX(-50%); font-size:48px; cursor:pointer; transition: all 0.1s ease; user-select:none; }
    .falling-item{ position:absolute; font-size:24px; animation: fall linear; user-select:none; }
    .game-over{ position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); text-align:center; background:rgba(255,255,255,0.95); padding:32px; border-radius: var(--radius-xl); box-shadow: var(--shadow); }
    .game-over h3{ margin:0 0 16px; color:#2d3748; }
    .game-over p{ margin:8px 0; color:#4a5568; }
    #final-score{ font-weight:800; color:var(--brand); font-size:24px; }
    
    @keyframes fall {
      from { top: -50px; }
      to { top: 100%; }
    }
    
    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateY(0) translateX(-50%); }
      40% { transform: translateY(-10px) translateX(-50%); }
      60% { transform: translateY(-5px) translateX(-50%); }
    }

    /* Animation Keyframes */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes slideInLeft {
      from {
        opacity: 0;
        transform: translateX(-30px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    @keyframes slideInRight {
      from {
        opacity: 0;
        transform: translateX(30px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    @keyframes bounceIn {
      0% {
        opacity: 0;
        transform: scale(0.3);
      }
      50% {
        opacity: 1;
        transform: scale(1.05);
      }
      70% {
        transform: scale(0.9);
      }
      100% {
        opacity: 1;
        transform: scale(1);
      }
    }

    @keyframes pulseGlow {
       0% {
         transform: scale(1);
         box-shadow: var(--shadow-soft);
       }
       50% {
         transform: scale(1.02);
         box-shadow: 0 15px 30px rgba(167, 139, 250, 0.3);
       }
       100% {
         transform: scale(1);
         box-shadow: var(--shadow-soft);
       }
     }
     
     @keyframes rankUp {
       0% {
         transform: scale(1) rotate(0deg);
         box-shadow: var(--shadow-soft);
       }
       50% {
         transform: scale(1.1) rotate(5deg);
         box-shadow: 0 20px 40px rgba(167, 139, 250, 0.4);
       }
       100% {
         transform: scale(1) rotate(0deg);
         box-shadow: var(--shadow-soft);
       }
     }

    /* Theme Switcher Blocks */
    .theme-switcher {
      position: fixed;
      top: 50%;
      right: 20px;
      transform: translateY(-50%);
      z-index: 1000;
    }

    .blocks {
      display: flex;
      flex-direction: column;
      list-style-type: none;
      padding: 12px;
      border-radius: 24px;
      gap: 16px;
      background: hsl(0 0% 100% / 0.5);
      align-items: center;
      justify-content: center;
      align-content: center;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.3);
      box-shadow: var(--shadow-soft);
      transition: all 0.3s ease;
    }

    .blocks:hover {
      --show: 1;
      transform: translateY(-2px);
      box-shadow: var(--shadow-colorful);
    }

    .block {
      width: 48px;
      height: 48px;
      display: grid;
      place-items: center;
      align-content: center;
      transition: flex 0.2s ease;
      flex: calc(0.2 + (var(--lerp, 0) * 1.5));
      position: relative;
      cursor: pointer;
      outline: none;
      border: none;
      background: none;
    }

    .block:after {
      content: '';
      width: 5%;
      aspect-ratio: 1;
      background: var(--text);
      position: absolute;
      bottom: 10%;
      left: 50%;
      border-radius: 8px;
      transform: translate(-50%, -50%);
      z-index: -1;
      opacity: 0.3;
    }

    .block:before {
      content: '';
      position: absolute;
      width: calc(100% + 16px);
      bottom: 0;
      aspect-ratio: 1 / 2;
      left: 50%;
      transition: transform 0.2s ease;
      transform-origin: 50% 100%;
      transform: translateX(-50%) scaleY(var(--show, 0));
      z-index: -1;
      background: linear-gradient(to top, rgba(255,255,255,0.1), transparent);
      border-radius: 12px;
    }

    .block .block__item {
      transition: outline 0.2s ease;
      outline: transparent 2px solid;
    }

    :is(.block:hover, .block:focus-visible) .block__item {
      outline: var(--card) 2px solid;
    }

    .block__item {
      width: 100%;
      aspect-ratio: 1;
      border-radius: 12px;
      background: var(--bg), var(--card);
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.2s ease;
      transform-origin: 50% 100%;
      position: relative;
      transform: translateY(calc(var(--lerp) * -75%));
      cursor: pointer;
      font-size: 20px;
      text-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }

    .block__item:after {
      content: '';
      position: absolute;
      height: 100%;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      aspect-ratio: 1;
      border-left: 3px solid white;
      border-top: 3px solid white;
      border-radius: 8px;
      mask: linear-gradient(135deg, black, transparent 50%);
      opacity: 0.8;
    }

    /* Theme-specific gradients */
    .block__item[data-theme="playful"] {
      background: linear-gradient(135deg, var(--brand), var(--brand-2));
    }

    .block__item[data-theme="nature"] {
      background: linear-gradient(135deg, var(--accent-2), var(--accent-5));
    }

    .block__item[data-theme="sunset"] {
      background: linear-gradient(135deg, var(--accent), var(--accent-4));
    }

    .block__item[data-theme="ocean"] {
      background: linear-gradient(135deg, var(--brand-2), var(--accent-3));
    }

    .block__item[data-theme="space"] {
      background: linear-gradient(135deg, #7c3aed, #3b82f6, #8b5cf6);
    }

    /* Hover effects for theme blocks */
    :is(.block:hover, .block:focus-visible) {
      --lerp: 1;
      z-index: 5;
    }

    .block:has( + :is(.block:hover, .block:focus-visible)),
    :is(.block:hover, .block:focus-visible) + .block {
      --lerp: 0.5625;
      z-index: 4;
    }

    .block:has( + .block + :is(.block:hover, .block:focus-visible)),
    :is(.block:hover, .block:focus-visible) + .block + .block {
      --lerp: 0.25;
      z-index: 3;
    }

    .block:has( + .block + .block + :is(.block:hover, .block:focus-visible)),
    :is(.block:hover, .block:focus-visible) + .block + .block + .block {
      --lerp: 0.0625;
      z-index: 2;
    }

    .block:has( + .block + .block + .block + :is(.block:hover, .block:focus-visible)),
    :is(.block:hover, .block:focus-visible) + .block + .block + .block + .block {
      --lerp: 0;
      z-index: 1;
    }

    /* Dark mode styles */
    @media(prefers-color-scheme: dark) {
      .blocks {
        background: hsl(0 0% 0% / 0.5);
        border: 1px solid rgba(255, 255, 255, 0.1);
      }
    }

    /* Theme variables */
    [data-theme="playful"] {
      --bg: #fff5f5;
      --bg-secondary: #fef3c7;
      --card: #ffffff;
      --text: #1f2937;
      --muted: #6b7280;
      --brand: #ec4899;
      --brand-2: #06b6d4;
      --accent: #f59e0b;
      --accent-2: #10b981;
      --accent-3: #8b5cf6;
      --accent-4: #ef4444;
      --accent-5: #06d6a0;
      --shadow: 0 10px 25px -5px rgba(236, 72, 153, 0.1), 0 4px 6px -2px rgba(236, 72, 153, 0.05);
      --gradient-1: linear-gradient(135deg, #fdf2f8 0%, #fef3c7 50%, #f0f9ff 100%);
      --gradient-2: linear-gradient(135deg, #ec4899, #06b6d4);
      --gradient-3: linear-gradient(135deg, #f59e0b, #10b981);
    }

    [data-theme="nature"] {
      --bg: #f0fdf4;
      --bg-secondary: #ecfdf5;
      --card: #ffffff;
      --text: #1f2937;
      --muted: #6b7280;
      --brand: #10b981;
      --brand-2: #059669;
      --accent: #84cc16;
      --accent-2: #22c55e;
      --accent-3: #16a34a;
      --accent-4: #15803d;
      --accent-5: #166534;
      --shadow: 0 10px 25px -5px rgba(16, 185, 129, 0.1), 0 4px 6px -2px rgba(16, 185, 129, 0.05);
      --gradient-1: linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 50%, #f7fee7 100%);
      --gradient-2: linear-gradient(135deg, #10b981, #84cc16);
      --gradient-3: linear-gradient(135deg, #22c55e, #16a34a);
    }

    [data-theme="sunset"] {
      --bg: #fff7ed;
      --bg-secondary: #ffedd5;
      --card: #ffffff;
      --text: #1f2937;
      --muted: #6b7280;
      --brand: #f97316;
      --brand-2: #ea580c;
      --accent: #fb923c;
      --accent-2: #fdba74;
      --accent-3: #fed7aa;
      --accent-4: #ef4444;
      --accent-5: #dc2626;
      --shadow: 0 10px 25px -5px rgba(249, 115, 22, 0.1), 0 4px 6px -2px rgba(249, 115, 22, 0.05);
      --gradient-1: linear-gradient(135deg, #fff7ed 0%, #ffedd5 50%, #fef3c7 100%);
      --gradient-2: linear-gradient(135deg, #f97316, #ef4444);
      --gradient-3: linear-gradient(135deg, #fb923c, #dc2626);
    }

    [data-theme="ocean"] {
      --bg: #f0f9ff;
      --bg-secondary: #e0f2fe;
      --card: #ffffff;
      --text: #1f2937;
      --muted: #6b7280;
      --brand: #0ea5e9;
      --brand-2: #0284c7;
      --accent: #06b6d4;
      --accent-2: #67e8f9;
      --accent-3: #a5f3fc;
      --accent-4: #0891b2;
      --accent-5: #0e7490;
      --shadow: 0 10px 25px -5px rgba(14, 165, 233, 0.1), 0 4px 6px -2px rgba(14, 165, 233, 0.05);
      --gradient-1: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 50%, #dbeafe 100%);
      --gradient-2: linear-gradient(135deg, #0ea5e9, #06b6d4);
      --gradient-3: linear-gradient(135deg, #67e8f9, #0891b2);
    }

    [data-theme="space"] {
      --bg: #0a0a0f;
      --bg-secondary: #1a1a2e;
      --card: #16213e;
      --text: #e6e6fa;
      --muted: #9d9dbd;
      --brand: #7c3aed;
      --brand-2: #3b82f6;
      --accent: #06b6d4;
      --accent-2: #8b5cf6;
      --accent-3: #a855f7;
      --accent-4: #6366f1;
      --accent-5: #4f46e5;
      --shadow: 0 10px 25px -5px rgba(124, 58, 237, 0.3), 0 4px 6px -2px rgba(59, 130, 246, 0.2);
      --gradient-1: linear-gradient(135deg, #0a0a0f 0%, #1a1a2e 50%, #16213e 100%);
      --gradient-2: linear-gradient(135deg, #7c3aed, #3b82f6);
      --gradient-3: linear-gradient(135deg, #8b5cf6, #06b6d4);
    }

    /* Smooth theme transition */
    * {
      transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
    }

    @keyframes themeChange {
       0% {
         transform: translateY(0);
       }
       25% {
         transform: translateY(-10px) scale(1.05);
         background: linear-gradient(180deg, rgba(34, 197, 94, 0.2), rgba(34, 197, 94, 0.1));
         border-color: rgba(34, 197, 94, 0.4);
       }
       50% {
         transform: translateY(-5px) scale(1.02);
       }
       100% {
         transform: translateY(0) scale(1);
       }
     }
     
     @keyframes rankDown {
       0% {
         transform: translateY(0);
       }
       25% {
         transform: translateY(10px) scale(0.98);
         background: linear-gradient(180deg, rgba(239, 68, 68, 0.2), rgba(239, 68, 68, 0.1));
         border-color: rgba(239, 68, 68, 0.4);
       }
       50% {
         transform: translateY(5px) scale(0.99);
       }
       100% {
         transform: translateY(0) scale(1);
       }
     }

     /* Enhanced Theme Toggle Button */
     #theme-toggle {
       position: relative;
       background: linear-gradient(135deg, var(--brand), var(--brand-2));
       border: none;
       color: white;
       padding: 12px 20px;
       border-radius: 25px;
       cursor: pointer;
       font-size: 16px;
       font-weight: 600;
       transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
       box-shadow: 0 4px 15px rgba(167, 139, 250, 0.3);
       overflow: hidden;
       min-width: 60px;
       display: flex;
       align-items: center;
       justify-content: center;
     }

     #theme-toggle::before {
       content: '';
       position: absolute;
       top: 0;
       left: -100%;
       width: 100%;
       height: 100%;
       background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
       transition: left 0.5s;
     }

     #theme-toggle:hover {
       transform: translateY(-4px) scale(1.1) rotate(5deg);
       box-shadow: 0 12px 35px rgba(167, 139, 250, 0.5);
       filter: brightness(1.2);
       animation: elegantGlow 2s ease-in-out infinite;
     }

     #theme-toggle:hover::before {
       left: 100%;
     }

     #theme-toggle:active {
       transform: translateY(0) scale(0.98);
       transition: all 0.1s;
     }

     /* Theme toggle animation */
     @keyframes themeSwitch {
       0% { transform: rotate(0deg) scale(1); }
       50% { transform: rotate(180deg) scale(1.1); }
       100% { transform: rotate(360deg) scale(1); }
     }

     #theme-toggle.switching {
        animation: themeSwitch 0.6s ease-in-out;
      }

      /* Loading Skeleton Styles */
      .skeleton {
        background: linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%);
        background-size: 200% 100%;
        animation: shimmer 1.5s infinite;
        border-radius: var(--radius);
      }

      @keyframes shimmer {
        0% {
          background-position: -200% 0;
        }
        100% {
          background-position: 200% 0;
        }
      }

      .skeleton-podium {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 20px;
        margin-bottom: 32px;
      }

      .skeleton-podium-item {
        height: 200px;
        border-radius: var(--radius);
        position: relative;
        overflow: hidden;
      }

      .skeleton-list {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .skeleton-list-item {
        height: 80px;
        border-radius: var(--radius);
        position: relative;
        overflow: hidden;
      }

      .skeleton-text {
        height: 20px;
        margin: 8px 0;
        border-radius: 4px;
      }

      .skeleton-text.short {
        width: 60%;
      }

      .skeleton-text.medium {
        width: 80%;
      }

      .skeleton-avatar {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        margin: 16px auto;
      }

      /* Hide skeleton when content loads */
      .leaderboard-content:not([style*="display: none"]) ~ .skeleton-container {
        display: none;
      }

    /* Modal */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(10px);
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }
    
    .modal-overlay.active {
      opacity: 1;
      visibility: visible;
    }
    
    .modal {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0.8);
      background: var(--card);
      border-radius: var(--radius-xl);
      padding: 32px;
      width: min(500px, 90vw);
      box-shadow: var(--shadow);
      border: 1px solid rgba(167, 139, 250, 0.2);
      transition: all 0.3s ease;
    }
    
    .modal-overlay.active .modal {
      transform: translate(-50%, -50%) scale(1);
    }
    
    .modal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 24px;
    }
    
    .modal-title {
      font-size: 24px;
      font-weight: 800;
      background: linear-gradient(135deg, var(--brand), var(--brand-2));
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin: 0;
    }
    
    .close-btn {
      width: 32px;
      height: 32px;
      border: none;
      background: rgba(167, 139, 250, 0.1);
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--muted);
      transition: all 0.3s ease;
    }
    
    .close-btn:hover {
      background: rgba(167, 139, 250, 0.2);
      transform: scale(1.1);
    }
    
    .form-group {
      margin-bottom: 20px;
    }
    
    .form-label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: var(--text);
    }
    
    .form-input {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid rgba(167, 139, 250, 0.2);
      border-radius: var(--radius);
      background: var(--bg);
      color: var(--text);
      transition: all 0.3s ease;
      font-family: inherit;
    }
    
    .form-input:focus {
      outline: none;
      border-color: var(--brand);
      background: var(--card);
      transform: translateY(-2px);
      box-shadow: var(--shadow-soft);
    }
    
    .form-textarea {
      min-height: 100px;
      resize: vertical;
    }
    
    .btn-submit {
      width: 100%;
      margin-top: 8px;
    }

    /* Footer */
    footer{ padding:28px 0 44px; color:var(--muted); border-top: 1px solid rgba(255,255,255,.08); margin-top:28px; }
    .foot{ display:flex; flex-direction:column; align-items:center; text-align:center; }
    .foot p{ margin:4px 0; }
    .foot p:first-child{ font-size:16px; font-weight:600; }
    .foot p:last-child{ font-size:14px; line-height:1.6; max-width:600px; }

    /* Navigation Mobile Responsive */
    @media (max-width: 768px) {
      .nav-inner {
        flex-direction: column;
        gap: 16px;
        align-items: center;
      }
      
      .nav-links {
        flex-direction: column;
        gap: 8px;
        width: 100%;
        text-align: center;
      }
      
      .nav-links a {
        padding: 12px 16px;
        font-size: 14px;
        width: 100%;
        text-align: center;
      }
    }
    
    @media (max-width: 480px) {
      .nav-links {
        gap: 6px;
      }
      
      .nav-links a {
        padding: 10px 12px;
        font-size: 13px;
      }
      
      .brand {
        font-size: 18px;
      }
      
      .logo-img {
        width: 40px;
        height: 40px;
      }
    }

    /* Responsive */
    @media (max-width: 900px){
      .hero-grid{ grid-template-columns: 1fr; }
      .quote{ grid-template-columns: 1fr; }
      .features{ grid-template-columns: 1fr 1fr; }
      .how-to-use-grid{ grid-template-columns: 1fr 1fr; gap:20px; }
      .stats{ grid-template-columns: 1fr 1fr; gap:16px; }
      .stat{ padding:16px; }
      .stat-icon{ font-size:30px; margin-bottom:8px; }
      .stat strong{ font-size: clamp(16px, 3vw, 20px); }
      .stat span{ font-size:12px; }
      .step-card{ padding:24px; }
      .step-icon{ font-size:40px; }
      .scoring-card{ padding:28px; }
      .scoring-icon{ font-size:48px; }
    }
    @media (max-width: 900px){
      .leaderboard-podium{ grid-template-columns: 1fr; gap:16px; }
      .podium-item{ padding:20px; }
      .podium-avatar{ width:50px; height:50px; font-size:20px; }
      .leaderboard-container{ padding:24px; }
    }
    @media (max-width: 560px){
      .features{ grid-template-columns: 1fr; }
      .how-to-use-grid{ grid-template-columns: 1fr; gap:16px; }
      .stats{ grid-template-columns: 1fr; }
      .stat{ margin-bottom:4px; padding:14px; }
      .stat-icon{ font-size:26px; margin-bottom:6px; }
      .stat strong{ font-size: clamp(15px, 4vw, 18px); }
      .stat span{ font-size:11px; line-height:1.2; }
      .step-card{ padding:20px; }
      .step-icon{ font-size:36px; margin-bottom:12px; }
      .step-card h3{ font-size:16px; }
      .step-card p{ font-size:14px; }
      .scoring-card{ padding:24px; }
      .scoring-icon{ font-size:40px; }
      .scoring-card h3{ font-size:20px; }
      .scoring-item{ font-size:18px; gap:12px; flex-wrap:wrap; }
      .modal { padding: 24px; }
      .leaderboard-container{ padding:20px; }
      .podium-item{ padding:16px; }
      .podium-avatar{ width:40px; height:40px; font-size:16px; }
      .podium-bottles{ font-size:18px; }
      .leaderboard-item{ padding:12px; gap:12px; }
      .leaderboard-avatar{ width:40px; height:40px; font-size:16px; }
      .leaderboard-bottles{ font-size:16px; }
      
      /* Mini Game Mobile */
      .game-container{ padding:20px; }
      .game-info{ flex-direction:column; gap:12px; }
      .game-stats{ justify-content:center; gap:16px; }
      .game-area{ height:300px; }
      .game-instructions{ padding:16px; }
      .game-instructions h3{ font-size:18px; }
      .game-instructions p{ font-size:12px; }
      .basket{ font-size:36px; }
      .falling-item{ font-size:20px; }
      .game-over{ padding:20px; }
      
      /* Footer Mobile */
       footer{ padding:20px 0 32px; }
       .foot p:first-child{ font-size:14px; }
       .foot p:last-child{ font-size:12px; line-height:1.5; padding:0 16px; }
     }
     
     /* Extra Small Mobile (320px-480px) */
     @media (max-width: 480px){
       .foot p:last-child{ font-size:11px; padding:0 12px; }
       .foot p:last-child br{ display:none; }
     }
     
     /* Very Small Mobile (max-width: 360px) */
     @media (max-width: 360px){
       footer{ padding:16px 0 24px; }
       .foot p:first-child{ font-size:13px; }
       .foot p:last-child{ font-size:10px; padding:0 8px; word-spacing:-1px; }
     }

     /* Enhanced Typography for Mobile Readability */
     @media (max-width: 768px) {
       /* Hero section typography */
       h1 {
         font-size: clamp(32px, 8vw, 48px);
         line-height: 1.1;
         margin: 20px 0 16px;
         letter-spacing: -0.01em;
       }
       
       .eyebrow {
         font-size: 14px;
         margin-bottom: 12px;
       }
       
       .lead {
         font-size: 16px;
         line-height: 1.5;
         margin-bottom: 24px;
       }
       
       /* Section headings */
       .section h2 {
         font-size: clamp(24px, 6vw, 36px);
         margin: 0 0 24px;
         line-height: 1.2;
       }
       
       /* Card typography */
       .card h3 {
         font-size: 20px;
         margin: 12px 0 12px;
         line-height: 1.3;
       }
       
       .card p {
         font-size: 14px;
         line-height: 1.5;
       }
       
       /* Button typography */
       .btn {
         font-size: 14px;
         padding: 12px 20px;
         min-height: 44px;
       }
       
       /* Navigation typography */
       .brand {
         font-size: 20px;
       }
       
       .nav-links a {
         font-size: 14px;
         line-height: 1.4;
       }
     }
     
     @media (max-width: 480px) {
       /* Smaller mobile typography */
       h1 {
         font-size: clamp(28px, 7vw, 40px);
         margin: 16px 0 12px;
       }
       
       .section h2 {
         font-size: clamp(20px, 5vw, 28px);
         margin: 0 0 20px;
       }
       
       .card h3 {
         font-size: 18px;
         margin: 10px 0 10px;
       }
       
       .card p {
         font-size: 13px;
         line-height: 1.4;
       }
       
       .btn {
         font-size: 13px;
         padding: 10px 16px;
       }
       
       .brand {
         font-size: 18px;
       }
       
       .nav-links a {
         font-size: 13px;
       }
       
       /* Improve readability for small text */
       .stat span {
         font-size: 12px;
         line-height: 1.3;
       }
       
       .step-card p {
         font-size: 13px;
         line-height: 1.4;
       }
     }
     
     @media (max-width: 360px) {
       /* Very small mobile typography */
       h1 {
         font-size: clamp(24px, 6vw, 32px);
       }
       
       .section h2 {
         font-size: clamp(18px, 4vw, 24px);
       }
       
       .card h3 {
         font-size: 16px;
       }
       
       .card p {
         font-size: 12px;
       }
       
       .btn {
         font-size: 12px;
         padding: 8px 14px;
       }
     }
     
     /* Enhanced Modal Mobile Responsive */
     @media (max-width: 768px) {
       .modal-overlay {
         padding: 16px;
         align-items: flex-start;
         padding-top: 40px;
       }
       
       .modal {
         width: 95vw;
         max-width: none;
         padding: 24px;
         margin: 0;
         max-height: 85vh;
         overflow-y: auto;
         border-radius: 16px;
         transform: translate(-50%, 0) scale(0.9);
         top: 20px;
         left: 50%;
         position: fixed;
       }
       
       .modal-overlay.active .modal {
         transform: translate(-50%, 0) scale(1);
       }
       
       .modal-header {
         padding-bottom: 16px;
         margin-bottom: 20px;
         border-bottom: 1px solid rgba(167, 139, 250, 0.1);
         position: sticky;
         top: 0;
         background: var(--card);
         z-index: 10;
       }
       
       .modal-title {
         font-size: 20px;
       }
       
       .close-btn {
         width: 40px;
         height: 40px;
         font-size: 18px;
         min-height: 44px;
         min-width: 44px;
         touch-action: manipulation;
         -webkit-tap-highlight-color: transparent;
       }
       
       /* Tip Modal Mobile */
       .tip-modal-content {
         width: 95vw;
         max-width: none;
         padding: 20px;
         margin: 16px;
         max-height: 80vh;
         overflow-y: auto;
         border-radius: 12px;
       }
       
       .tip-modal-close {
         width: 40px;
         height: 40px;
         font-size: 24px;
         min-height: 44px;
         min-width: 44px;
         touch-action: manipulation;
         -webkit-tap-highlight-color: transparent;
       }
       
       .tip-modal-title {
         font-size: 18px;
       }
       
       .tip-modal-icon {
         font-size: 32px;
       }
       
       /* Machine Modal Mobile */
       .machine-modal-content {
         width: 95vw;
         max-width: none;
         padding: 20px;
         margin: 16px;
         max-height: 80vh;
         overflow-y: auto;
         border-radius: 12px;
       }
       
       .machine-modal-close {
         width: 40px;
         height: 40px;
         font-size: 20px;
         min-height: 44px;
         min-width: 44px;
         touch-action: manipulation;
         -webkit-tap-highlight-color: transparent;
       }
       
       /* Eco Modal Mobile */
       .eco-modal-content {
         width: 95vw;
         max-width: none;
         padding: 20px;
         margin: 16px;
         max-height: 80vh;
         overflow-y: auto;
         border-radius: 12px;
       }
       
       /* Image Modal Mobile */
       .image-modal .modal-content {
         max-width: 95vw;
         max-height: 80vh;
       }
       
       .image-modal .modal-close {
         top: 16px;
         right: 16px;
         font-size: 32px;
         width: 44px;
         height: 44px;
         min-height: 44px;
         min-width: 44px;
         touch-action: manipulation;
         -webkit-tap-highlight-color: transparent;
         background: rgba(0, 0, 0, 0.7);
         border-radius: 50%;
         display: flex;
         align-items: center;
         justify-content: center;
       }
       
       .modal-caption {
         font-size: 14px;
         width: 90%;
         bottom: 16px;
         padding: 8px 16px;
       }
     }
     
     @media (max-width: 480px) {
       .modal {
         width: 98vw;
         padding: 20px;
         border-radius: 12px;
         max-height: 90vh;
       }
       
       .modal-title {
         font-size: 18px;
       }
       
       .tip-modal-content,
       .machine-modal-content,
       .eco-modal-content {
         width: 98vw;
         padding: 16px;
         margin: 8px;
         border-radius: 8px;
       }
       
       .tip-modal-title {
         font-size: 16px;
       }
       
       .tip-modal-icon {
         font-size: 28px;
       }
       
       .image-modal .modal-close {
         top: 12px;
         right: 12px;
         font-size: 28px;
         width: 40px;
         height: 40px;
       }
       
       .modal-caption {
         font-size: 12px;
         bottom: 12px;
         padding: 6px 12px;
       }
     }
     
     @media (max-width: 360px) {
       .modal {
         width: 100vw;
         padding: 16px;
         border-radius: 8px;
         top: 0;
         left: 0;
         transform: none;
         height: 100vh;
         max-height: 100vh;
       }
       
       .modal-overlay.active .modal {
         transform: none;
       }
       
       .modal-title {
         font-size: 16px;
       }
       
       .tip-modal-content,
       .machine-modal-content,
       .eco-modal-content {
         width: 100vw;
         height: 100vh;
         padding: 12px;
         margin: 0;
         border-radius: 0;
       }
     }

     /* Monthly Statistics Styles */
     .monthly-stats-container {
       margin-top: 32px;
     }

     .monthly-stats-grid {
       display: grid;
       grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
       gap: 24px;
       margin-bottom: 40px;
     }

     .monthly-stat-card {
       background: var(--card);
       border-radius: var(--radius);
       padding: 32px;
       box-shadow: var(--shadow-soft);
       border: 1px solid rgba(167, 139, 250, 0.1);
       transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
       position: relative;
       overflow: hidden;
       display: flex;
       flex-direction: column;
       align-items: center;
       text-align: center;
     }

     .monthly-stat-card::before {
       content: '';
       position: absolute;
       top: 0;
       left: -100%;
       width: 100%;
       height: 100%;
       background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
       transition: left 0.6s;
     }

     .monthly-stat-card:hover::before {
       left: 100%;
     }

     .monthly-stat-card:hover {
       transform: translateY(-8px) scale(1.02);
       box-shadow: var(--shadow-colorful);
       border-color: rgba(167, 139, 250, 0.3);
     }

     .monthly-stat-icon {
       font-size: 48px;
       margin-bottom: 16px;
       filter: drop-shadow(0 4px 8px rgba(0,0,0,0.1));
     }

     .monthly-stat-content h3 {
       font-size: 18px;
       font-weight: 600;
       margin-bottom: 12px;
       background: linear-gradient(135deg, var(--brand), var(--brand-2));
       -webkit-background-clip: text;
       -webkit-text-fill-color: transparent;
       background-clip: text;
     }

     .monthly-stat-number {
       font-size: 36px;
       font-weight: 800;
       color: var(--text);
       margin-bottom: 8px;
       background: linear-gradient(135deg, var(--accent), var(--accent-2));
       -webkit-background-clip: text;
       -webkit-text-fill-color: transparent;
       background-clip: text;
       transition: all 0.3s ease;
     }

     .monthly-stat-label {
       font-size: 14px;
       color: var(--muted);
       margin-bottom: 16px;
     }

     /* Recycling Information Styles */
     .recycling-grid {
       display: grid;
       grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
       gap: 24px;
       margin-top: 32px;
     }

     .recycling-grid .card {
       background: var(--card);
       border-radius: var(--radius);
       padding: 32px;
       box-shadow: var(--shadow-soft);
       border: 1px solid rgba(167, 139, 250, 0.1);
       transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
       position: relative;
       overflow: hidden;
     }

     .recycling-grid .card:hover {
       transform: translateY(-8px) scale(1.02);
       box-shadow: var(--shadow-colorful);
       border-color: rgba(167, 139, 250, 0.3);
     }

     .impact-stats {
       display: grid;
       grid-template-columns: 1fr 1fr;
       gap: 16px;
       margin-top: 20px;
     }

     .stat-item {
       text-align: center;
       padding: 16px;
       background: rgba(167, 139, 250, 0.05);
       border-radius: var(--radius-sm);
       border: 1px solid rgba(167, 139, 250, 0.1);
     }

     .stat-number {
       display: block;
       font-size: 28px;
       font-weight: 800;
       margin-bottom: 4px;
     }

     .stat-label {
       font-size: 12px;
       color: var(--muted);
       font-weight: 500;
     }

     .recycling-process {
       display: flex;
       align-items: center;
       justify-content: center;
       gap: 12px;
       margin-top: 20px;
       flex-wrap: wrap;
     }

     .process-step {
       display: flex;
       flex-direction: column;
       align-items: center;
       gap: 8px;
       padding: 16px;
       background: rgba(167, 139, 250, 0.05);
       border-radius: var(--radius-sm);
       border: 1px solid rgba(167, 139, 250, 0.1);
       transition: all 0.3s ease;
     }

     .process-step:hover {
       transform: translateY(-2px);
       background: rgba(167, 139, 250, 0.1);
     }

     .process-icon {
       font-size: 24px;
       filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
     }

     .process-step span {
       font-size: 12px;
       font-weight: 600;
       color: var(--text);
     }

     .process-arrow {
       font-size: 18px;
       color: var(--brand);
       font-weight: bold;
     }

     .tips-list {
       display: grid;
       gap: 12px;
       margin-top: 20px;
     }

     .tip-item {
       display: flex;
       align-items: center;
       gap: 12px;
       padding: 12px 16px;
       background: rgba(167, 139, 250, 0.05);
       border-radius: var(--radius-sm);
       border: 1px solid rgba(167, 139, 250, 0.1);
       transition: all 0.3s ease;
     }

     .tip-item:hover {
       transform: translateX(4px);
       background: rgba(167, 139, 250, 0.1);
     }

     .tip-icon {
       font-size: 20px;
       filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
     }

     .tip-item span:last-child {
       font-size: 14px;
       font-weight: 500;
       color: var(--text);
     }

     .clickable-tip {
       cursor: pointer;
       position: relative;
       overflow: hidden;
     }

     .clickable-tip::before {
       content: '';
       position: absolute;
       top: 0;
       left: -100%;
       width: 100%;
       height: 100%;
       background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
       transition: left 0.5s;
     }

     .clickable-tip:hover::before {
       left: 100%;
     }

     .clickable-tip:hover {
       transform: translateX(4px) scale(1.02);
       background: rgba(167, 139, 250, 0.15);
       border-color: rgba(167, 139, 250, 0.3);
       box-shadow: 0 4px 12px rgba(167, 139, 250, 0.2);
     }

     .clickable-tip:active {
       transform: translateX(2px) scale(0.98);
     }

     .global-stats {
       display: grid;
       grid-template-columns: 1fr 1fr;
       gap: 16px;
       margin-top: 20px;
     }

     .global-stat {
       text-align: center;
       padding: 20px;
       background: rgba(167, 139, 250, 0.05);
       border-radius: var(--radius-sm);
       border: 1px solid rgba(167, 139, 250, 0.1);
     }

     .global-number {
       display: block;
       font-size: 32px;
       font-weight: 800;
       margin-bottom: 8px;
     }

     .global-label {
       font-size: 12px;
       color: var(--muted);
       font-weight: 500;
       line-height: 1.4;
     }

     .action-buttons {
       display: flex;
       gap: 12px;
       margin-top: 20px;
       flex-wrap: wrap;
     }

     .action-buttons .btn {
       flex: 1;
       min-width: 140px;
       display: flex;
       align-items: center;
       justify-content: center;
       gap: 8px;
       font-weight: 600;
     }

     .fun-facts {
       display: grid;
       gap: 16px;
       margin-top: 20px;
     }

     .fact-item {
       display: flex;
       align-items: flex-start;
       gap: 12px;
       padding: 16px;
       background: rgba(167, 139, 250, 0.05);
       border-radius: var(--radius-sm);
       border: 1px solid rgba(167, 139, 250, 0.1);
       transition: all 0.3s ease;
     }

     .fact-item:hover {
       transform: translateY(-2px);
       background: rgba(167, 139, 250, 0.1);
     }

     .fact-icon {
       font-size: 20px;
       filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
       margin-top: 2px;
     }

     .fact-item p {
       margin: 0;
       font-size: 14px;
       font-weight: 500;
       color: var(--text);
       line-height: 1.5;
     }

     /* Responsive for Recycling Section */
     @media (max-width: 900px) {
       .recycling-grid {
         grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
         gap: 20px;
       }
       
       .recycling-grid .card {
         padding: 24px;
       }
       
       .impact-stats,
       .global-stats {
         grid-template-columns: 1fr;
         gap: 12px;
       }
       
       .recycling-process {
         gap: 8px;
       }
       
       .process-step {
         padding: 12px;
       }
       
       .action-buttons {
         flex-direction: column;
       }
       
       .action-buttons .btn {
         min-width: auto;
       }
     }

     @media (max-width: 560px) {
       .recycling-grid {
         grid-template-columns: 1fr;
         gap: 16px;
       }
       
       .recycling-grid .card {
         padding: 20px;
       }
       
       .recycling-process {
         flex-direction: column;
         gap: 12px;
       }
       
       .process-arrow {
         transform: rotate(90deg);
       }
       
       .stat-number,
       .global-number {
         font-size: 24px;
       }
       
       .fun-facts {
         gap: 12px;
       }
       
       .fact-item {
         padding: 12px;
       }
     }
       
     

     .monthly-stat-progress {
       width: 100%;
       margin-top: 16px;
     }

     .progress-bar {
       width: 100%;
       height: 8px;
       background: rgba(167, 139, 250, 0.1);
       border-radius: 4px;
       overflow: hidden;
       margin-bottom: 8px;
     }

     .progress-fill {
       height: 100%;
       background: linear-gradient(90deg, var(--brand), var(--brand-2));
       border-radius: 4px;
     }

     /* Modal Styles for Tips */
     .tip-modal {
       display: none;
       position: fixed;
       z-index: 1000;
       left: 0;
       top: 0;
       width: 100%;
       height: 100%;
       background-color: rgba(0, 0, 0, 0.5);
       backdrop-filter: blur(5px);
     }

     .tip-modal-content {
       background-color: var(--card);
       margin: 5% auto;
       padding: 32px;
       border-radius: var(--radius);
       width: 90%;
       max-width: 600px;
       box-shadow: var(--shadow);
       position: relative;
       animation: modalSlideIn 0.3s ease-out;
     }

     @keyframes modalSlideIn {
       from {
         transform: translateY(-50px);
         opacity: 0;
       }
       to {
         transform: translateY(0);
         opacity: 1;
       }
     }

     .tip-modal-close {
       position: absolute;
       top: 16px;
       right: 20px;
       font-size: 28px;
       font-weight: bold;
       cursor: pointer;
       color: var(--muted);
       transition: color 0.3s ease;
     }

     .tip-modal-close:hover {
       color: var(--text);
     }

     .tip-modal-header {
       display: flex;
       align-items: center;
       gap: 16px;
       margin-bottom: 24px;
       padding-bottom: 16px;
       border-bottom: 2px solid rgba(167, 139, 250, 0.1);
     }

     .tip-modal-icon {
       font-size: 48px;
       filter: drop-shadow(0 4px 8px rgba(0,0,0,0.1));
     }

     .tip-modal-title {
       font-size: 24px;
       font-weight: 700;
       color: var(--text);
       margin: 0;
     }

     .tip-modal-examples {
       margin-top: 20px;
     }

     .tip-example {
       background: rgba(167, 139, 250, 0.05);
       border-radius: var(--radius-sm);
       padding: 16px;
       margin-bottom: 16px;
       border-left: 4px solid var(--brand);
     }

     .tip-example h4 {
       margin: 0 0 8px 0;
       color: var(--brand);
       font-size: 16px;
       font-weight: 600;
     }

     .tip-example p {
       margin: 0;
       color: var(--text);
       line-height: 1.6;
     }

     .tip-benefits {
       background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(6, 182, 212, 0.1));
       border-radius: var(--radius-sm);
       padding: 20px;
       margin-top: 20px;
     }

     .tip-benefits h4 {
       margin: 0 0 12px 0;
       color: var(--accent-2);
       font-size: 16px;
       font-weight: 600;
       display: flex;
       align-items: center;
       gap: 8px;
     }

     .tip-benefits ul {
       margin: 0;
       padding-left: 20px;
       color: var(--text);
     }

     .tip-benefits li {
       margin-bottom: 8px;
       line-height: 1.5;
     }

     /* Enhanced clickable tip items */
     .recycling-grid .tip-item {
       cursor: pointer;
       user-select: none;
       position: relative;
       overflow: hidden;
     }

     .recycling-grid .tip-item::before {
       content: '';
       position: absolute;
       top: 0;
       left: -100%;
       width: 100%;
       height: 100%;
       background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
       transition: left 0.6s ease;
     }

     .recycling-grid .tip-item:hover::before {
       left: 100%;
     }

     .recycling-grid .tip-item:hover {
       transform: translateX(4px) scale(1.02);
       background: rgba(167, 139, 250, 0.15);
       box-shadow: 0 4px 12px rgba(167, 139, 250, 0.2);
     }

     .recycling-grid .tip-item:active {
       transform: translateX(2px) scale(0.98);
     }

     .recycling-grid .tip-item::after {
       content: '👆';
       position: absolute;
       right: 12px;
       top: 50%;
       transform: translateY(-50%);
       font-size: 16px;
       opacity: 0.6;
       transition: all 0.3s ease;
     }

     .recycling-grid .tip-item:hover::after {
       opacity: 1;
       transform: translateY(-50%) scale(1.2);
     }

     @media (max-width: 560px) {
       .tip-modal-content {
         margin: 10% auto;
         padding: 24px;
         width: 95%;
       }
       
       .tip-modal-title {
         font-size: 20px;
       }
       
       .tip-modal-icon {
         font-size: 36px;
       }
     }
       

     .progress-fill::after {
       content: '';
       position: absolute;
       top: 0;
       left: -100%;
       width: 100%;
       height: 100%;
       background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
       animation: shimmer 2s infinite;
     }

     .progress-text {
       font-size: 12px;
       color: var(--muted);
       font-weight: 600;
     }

     /* Machine Location Map Styles */
     .map-container {
       margin-top: 32px;
       display: grid;
       grid-template-columns: 1fr 300px;
       gap: 32px;
       align-items: start;
     }

     .school-map {
       background: var(--card);
       border-radius: var(--radius);
       padding: 40px;
       box-shadow: var(--shadow-soft);
       border: 1px solid rgba(167, 139, 250, 0.1);
       position: relative;
       min-height: 500px;
       display: grid;
       grid-template-columns: repeat(3, 1fr);
       grid-template-rows: repeat(2, 1fr);
       gap: 20px;
       transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
     }

     .school-map:hover {
       transform: translateY(-4px);
       box-shadow: var(--shadow-colorful);
     }

     .building {
       position: relative;
       background: linear-gradient(135deg, rgba(167, 139, 250, 0.1), rgba(139, 92, 246, 0.05));
       border: 2px solid rgba(167, 139, 250, 0.2);
       border-radius: 12px;
       padding: 20px;
       display: flex;
       flex-direction: column;
       align-items: center;
       justify-content: center;
       transition: all 0.3s ease;
       cursor: pointer;
     }

     .building:hover {
       background: linear-gradient(135deg, rgba(167, 139, 250, 0.2), rgba(139, 92, 246, 0.1));
       border-color: rgba(167, 139, 250, 0.4);
       transform: scale(1.05);
     }

     .building-label {
       font-size: 12px;
       font-weight: 600;
       color: var(--muted);
       margin-bottom: 12px;
       text-align: center;
     }

     .machine-point {
       position: relative;
       display: flex;
       flex-direction: column;
       align-items: center;
       gap: 8px;
       transition: all 0.3s ease;
     }

     .machine-point:hover {
       transform: scale(1.1);
     }

     .machine-icon {
       font-size: 32px;
       filter: drop-shadow(0 4px 8px rgba(0,0,0,0.1));
       animation: pulse 2s infinite;
     }

     .machine-point.active .machine-icon {
       animation: bounce 1s infinite;
     }

     .machine-point.maintenance .machine-icon {
       animation: spin 2s linear infinite;
     }

     .machine-point.offline .machine-icon {
       animation: shake 0.5s infinite;
       opacity: 0.7;
     }

     .machine-info {
       text-align: center;
     }

     .machine-name {
       font-size: 11px;
       font-weight: 600;
       color: var(--text);
       margin-bottom: 4px;
     }

     .machine-status {
       font-size: 10px;
       font-weight: 500;
       padding: 2px 8px;
       border-radius: 10px;
       text-transform: uppercase;
       letter-spacing: 0.5px;
     }

     .machine-status.online {
       background: rgba(34, 197, 94, 0.2);
       color: #22c55e;
     }

     .machine-status.maintenance {
       background: rgba(251, 191, 36, 0.2);
       color: #fbbf24;
     }

     .machine-status.offline {
       background: rgba(239, 68, 68, 0.2);
       color: #ef4444;
     }

     .map-legend {
       background: var(--card);
       border-radius: var(--radius);
       padding: 24px;
       box-shadow: var(--shadow-soft);
       border: 1px solid rgba(167, 139, 250, 0.1);
       height: fit-content;
       position: sticky;
       top: 20px;
     }

     .map-legend h3 {
       font-size: 16px;
       font-weight: 600;
       margin-bottom: 16px;
       color: var(--text);
     }

     .legend-item {
       display: flex;
       align-items: center;
       gap: 12px;
       margin-bottom: 12px;
       font-size: 14px;
       color: var(--muted);
     }

     .legend-icon {
       font-size: 20px;
       width: 24px;
       text-align: center;
     }

     .machine-summary {
       display: grid;
       grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
       gap: 20px;
       margin-top: 32px;
     }

     .summary-card {
       background: var(--card);
       border-radius: var(--radius);
       padding: 24px;
       box-shadow: var(--shadow-soft);
       border: 1px solid rgba(167, 139, 250, 0.1);
       display: flex;
       align-items: center;
       gap: 16px;
       transition: all 0.3s ease;
     }

     .summary-card:hover {
       transform: translateY(-4px);
       box-shadow: var(--shadow-colorful);
     }

     .summary-icon {
       font-size: 32px;
       filter: drop-shadow(0 4px 8px rgba(0,0,0,0.1));
     }

     .summary-content {
       flex: 1;
     }

     .summary-number {
       font-size: 24px;
       font-weight: 800;
       color: var(--text);
       margin-bottom: 4px;
       background: linear-gradient(135deg, var(--accent), var(--accent-2));
       -webkit-background-clip: text;
       -webkit-text-fill-color: transparent;
       background-clip: text;
     }

     .summary-label {
       font-size: 12px;
       color: var(--muted);
       font-weight: 500;
     }

     /* Machine Map Animations */
     @keyframes bounce {
       0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
       40% { transform: translateY(-10px); }
       60% { transform: translateY(-5px); }
     }

     @keyframes spin {
       from { transform: rotate(0deg); }
       to { transform: rotate(360deg); }
     }

     @keyframes shake {
       0%, 100% { transform: translateX(0); }
       25% { transform: translateX(-2px); }
       75% { transform: translateX(2px); }
     }

     @keyframes pulse {
       0%, 100% { opacity: 1; }
       50% { opacity: 0.7; }
     }

     /* Machine Map Responsive */
     @media (max-width: 1200px) {
       .map-container {
         grid-template-columns: 1fr;
         gap: 24px;
       }
       
       .map-legend {
         position: static;
       }
     }

     @media (max-width: 768px) {
       .school-map {
         grid-template-columns: repeat(2, 1fr);
         padding: 24px;
         gap: 16px;
       }
       
       .machine-summary {
         grid-template-columns: repeat(2, 1fr);
         gap: 16px;
       }
       
       .summary-card {
         padding: 16px;
         flex-direction: column;
         text-align: center;
         gap: 12px;
       }
     }

     @media (max-width: 480px) {
       .school-map {
         grid-template-columns: 1fr;
         padding: 20px;
       }
       
       .machine-summary {
         grid-template-columns: 1fr;
       }
       
       .building {
         padding: 16px;
       }
       
       .machine-icon {
         font-size: 24px;
       }
     }

     .growth-indicator, .target-status, .volunteer-impact {
       display: flex;
       align-items: center;
       gap: 8px;
       margin-top: 12px;
       padding: 8px 16px;
       background: rgba(167, 139, 250, 0.05);
       border-radius: 20px;
       font-size: 12px;
       font-weight: 600;
     }

     .growth-arrow, .target-icon, .impact-icon {
       font-size: 14px;
     }

     .monthly-chart-container {
       margin-top: 32px;
     }

     .chart-card {
       background: var(--card);
       border-radius: var(--radius);
       padding: 32px;
       box-shadow: var(--shadow-soft);
       border: 1px solid rgba(167, 139, 250, 0.1);
       transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
     }

     .chart-card:hover {
       transform: translateY(-4px);
       box-shadow: var(--shadow-colorful);
     }

     .chart-card h3 {
       text-align: center;
       margin-bottom: 24px;
       font-size: 20px;
       font-weight: 600;
     }

     .daily-chart {
       width: 100%;
     }

     .chart-bars {
       display: flex;
       justify-content: space-between;
       align-items: end;
       height: 200px;
       gap: 12px;
       padding: 0 16px;
     }

     .chart-bar {
       flex: 1;
       display: flex;
       flex-direction: column;
       align-items: center;
       position: relative;
       height: 100%;
       justify-content: end;
     }

     .bar-fill {
       width: 100%;
       max-width: 40px;
       background: linear-gradient(180deg, var(--accent-2), var(--accent));
       border-radius: 8px 8px 0 0;
       transition: height 1s ease;
       position: relative;
       min-height: 4px;
     }

     .bar-fill::after {
       content: '';
       position: absolute;
       top: 0;
       left: 0;
       width: 100%;
       height: 100%;
       background: linear-gradient(180deg, rgba(255,255,255,0.3), transparent);
       border-radius: 8px 8px 0 0;
     }

     .bar-label {
       font-size: 12px;
       font-weight: 600;
       color: var(--muted);
       margin-top: 8px;
     }

     .bar-value {
       position: absolute;
       top: -24px;
       font-size: 10px;
       font-weight: 600;
       color: var(--text);
       background: var(--card);
       padding: 2px 6px;
       border-radius: 4px;
       box-shadow: 0 2px 4px rgba(0,0,0,0.1);
       opacity: 0;
       transition: opacity 0.3s ease;
     }

     .chart-bar:hover .bar-value {
       opacity: 1;
     }

     /* Monthly Statistics Responsive */
     @media (max-width: 900px) {
       .monthly-stats-grid {
         grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
         gap: 20px;
       }
       
       .monthly-stat-card {
         padding: 24px;
       }
       
       .monthly-stat-icon {
         font-size: 40px;
       }
       
       .monthly-stat-number {
         font-size: 28px;
       }
       
       .chart-card {
         padding: 24px;
       }
       
       .chart-bars {
         height: 150px;
         gap: 8px;
       }
     }

     @media (max-width: 560px) {
       .monthly-stats-grid {
         grid-template-columns: 1fr;
         gap: 16px;
       }
       
       .monthly-stat-card {
         padding: 20px;
       }
       
       .monthly-stat-icon {
         font-size: 36px;
       }
       
       .monthly-stat-number {
         font-size: 24px;
       }
       
       .chart-card {
         padding: 20px;
       }
       
       .chart-card h3 {
         font-size: 18px;
       }
       
       .chart-bars {
         height: 120px;
         gap: 6px;
         padding: 0 8px;
       }
       
       .bar-fill {
         max-width: 30px;
       }
     }
     
     /* Recycling Information Section Styles */
     .info-section {
       padding: 80px 0;
       background: linear-gradient(135deg, 
         rgba(16, 185, 129, 0.05) 0%, 
         rgba(255, 255, 255, 0.9) 50%, 
         rgba(6, 182, 212, 0.05) 100%);
       position: relative;
       overflow: hidden;
     }
     
     .info-section::before {
       content: '';
       position: absolute;
       top: 0;
       left: 0;
       right: 0;
       bottom: 0;
       background: radial-gradient(circle at 15% 25%, rgba(16, 185, 129, 0.08) 0%, transparent 50%),
                   radial-gradient(circle at 85% 75%, rgba(6, 182, 212, 0.08) 0%, transparent 50%);
       pointer-events: none;
     }
     
     .info-container {
       position: relative;
       z-index: 1;
     }
     
     .info-header {
       text-align: center;
       margin-bottom: 60px;
     }
     
     .info-header h2 {
       font-size: 2.5rem;
       margin-bottom: 15px;
       background: linear-gradient(135deg, var(--accent-2), var(--brand-2));
       -webkit-background-clip: text;
       -webkit-text-fill-color: transparent;
       background-clip: text;
     }
     
     .info-subtitle {
       font-size: 1.2rem;
       color: var(--muted);
       margin: 0;
     }
     
     .info-grid {
       display: grid;
       grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
       gap: 30px;
       margin-bottom: 60px;
     }
     
     .info-card {
       background: var(--card);
       border-radius: var(--radius);
       padding: 30px;
       box-shadow: var(--shadow-soft);
       border: 1px solid rgba(16, 185, 129, 0.1);
       transition: all 0.3s ease;
       position: relative;
       overflow: hidden;
     }
     
     .info-card::before {
       content: '';
       position: absolute;
       top: 0;
       left: 0;
       right: 0;
       height: 4px;
       background: linear-gradient(90deg, var(--accent-2), var(--brand-2));
       transform: scaleX(0);
       transition: transform 0.3s ease;
     }
     
     .info-card:hover {
       transform: translateY(-5px);
       box-shadow: var(--shadow-colorful);
     }
     
     .info-card:hover::before {
       transform: scaleX(1);
     }
     
     .info-icon {
       font-size: 3rem;
       margin-bottom: 20px;
       display: block;
     }
     
     .info-card h3 {
       font-size: 1.4rem;
       margin-bottom: 15px;
       color: var(--text);
       font-weight: 600;
     }
     
     .info-card p {
       color: var(--muted);
       line-height: 1.7;
       margin-bottom: 15px;
     }
     
     .info-card ul {
       color: var(--muted);
       line-height: 1.7;
       padding-left: 20px;
     }
     
     .info-card li {
       margin-bottom: 8px;
     }
     
     .info-card strong {
       color: var(--text);
       font-weight: 600;
     }
     
     .references-section {
       background: rgba(255, 255, 255, 0.7);
       border-radius: var(--radius);
       padding: 40px;
       border: 1px solid rgba(16, 185, 129, 0.15);
     }
     
     .references-section h3 {
       font-size: 1.5rem;
       margin-bottom: 25px;
       color: var(--text);
       text-align: center;
     }
     
     .references-list {
       display: grid;
       gap: 15px;
     }
     
     .references-list p {
       margin: 0;
       padding: 15px;
       background: var(--card);
       border-radius: var(--radius-sm);
       border-left: 4px solid var(--accent-2);
       color: var(--muted);
       line-height: 1.6;
     }
     
     .references-list a {
       color: var(--brand-2);
       text-decoration: none;
       font-weight: 500;
       transition: color 0.3s ease;
     }
     
     .references-list a:hover {
       color: var(--accent-2);
       text-decoration: underline;
     }
     
     /* Responsive Design for Info Section */
     @media (max-width: 768px) {
       .info-section {
         padding: 60px 0;
       }
       
       .info-header h2 {
         font-size: 2rem;
       }
       
       .info-subtitle {
         font-size: 1rem;
       }
       
       .info-grid {
         grid-template-columns: 1fr;
         gap: 20px;
         margin-bottom: 40px;
       }
       
       .info-card {
         padding: 20px;
       }
       
       .info-icon {
         font-size: 2.5rem;
         margin-bottom: 15px;
       }
       
       .info-card h3 {
         font-size: 1.2rem;
       }
       
       .references-section {
         padding: 25px;
       }
       
       .references-section h3 {
         font-size: 1.3rem;
       }
     }

     /* Advertisement Section Styles */
     .advertisement-section {
       padding: 40px 0; /* reduced vertical padding to make section smaller */
       background: linear-gradient(135deg, 
         var(--bg-secondary) 0%, 
         rgba(255, 255, 255, 0.8) 50%, 
         var(--bg-secondary) 100%);
       position: relative;
       overflow: hidden;
     }
     
     .advertisement-section::before {
       content: '';
       position: absolute;
       top: 0;
       left: 0;
       right: 0;
       bottom: 0;
       background: radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.1) 0%, transparent 50%),
                   radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.1) 0%, transparent 50%);
       pointer-events: none;
     }
     
     .ad-container {
       position: relative;
       z-index: 1;
     }
     
     .ad-header {
       text-align: center;
       margin-bottom: 15px;
     }
     
     .ad-header h2 {
       font-size: 1rem;
       margin-bottom: 4px;
       background: linear-gradient(45deg, var(--accent), var(--accent-2), var(--accent-3));
       -webkit-background-clip: text;
       -webkit-text-fill-color: transparent;
       background-clip: text;
     }
     
     .ad-subtitle {
       font-size: 0.7rem;
       color: var(--muted);
       margin: 0;
     }
     
     .ad-banner-slot {
       margin-bottom: 15px;
     }
     
     .ad-placeholder {
       background: rgba(255, 255, 255, 0.95);
       border: 1px dashed var(--accent);
       border-radius: 6px;
       padding: 8px; /* slightly smaller padding */
       text-align: center;
       transition: all 0.2s ease;
       backdrop-filter: blur(8px);
       box-shadow: 0 1px 6px rgba(0, 0, 0, 0.08);
     }
     
     .ad-placeholder:hover {
       transform: translateY(-5px);
       box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
       border-color: var(--accent-2);
     }
     
     .ad-icon {
       font-size: 1.2rem;
       margin-bottom: 5px;
       display: block;
       animation: bounce 2s infinite;
     }
     
     .ad-placeholder h3, .ad-placeholder h4 {
       color: var(--text);
       margin: 2px 0;
       font-weight: 600;
       font-size: 0.85rem; /* slightly smaller headings */
     }
     
     .ad-placeholder p {
       color: var(--muted);
       margin: 2px 0 6px 0;
       font-size: 0.65rem; /* smaller body text */
     }
     
     .ad-grid {
       display: grid;
       grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); /* tighter columns */
       gap: 8px;
       margin-bottom: 12px;
     }
     
     .ad-square-slot .ad-placeholder {
       min-height: 90px; /* reduced height for compact layout */
       display: flex;
       flex-direction: column;
       justify-content: center;
     }
     
     .ad-demo-content {
       margin-top: 12px;
     }
     
     .demo-banner {
       background: linear-gradient(135deg, var(--accent-2), var(--accent-3));
       color: white;
       padding: 6px; /* slightly smaller */
       border-radius: 6px;
       display: flex;
       align-items: center;
       justify-content: space-between;
       gap: 6px;
       box-shadow: 0 1px 6px rgba(0, 0, 0, 0.1);
     }
     
     .demo-logo {
       font-size: 0.7rem;
       background: rgba(255, 255, 255, 0.18);
       padding: 3px;
       border-radius: 4px;
       backdrop-filter: blur(8px);
     }
     
     .demo-text {
       flex: 1;
       text-align: left;
     }
     
     .demo-text strong {
       display: block;
       font-size: 0.65rem;
       margin-bottom: 1px;
     }
     
     .demo-text small {
       opacity: 0.9;
       font-size: 0.6rem;
     }
     
     .demo-btn {
       background: rgba(255, 255, 255, 0.2);
       border: 1px solid rgba(255, 255, 255, 0.3);
       color: white;
       padding: 4px 8px;
       border-radius: 12px;
       cursor: pointer;
       transition: all 0.3s ease;
       backdrop-filter: blur(10px);
       font-size: 0.6rem;
     }
     
     .demo-btn:hover {
       background: rgba(255, 255, 255, 0.3);
       transform: scale(1.05);
     }
     
     .demo-square {
       background: linear-gradient(135deg, var(--accent), var(--accent-2));
       color: white;
       padding: 8px 6px;
       border-radius: 6px;
       text-align: center;
       box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
     }
     
     .demo-product {
       font-size: 1rem;
       margin-bottom: 4px;
       display: block;
       background: rgba(255, 255, 255, 0.2);
       width: 24px;
       height: 24px;
       border-radius: 50%;
       display: flex;
       align-items: center;
       justify-content: center;
       margin: 0 auto 4px auto;
       backdrop-filter: blur(10px);
     }
     
     .demo-square strong {
       display: block;
       font-size: 0.7rem;
       margin-bottom: 2px;
     }
     
     .demo-square small {
       opacity: 0.9;
       font-size: 0.6rem;
     }
     
     .ad-text-section {
       margin-bottom: 15px;
     }
     
     .demo-text-ad {
       background: linear-gradient(135deg, 
         rgba(255, 255, 255, 0.9) 0%, 
         rgba(248, 250, 252, 0.9) 100%);
       padding: 8px;
       border-radius: 6px;
       border-left: 2px solid var(--accent);
       box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
       backdrop-filter: blur(10px);
     }
     
     .demo-sponsor {
       background: var(--accent);
       color: white;
       padding: 2px 6px;
       border-radius: 8px;
       font-size: 0.6rem;
       font-weight: 600;
       text-transform: uppercase;
       letter-spacing: 0.3px;
     }
     
     .demo-text-ad strong {
       display: block;
       color: var(--text);
       font-size: 0.8rem;
       margin: 6px 0 4px 0;
     }
     
     .demo-text-ad p {
       color: var(--muted);
       line-height: 1.4;
       margin-bottom: 6px;
       font-size: 0.7rem;
     }
     
     .demo-link {
       color: var(--accent);
       text-decoration: none;
       font-weight: 600;
       transition: all 0.3s ease;
       font-size: 0.7rem;
     }
     
     .demo-link:hover {
       color: var(--accent-2);
       text-decoration: underline;
     }
     
     .ad-info {
       text-align: center;
     }
     
     .ad-info-card {
       background: linear-gradient(135deg, 
         rgba(255, 255, 255, 0.95) 0%, 
         rgba(248, 250, 252, 0.95) 100%);
       padding: 12px;
       border-radius: 8px;
       border: 1px solid rgba(255, 255, 255, 0.2);
       box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
       backdrop-filter: blur(20px);
       max-width: 300px;
       margin: 0 auto;
     }
     
     .ad-info-card h5 {
       color: var(--text);
       font-size: 0.8rem;
       margin-bottom: 6px;
       font-weight: 600;
     }
     
     .ad-info-card p {
       color: var(--muted);
       line-height: 1.4;
       margin-bottom: 8px;
       font-size: 0.7rem;
     }
     
     .contact-ad-btn {
       background: linear-gradient(135deg, var(--accent), var(--accent-2));
       color: white;
       border: none;
       padding: 12px 30px;
       border-radius: 25px;
       font-weight: 600;
       cursor: pointer;
       transition: all 0.3s ease;
       box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
     }
     
     .contact-ad-btn:hover {
       transform: translateY(-2px);
       box-shadow: 0 8px 25px rgba(0, 0, 0, 0.25);
       background: linear-gradient(135deg, var(--accent-2), var(--accent-3));
     }
     
     @keyframes bounce {
       0%, 20%, 50%, 80%, 100% {
         transform: translateY(0);
       }
       40% {
         transform: translateY(-10px);
       }
       60% {
         transform: translateY(-5px);
       }
     }
     
     /* Simple Ways to Help the World Styles */
     .simple-ways-header {
       text-align: center;
       margin-bottom: 60px;
     }
     
     .header-badge {
       display: inline-flex;
       align-items: center;
       gap: 8px;
       background: linear-gradient(135deg, var(--accent), var(--accent-2));
       color: white;
       padding: 12px 24px;
       border-radius: 50px;
       font-weight: 600;
       margin-bottom: 24px;
       box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
       animation: float 3s ease-in-out infinite;
     }
     
     .badge-icon {
       font-size: 1.2rem;
       animation: sparkle 2s ease-in-out infinite;
     }
     
     .section-subtitle {
       font-size: 1.2rem;
       color: var(--muted);
       max-width: 600px;
       margin: 0 auto;
       line-height: 1.6;
     }
     
     .simple-ways-grid {
       display: grid;
       grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
       gap: 24px;
       margin-top: 40px;
     }
     
     .simple-way-item {
       background: linear-gradient(135deg, 
         rgba(255, 255, 255, 0.9) 0%, 
         rgba(248, 250, 252, 0.9) 100%);
       border-radius: var(--radius);
       padding: 32px 24px;
       text-align: center;
       border: 1px solid rgba(255, 255, 255, 0.3);
       box-shadow: var(--shadow-soft);
       backdrop-filter: blur(10px);
       transition: all 0.3s ease;
       position: relative;
       overflow: hidden;
     }
     
     .simple-way-item::before {
       content: '';
       position: absolute;
       top: 0;
       left: -100%;
       width: 100%;
       height: 100%;
       background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
       transition: left 0.5s;
     }
     
     .simple-way-item:hover {
       transform: translateY(-8px) scale(1.02);
       box-shadow: var(--shadow-colorful);
       border-color: rgba(167, 139, 250, 0.3);
     }
     
     .simple-way-item:hover::before {
       left: 100%;
     }
     
     .way-icon {
       font-size: 3rem;
       margin-bottom: 16px;
       display: block;
       filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.1));
     }
     
     .way-content {
       position: relative;
     }
     
     .way-content h3 {
       font-size: 1.1rem;
       font-weight: 600;
       color: var(--text);
       margin: 0;
       line-height: 1.4;
     }
     
     .way-sparkle {
       position: absolute;
       top: -8px;
       right: -8px;
       font-size: 1.2rem;
       opacity: 0;
       transform: scale(0) rotate(0deg);
       transition: all 0.3s ease;
     }
     
     .simple-way-item:hover .way-sparkle {
       opacity: 1;
       transform: scale(1) rotate(180deg);
       animation: sparkle 1.5s ease-in-out infinite;
     }
     
     @keyframes sparkle {
       0%, 100% {
         transform: scale(1) rotate(0deg);
         opacity: 1;
       }
       50% {
         transform: scale(1.2) rotate(180deg);
         opacity: 0.7;
       }
     }
     
     @keyframes float {
       0%, 100% {
         transform: translateY(0px);
       }
       50% {
         transform: translateY(-10px);
       }
     }

     /* Responsive Design for Advertisement */
     @media (max-width: 768px) {
       .advertisement-section {
         padding: 60px 0;
       }
       
       .ad-header h2 {
         font-size: 2rem;
       }
       
       .ad-grid {
         grid-template-columns: 1fr;
         gap: 20px;
       }
       
       .ad-placeholder {
         padding: 20px;
       }
       
       .demo-banner {
         flex-direction: column;
         text-align: center;
         gap: 10px;
       }
       
       .demo-text {
         text-align: center;
       }
       
       .ad-square-slot .ad-placeholder {
         min-height: 250px;
       }
       
       .ad-info-card {
         padding: 20px;
       }
       
       /* Simple Ways Responsive */
       .simple-ways-grid {
         grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
         gap: 20px;
       }
       
       .simple-way-item {
         padding: 24px 20px;
       }
       
       .way-icon {
         font-size: 2.5rem;
       }
       
       .way-content h3 {
         font-size: 1rem;
       }
     }
     
     @media (max-width: 480px) {
       .ad-header h2 {
         font-size: 1.8rem;
       }
       
       .ad-icon {
         font-size: 2.5rem;
       }
       
       .demo-product {
         width: 60px;
         height: 60px;
         font-size: 2rem;
       }
       
       .ad-square-slot .ad-placeholder {
         min-height: 200px;
       }
       
       /* Simple Ways Mobile */
       .simple-ways-grid {
         grid-template-columns: 1fr;
         gap: 16px;
       }
       
       .header-badge {
         padding: 10px 20px;
         font-size: 0.9rem;
       }
       
       .section-subtitle {
         font-size: 1rem;
       }
       
       .way-icon {
         font-size: 2.2rem;
       }
       
       .way-content h3 {
         font-size: 0.95rem;
       }
     }
     
     /* Search System Styles */
     .search-overlay {
       position: fixed;
       top: 0;
       left: 0;
       width: 100%;
       height: 100%;
       background: rgba(0, 0, 0, 0.8);
       backdrop-filter: blur(10px);
       z-index: 10000;
       display: none;
       align-items: center;
       justify-content: center;
       animation: fadeIn 0.3s ease;
     }
     
     .search-overlay.active {
       display: flex;
     }
     
     .search-container {
       background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 100%);
       border-radius: var(--radius);
       padding: 32px;
       width: 90%;
       max-width: 600px;
       max-height: 80vh;
       overflow: hidden;
       box-shadow: var(--shadow);
       border: 1px solid rgba(255, 255, 255, 0.3);
       animation: slideUp 0.3s ease;
     }
     
     .search-header {
       display: flex;
       justify-content: space-between;
       align-items: center;
       margin-bottom: 24px;
       padding-bottom: 16px;
       border-bottom: 2px solid rgba(236, 72, 153, 0.1);
     }
     
     .search-header h3 {
       margin: 0;
       color: var(--text);
       font-size: 1.5rem;
       font-weight: 600;
     }
     
     .search-close {
       background: none;
       border: none;
       font-size: 2rem;
       color: var(--muted);
       cursor: pointer;
       padding: 8px;
       border-radius: 50%;
       transition: all 0.3s ease;
       line-height: 1;
     }
     
     .search-close:hover {
       background: rgba(236, 72, 153, 0.1);
       color: var(--brand);
       transform: rotate(90deg);
     }
     
     .search-input-container {
       position: relative;
       margin-bottom: 24px;
     }
     
     .search-input-container input {
       width: 100%;
       padding: 16px 50px 16px 20px;
       border: 2px solid rgba(236, 72, 153, 0.2);
       border-radius: var(--radius-sm);
       font-size: 1rem;
       background: rgba(255, 255, 255, 0.8);
       color: var(--text);
       transition: all 0.3s ease;
     }
     
     .search-input-container input:focus {
       outline: none;
       border-color: var(--brand);
       box-shadow: 0 0 0 3px rgba(236, 72, 153, 0.1);
       background: rgba(255, 255, 255, 0.95);
     }
     
     .search-icon {
       position: absolute;
       right: 16px;
       top: 50%;
       transform: translateY(-50%);
       font-size: 1.2rem;
       color: var(--muted);
       pointer-events: none;
     }
     
     .search-results {
       max-height: 400px;
       overflow-y: auto;
       border-radius: var(--radius-sm);
     }
     
     .search-placeholder {
       text-align: center;
       padding: 40px 20px;
       color: var(--muted);
     }
     
     .search-placeholder-icon {
       font-size: 3rem;
       margin-bottom: 16px;
       opacity: 0.5;
     }
     
     .search-result-item {
       padding: 16px;
       border-radius: var(--radius-sm);
       margin-bottom: 8px;
       background: rgba(255, 255, 255, 0.6);
       border: 1px solid rgba(236, 72, 153, 0.1);
       cursor: pointer;
       transition: all 0.3s ease;
       display: flex;
       align-items: center;
       gap: 12px;
     }
     
     .search-result-item:hover {
       background: rgba(236, 72, 153, 0.1);
       border-color: var(--brand);
       transform: translateY(-2px);
       box-shadow: 0 4px 12px rgba(236, 72, 153, 0.2);
     }
     
     .search-result-icon {
       font-size: 1.5rem;
       flex-shrink: 0;
     }
     
     .search-result-content {
       flex: 1;
     }
     
     .search-result-title {
       font-weight: 600;
       color: var(--text);
       margin: 0 0 4px 0;
       font-size: 1rem;
     }
     
     .search-result-section {
       font-size: 0.85rem;
       color: var(--muted);
       margin: 0;
     }
     
     .search-btn {
       position: fixed;
       bottom: 30px;
       right: 30px;
       width: 60px;
       height: 60px;
       background: linear-gradient(135deg, var(--brand), var(--brand-2));
       border: none;
       border-radius: 50%;
       color: white;
       font-size: 1.5rem;
       cursor: pointer;
       box-shadow: var(--shadow-soft);
       transition: all 0.3s ease;
       z-index: 1000;
       display: flex;
       align-items: center;
       justify-content: center;
     }
     
     .search-btn:hover {
       transform: translateY(-4px) scale(1.1);
       box-shadow: var(--shadow-colorful);
     }
     
     .search-btn-icon {
       animation: pulse 2s infinite;
     }
     
     @keyframes fadeIn {
       from { opacity: 0; }
       to { opacity: 1; }
     }
     
     @keyframes slideUp {
       from {
         opacity: 0;
         transform: translateY(50px) scale(0.9);
       }
       to {
         opacity: 1;
         transform: translateY(0) scale(1);
       }
     }
     
     @keyframes pulse {
       0%, 100% {
         transform: scale(1);
       }
       50% {
         transform: scale(1.1);
       }
     }
     
     /* Search Responsive */
     @media (max-width: 768px) {
       .search-container {
         width: 95%;
         padding: 24px;
         max-height: 85vh;
       }
       
       .search-header h3 {
         font-size: 1.3rem;
       }
       
       .search-btn {
         width: 50px;
         height: 50px;
         bottom: 20px;
         right: 20px;
         font-size: 1.3rem;
       }
     }
     
     @media (max-width: 480px) {
       .search-container {
         padding: 20px;
       }
       
       .search-input-container input {
         padding: 14px 45px 14px 16px;
         font-size: 0.9rem;
       }
       
       .search-result-item {
         padding: 12px;
       }
       
       .search-result-title {
         font-size: 0.9rem;
       }
     }

     /* Enhanced Touch-Friendly Interactions for Mobile */
     @media (max-width: 768px) {
       /* Base button improvements */
       .btn {
         min-height: 48px;
         min-width: 120px;
         padding: 16px 24px;
         font-size: 16px;
         touch-action: manipulation;
         -webkit-tap-highlight-color: transparent;
         user-select: none;
         -webkit-user-select: none;
         -moz-user-select: none;
         -ms-user-select: none;
       }

       .btn:active {
         transform: translateY(-2px) scale(0.98);
         transition: all 0.1s ease;
       }

       /* CTA buttons */
       .cta-btn-main,
       .cta-btn-secondary,
       .cta-btn-ghost {
         min-height: 52px;
         padding: 18px 28px;
         font-size: 18px;
         touch-action: manipulation;
         -webkit-tap-highlight-color: transparent;
       }

       /* Tab buttons */
       .tab-btn {
         min-height: 48px;
         padding: 16px 20px;
         font-size: 16px;
         touch-action: manipulation;
         -webkit-tap-highlight-color: transparent;
       }

       /* Close buttons */
       .close-btn,
       .modal-close,
       .search-close {
         min-width: 48px;
         min-height: 48px;
         font-size: 24px;
         touch-action: manipulation;
         -webkit-tap-highlight-color: transparent;
       }

       /* Search button */
       .search-btn {
         min-width: 48px;
         min-height: 48px;
         padding: 12px;
         touch-action: manipulation;
         -webkit-tap-highlight-color: transparent;
       }

       /* Quick Navigation Menu */
       .quick-nav-toggle {
         min-width: 48px;
         min-height: 48px;
         padding: 12px;
         touch-action: manipulation;
         -webkit-tap-highlight-color: transparent;
       }

       .quick-nav-item {
         min-height: 48px;
         padding: 16px 20px;
         touch-action: manipulation;
         -webkit-tap-highlight-color: transparent;
       }

       /* Demo and contact buttons */
       .demo-btn,
       .contact-ad-btn {
         min-height: 48px;
         padding: 16px 24px;
         font-size: 16px;
         touch-action: manipulation;
         -webkit-tap-highlight-color: transparent;
       }

       /* Game control buttons */
       #start-game,
       #pause-game,
       #restart-game {
         min-height: 52px;
         padding: 18px 32px;
         font-size: 18px;
         touch-action: manipulation;
         -webkit-tap-highlight-color: transparent;
       }

       /* Clickable elements */
       .clickable-tip,
       .stat,
       .card {
         touch-action: manipulation;
         -webkit-tap-highlight-color: transparent;
         cursor: pointer;
       }

       .clickable-tip:active,
       .stat:active,
       .card:active {
         transform: scale(0.98);
         transition: all 0.1s ease;
       }

       /* Modal improvements */
       .modal {
         touch-action: manipulation;
         -webkit-tap-highlight-color: transparent;
       }

       /* Back to top button */
       .back-to-top-btn-inline {
         min-width: 56px;
         min-height: 56px;
         touch-action: manipulation;
         -webkit-tap-highlight-color: transparent;
       }

       /* Form elements */
       input,
       textarea,
       select {
         min-height: 48px;
         padding: 16px;
         font-size: 16px;
         touch-action: manipulation;
       }

       /* Improve spacing between touch targets */
       .action-buttons .btn {
         margin: 8px 4px;
       }

       .cta-buttons .btn {
         margin: 8px 4px;
       }

       /* Prevent text selection on interactive elements */
       .btn,
       .tab-btn,
       .clickable-tip,
       .stat,
       .card,
       .close-btn,
       .search-btn {
         user-select: none;
         -webkit-user-select: none;
         -moz-user-select: none;
         -ms-user-select: none;
       }

       /* Improve touch scrolling */
       .modal-content,
       .search-results {
         -webkit-overflow-scrolling: touch;
         overflow-y: auto;
       }
     }

     @media (max-width: 480px) {
       /* Smaller screens - larger touch targets */
       .btn {
         min-height: 52px;
         padding: 18px 28px;
         font-size: 18px;
       }

       .close-btn,
       .modal-close,
       .search-close {
         min-width: 52px;
         min-height: 52px;
         font-size: 28px;
       }

       .search-btn {
         min-width: 52px;
         min-height: 52px;
         padding: 14px;
       }

       /* Increase spacing for better touch experience */
       .action-buttons .btn,
       .cta-buttons .btn {
         margin: 12px 6px;
       }
     }

     /* Quick Navigation Menu Styles */
     .quick-nav-menu {
       position: fixed;
       top: 90px;
       right: 20px;
       z-index: 999;
     }

     .quick-nav-toggle {
       background: linear-gradient(135deg, #10b981, #059669);
       color: white;
       border: none;
       border-radius: 50%;
       width: 60px;
       height: 60px;
       font-size: 1.5rem;
       cursor: pointer;
       box-shadow: var(--shadow-lg);
       transition: all 0.3s ease;
       display: flex;
       align-items: center;
       justify-content: center;
     }

     .quick-nav-toggle:hover {
       transform: translateY(-2px) scale(1.05);
       box-shadow: var(--shadow-xl);
       background: linear-gradient(135deg, #059669, #10b981);
     }

     .quick-nav-toggle:active {
       transform: translateY(0) scale(0.95);
     }

     .quick-nav-icon {
       transition: transform 0.3s ease;
     }

     .quick-nav-toggle:hover .quick-nav-icon {
       transform: rotate(15deg) scale(1.1);
     }

     .quick-nav-items {
       position: absolute;
       top: 70px;
       right: 0;
       background: rgba(255, 255, 255, 0.95);
       backdrop-filter: blur(20px);
       border-radius: var(--radius-lg);
       box-shadow: var(--shadow-xl);
       padding: 16px;
       min-width: 280px;
       max-height: 500px;
       overflow-y: auto;
       transform: translateY(-20px) scale(0.9);
       opacity: 0;
       visibility: hidden;
       transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
       border: 1px solid rgba(16, 185, 129, 0.2);
     }

     .quick-nav-items.active {
       transform: translateY(0) scale(1);
       opacity: 1;
       visibility: visible;
     }

     .quick-nav-item {
       display: flex;
       align-items: center;
       gap: 12px;
       padding: 12px 16px;
       border-radius: var(--radius-sm);
       text-decoration: none;
       color: var(--text);
       transition: all 0.3s ease;
       margin-bottom: 4px;
       border: 1px solid transparent;
     }

     .quick-nav-item:hover {
       background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(5, 150, 105, 0.1));
       border-color: rgba(16, 185, 129, 0.3);
       transform: translateX(4px);
       box-shadow: 0 4px 12px rgba(16, 185, 129, 0.15);
     }

     .quick-nav-item.special {
       background: linear-gradient(135deg, var(--brand), var(--brand-dark));
       color: white;
       font-weight: 600;
       margin-top: 8px;
       border-top: 1px solid rgba(16, 185, 129, 0.2);
       padding-top: 16px;
     }

     .quick-nav-item.special:hover {
       background: linear-gradient(135deg, var(--brand-dark), var(--brand));
       transform: translateX(4px) scale(1.02);
     }

     .nav-icon {
       font-size: 1.2rem;
       width: 24px;
       text-align: center;
       transition: transform 0.3s ease;
     }

     .quick-nav-item:hover .nav-icon {
       transform: scale(1.2) rotate(5deg);
     }

     .nav-text {
       font-size: 0.95rem;
       font-weight: 500;
       flex: 1;
     }

     /* Quick Nav Responsive */
     @media (max-width: 768px) {
       .quick-nav-menu {
         top: 80px;
         right: 15px;
       }

       .quick-nav-toggle {
         width: 50px;
         height: 50px;
         font-size: 1.3rem;
       }

       .quick-nav-items {
         min-width: 260px;
         right: -10px;
       }

       .nav-text {
         font-size: 0.9rem;
       }
     }

     @media (max-width: 480px) {
       .quick-nav-items {
         min-width: 240px;
         right: -20px;
       }
     }
   </style>
  </head>
  <body>
    <!-- Search System -->
    <div id="searchOverlay" class="search-overlay">
      <div class="search-container">
        <div class="search-header">
          <h3>🔍 ค้นหาหัวข้อ</h3>
          <button class="search-close" onclick="closeSearch()">&times;</button>
        </div>
        <div class="search-input-container">
          <input type="text" id="searchInput" placeholder="พิมพ์เพื่อค้นหาหัวข้อ..." oninput="performSearch()">
          <div class="search-icon">🔍</div>
        </div>
        <div class="search-results" id="searchResults">
          <div class="search-placeholder">
            <div class="search-placeholder-icon">📝</div>
            <p>พิมพ์คำค้นหาเพื่อดูผลลัพธ์</p>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Search Button -->
    <button class="search-btn" onclick="openSearch()" title="ค้นหาหัวข้อ">
      <span class="search-btn-icon">🔍</span>
    </button>
    
    <!-- Quick Navigation Menu -->
    <div class="quick-nav-menu" id="quickNavMenu">
      <button class="quick-nav-toggle" onclick="toggleQuickNav()" title="เมนูนำทางด่วน">
        <span class="quick-nav-icon">📋</span>
      </button>
      <div class="quick-nav-items" id="quickNavItems">
        <a href="#features" class="quick-nav-item" onclick="closeQuickNav()">
          <span class="nav-icon">⭐</span>
          <span class="nav-text">จุดเด่นหลัก</span>
        </a>
        <a href="#how-to-use" class="quick-nav-item" onclick="closeQuickNav()">
          <span class="nav-icon">📖</span>
          <span class="nav-text">วิธีใช้งาน</span>
        </a>
        <a href="#simple-ways" class="quick-nav-item" onclick="closeQuickNav()">
          <span class="nav-icon">🌱</span>
          <span class="nav-text">วิธีช่วยโลก</span>
        </a>
        <a href="#recycling-info" class="quick-nav-item" onclick="closeQuickNav()">
          <span class="nav-icon">♻️</span>
          <span class="nav-text">ข้อมูลรีไซเคิล</span>
        </a>
        <a href="#leaderboard" class="quick-nav-item" onclick="closeQuickNav()">
          <span class="nav-icon">🏆</span>
          <span class="nav-text">อันดับผู้เก็บขวด</span>
        </a>
        <a href="#monthly-stats" class="quick-nav-item" onclick="closeQuickNav()">
          <span class="nav-icon">📊</span>
          <span class="nav-text">สถิติรายเดือน</span>
        </a>
        <a href="#machine-map" class="quick-nav-item" onclick="closeQuickNav()">
          <span class="nav-icon">🗺️</span>
          <span class="nav-text">แผนที่เครื่อง</span>
        </a>
        <a href="#mini-game" class="quick-nav-item" onclick="closeQuickNav()">
          <span class="nav-icon">🎮</span>
          <span class="nav-text">มินิเกม</span>
        </a>
        <a href="#start" class="quick-nav-item" onclick="closeQuickNav()">
          <span class="nav-icon">🚀</span>
          <span class="nav-text">เริ่มต้นใช้งาน</span>
        </a>
        <a href="dashboard.html" class="quick-nav-item special" onclick="closeQuickNav()">
          <span class="nav-icon">📱</span>
          <span class="nav-text">Dashboard</span>
        </a>
      </div>
    </div>
  <!-- NAVBAR -->
  <nav class="nav">
    <div class="container nav-inner">
      <a class="brand bounce-on-hover" href="index.html" data-aos="fade-right" data-aos-duration="800">
        <img src="p2p.jpg" alt="P2P Logo" class="logo-img float-gentle" style="border-radius: 10px; box-shadow: 0 6px 12px rgba(0,0,0,0.1); transition: transform 0.3s ease;">
        <span class="rainbow-text">P2P</span>
      </a>
      <div class="nav-links" data-aos="fade-left" data-aos-duration="800" data-aos-delay="200">
        <a href="#features">จุดเด่นหลัก</a>
        <a href="#how-to-use">วิธีใช้งาน</a>
        <a href="#rewards">รางวัล</a>
      </div>
    </div>
  </nav>

  <!-- Theme Switcher -->
  <div class="theme-switcher">
    <ul class="blocks">
      <li class="block" tabindex="0">
        <div class="block__item" data-theme="playful" title="ธีม Playful & Colorful">🎨</div>
      </li>
      <li class="block" tabindex="0">
        <div class="block__item" data-theme="nature" title="ธีม Nature Green">🌿</div>
      </li>
      <li class="block" tabindex="0">
        <div class="block__item" data-theme="sunset" title="ธีม Sunset Orange">🌅</div>
      </li>
      <li class="block" tabindex="0">
        <div class="block__item" data-theme="ocean" title="ธีม Ocean Blue">🌊</div>
      </li>
      <li class="block" tabindex="0">
        <div class="block__item" data-theme="space" title="ธีมอวกาศ">🚀</div>
      </li>
      <li class="block" tabindex="0">
        <a id="backToTopBtn" class="btn-flip back-to-top-btn-inline" onclick="scrollToTop()" data-front="↑" data-back="TOP" title="กลับไปด้านบน"></a>
      </li>
    </ul>
  </div>

  <!-- HERO -->
  <header class="hero">
    <div class="container hero-grid">
      <div>
        <span class="eyebrow magnetic-hover spotlight-effect" data-aos="fade-up" data-aos-duration="800">
          <span class="pulse-dot glow-pulse wave-animation"></span> ระบบ AI ตรวจจับขวด 
        </span>
        <h1 class="gradient-text typewriter-text" data-aos="fade-up" data-aos-duration="1000" data-aos-delay="200">หย่อนขวด รับแต้ม</h1>
        <p class="lead" data-aos="fade-up" data-aos-duration="1000" data-aos-delay="400">
          โครงงาน P2P (Plastic to Point) – ระบบแยกขวดอัจฉริยะ เชื่อมต่อ AI และ Arduino เพื่อแปลงขวดพลาสติกเป็นแต้มสะสม เก็บข้อมูลผ่าน Firebase และส่งเสริมการรีไซเคิลอย่างยั่งยืน
        </p>
        <div class="cta" data-aos="fade-up" data-aos-duration="1000" data-aos-delay="600">
          <a class="btn btn-primary magnetic-hover particle-burst" href="login.html">เข้าสู่ระบบ</a>
          <a class="btn btn-ghost magnetic-hover shimmer-on-hover" href="register.html">ลงทะเบียน</a>
        </div>
        <div class="stats" data-aos="fade-up" data-aos-duration="1000" data-aos-delay="800">
          <div class="stat magnetic-hover spotlight-effect" data-aos="zoom-in" data-aos-duration="600" data-aos-delay="900" onclick="openEcoInfoModal('world')" style="cursor: pointer;">
            <div class="stat-icon floating-icon">🌎</div>
            <strong>ขวดที่แยกวันนี้</strong>
            <span>คือ โลกที่สดใสในวันหน้า</span>
          </div>
          <div class="stat magnetic-hover spotlight-effect" data-aos="zoom-in" data-aos-duration="600" data-aos-delay="1000" onclick="openEcoInfoModal('recycle')" style="cursor: pointer;">
            <div class="stat-icon floating-icon">♻️</div>
            <strong>รักษ์โลกง่ายๆ</strong>
            <span>เริ่มต้นที่การแยกขวด</span>
          </div>
          <div class="stat magnetic-hover spotlight-effect" data-aos="zoom-in" data-aos-duration="600" data-aos-delay="1100" onclick="openEcoInfoModal('participate')" style="cursor: pointer;">
            <div class="stat-icon floating-icon">🌱</div>
            <strong>ร่วมเป็นส่วนหนึ่ง</strong>
            <span>ในการดูแลสิ่งแวดล้อม</span>
          </div>
          <div class="stat magnetic-hover spotlight-effect" data-aos="zoom-in" data-aos-duration="600" data-aos-delay="1200" onclick="openEcoInfoModal('value')" style="cursor: pointer;">
            <div class="stat-icon floating-icon">💧</div>
            <strong>ทุกขวดมีค่า</strong>
            <span>เมื่อเรารู้จักจัดการ</span>
          </div>
        </div>
      </div>
      <div class="hero-card" data-aos="fade-left" data-aos-duration="1000" data-aos-delay="400">
        <div class="hero-media">
          <img src="อิ่มถ่าย.jpg" alt="ขวดโรงเรียน" style="border-radius: 16px; box-shadow: 0 10px 25px rgba(0,0,0,0.15); transition: all 0.5s ease; cursor: pointer;" onclick="openImageModal('อิ่มถ่าย.jpg', 'ขวดโรงเรียน')"/>
          <span class="badge">ขวดโรงเรียน</span>
        </div>
      </div>
    </div>
  </header>



  <!-- FEATURES -->
  <section id="features" class="section">
    <div class="container">
      <h2 class="gradient-text spotlight-effect" data-aos="fade-up" data-aos-duration="800">จุดเด่นหลัก</h2>
      <div class="features">
        <article class="card magnetic-hover particle-burst" data-aos="fade-up" data-aos-duration="800" data-aos-delay="100">
          <span class="chip wave-animation shimmer-on-hover">🏕 Re for green world 🏕</span>
          <h3>ส่งเสริมพฤติกรรมการรีไซเคิล</h3> 
          <p>เพื่อโลกที่สะอาดขึ้น.</p>
        </article>
        <article class="card magnetic-hover particle-burst" data-aos="fade-up" data-aos-duration="800" data-aos-delay="200">
          <span class="chip wave-animation shimmer-on-hover">🏫 Re for school 🏫</span>
          <h3>ลดปัญหาขยะขวดน้ำในพื้นที่โรงเรียน</h3>
          <p>แค่แยกขวดน้ำโรงเรียนก็น่าอยู่ขึ้น</p>
        </article>
        <article class="card magnetic-hover particle-burst" data-aos="fade-up" data-aos-duration="800" data-aos-delay="300">
          <span class="chip wave-animation shimmer-on-hover">☘️ easy to Re ☘️</span>
          <h3>ใช้งานง่าย ผ่านแอปพลิเคชัน</h3>
          <p>แค่สแกน QR Code ก็สามารถเช็คจำนวนขวดได้เลย</p>
        </article>
      </div>
    </div>
  </section>

  <!-- HOW TO USE -->
  <section id="how-to-use" class="section">
    <div class="container">
      <h2 class="gradient-text typewriter-text" data-aos="fade-up" data-aos-duration="800">วิธีการใช้งานเครื่อง</h2>
      <div class="how-to-use-grid">
        <div class="step-card magnetic-hover spotlight-effect" data-aos="fade-up" data-aos-duration="800" data-aos-delay="100">
          <div class="step-number wave-animation">1</div>
          <div class="step-icon floating-icon">🔐</div>
          <h3>เข้าสู่ระบบที่ตัวเครื่อง</h3>
          <p>ล็อกอินเข้าสู่ระบบผ่านหน้าจอของเครื่องเพื่อเริ่มใช้งาน</p>
        </div>
        <div class="step-card magnetic-hover spotlight-effect" data-aos="fade-up" data-aos-duration="800" data-aos-delay="200">
          <div class="step-number wave-animation">2</div>
          <div class="step-icon floating-icon">🍼</div>
          <h3>ใส่ขวดไปในช่องสำหรับใส่</h3>
          <p>นำขวดพลาสติกที่ต้องการรีไซเคิลใส่ลงในช่องที่กำหนดไว้</p>
        </div>
        <div class="step-card magnetic-hover spotlight-effect" data-aos="fade-up" data-aos-duration="800" data-aos-delay="300">
          <div class="step-number wave-animation">3</div>
          <div class="step-icon floating-icon">📱</div>
          <h3>ระบบนับขวดและแสดงผล</h3>
          <p>ระบบ AI จะทำการตรวจจับและนับขวด แล้วแสดงผลในแอปพลิเคชัน</p>
        </div>
      </div>
      
      <div class="scoring-info magnetic-hover spotlight-effect" data-aos="fade-up" data-aos-duration="800" data-aos-delay="400">
        <div class="scoring-card">
          <div class="scoring-icon floating-icon">⏰</div>
          <h3 class="gradient-text">หลักเกณฑ์การให้คะแนน</h3>
          <div class="scoring-details">
            <div class="scoring-item wave-animation">
              <span class="bottles shimmer-on-hover">30 ขวด</span>
              <span class="equals">=</span>
              <span class="hours shimmer-on-hover">1 ชั่วโมงจิตอาสา</span>
            </div>
            <p>แอปพลิเคชันจะแสดงจำนวนขวดที่สะสมและค่าเฉลี่ยขวดที่แปลงเป็นชั่วโมงจิตอาสา</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- SIMPLE WAYS TO HELP THE WORLD -->
  <section id="simple-ways" class="section">
    <div class="container">
      <div class="simple-ways-header" data-aos="fade-up" data-aos-duration="800">
        <div class="header-badge">
          <span class="badge-icon">✨</span>
          <span class="badge-text">เคล็ดลับการช่วยโลก</span>
        </div>
        <h2 class="gradient-text">วิธีง่ายๆ ในการช่วยโลก</h2>
        <p class="section-subtitle">เริ่มต้นการอนุรักษ์สิ่งแวดล้อมด้วยการปฏิบัติง่ายๆ ในชีวิตประจำวัน</p>
      </div>
      
      <div class="simple-ways-grid">
        <div class="simple-way-item magnetic-hover" data-aos="fade-up" data-aos-duration="800" data-aos-delay="100">
          <div class="way-icon floating-icon">🚰</div>
          <div class="way-content">
            <h3>ใช้ขวดน้ำที่นำกลับมาใช้ได้</h3>
            <div class="way-sparkle">✨</div>
          </div>
        </div>
        
        <div class="simple-way-item magnetic-hover" data-aos="fade-up" data-aos-duration="800" data-aos-delay="200">
          <div class="way-icon floating-icon">📦</div>
          <div class="way-content">
            <h3>แยกขยะให้ถูกประเภท</h3>
            <div class="way-sparkle">✨</div>
          </div>
        </div>
        
        <div class="simple-way-item magnetic-hover" data-aos="fade-up" data-aos-duration="800" data-aos-delay="300">
          <div class="way-icon floating-icon">🌱</div>
          <div class="way-content">
            <h3>ลดการใช้พลาสติกใช้ครั้งเดียว</h3>
            <div class="way-sparkle">✨</div>
          </div>
        </div>
        
        <div class="simple-way-item magnetic-hover" data-aos="fade-up" data-aos-duration="800" data-aos-delay="400">
          <div class="way-icon floating-icon">♻️</div>
          <div class="way-content">
            <h3>สนับสนุนผลิตภัณฑ์รีไซเคิล</h3>
            <div class="way-sparkle">✨</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- TESTIMONIAL / QUOTE -->
  <section class="section">
    <div class="container quote">
      <div class="quote-card magnetic-hover particle-burst" data-aos="fade-right" data-aos-duration="1000">
        <blockquote class="typewriter-text gradient-text">"ขวดไม่ขยะ ถ้าเราแยกอย่างฉลาด."</blockquote>
        <div class="author">
          <div class="avatar floating-icon" aria-hidden="true"></div>
          <span class="shimmer-on-hover">ทีม อ้ายมา 6 คน • นักพัฒนา P2P</span>
        </div>
      </div>
      <img class="quote-visual" alt="ภาพประกอบ" 
           src="S__9551875.jpg" 
           style="width:100%; border-radius:16px; box-shadow: var(--shadow-soft); opacity:.95"
           data-aos="fade-left" data-aos-duration="1000" data-aos-delay="200"/>
    </div>
  <!-- RECYCLING INFORMATION -->
  <section id="recycling-info" class="section">
    <div class="container">
      <h2 class="gradient-text spotlight-effect" data-aos="fade-up" data-aos-duration="800">♻️ ข้อมูลการรีไซเคิลและการอนุรักษ์สิ่งแวดล้อม</h2>
      
      <div class="recycling-grid">
        <!-- Environmental Impact Card -->
        <article class="card magnetic-hover particle-burst" data-aos="fade-up" data-aos-duration="800" data-aos-delay="100">
          <span class="chip wave-animation shimmer-on-hover">🌍 ผลกระทบต่อสิ่งแวดล้อม 🌍</span>
          <h3>ขวดพลาสติก 1 ใบ ใช้เวลาย่อยสลายถึง 450 ปี</h3>
          <p>การรีไซเคิลขวดพลาสติกช่วยลดการปล่อยก๊าซเรือนกระจกและประหยัดพลังงานได้ถึง 70%</p>
          <div class="impact-stats">
            <div class="stat-item">
              <span class="stat-number gradient-text">450</span>
              <span class="stat-label">ปี ในการย่อยสลาย</span>
            </div>
            <div class="stat-item">
              <span class="stat-number gradient-text">70%</span>
              <span class="stat-label">ประหยัดพลังงาน</span>
            </div>
          </div>
        </article>

        <!-- Recycling Process Card -->
        <article class="card magnetic-hover particle-burst" data-aos="fade-up" data-aos-duration="800" data-aos-delay="200">
          <span class="chip wave-animation shimmer-on-hover">🔄 กระบวนการรีไซเคิล 🔄</span>
          <h3>จากขวดเก่าสู่ผลิตภัณฑ์ใหม่</h3>
          <p>ขวดพลาสติกที่รีไซเคิลสามารถนำมาผลิตเป็นเสื้อผ้า เฟอร์นิเจอร์ และขวดใหม่ได้</p>
          <div class="recycling-process">
            <div class="process-step">
              <div class="process-icon">🍼</div>
              <span>เก็บขวด</span>
            </div>
            <div class="process-arrow">→</div>
            <div class="process-step">
              <div class="process-icon">🏭</div>
              <span>แปรรูป</span>
            </div>
            <div class="process-arrow">→</div>
            <div class="process-step">
              <div class="process-icon">👕</div>
              <span>ผลิตภัณฑ์ใหม่</span>
            </div>
          </div>
        </article>

        <!-- Conservation Tips Card -->
        <article class="card magnetic-hover particle-burst" data-aos="fade-up" data-aos-duration="800" data-aos-delay="300">
          <span class="chip wave-animation shimmer-on-hover">💡 เคล็ดลับการอนุรักษ์ 💡</span>
          <h3>วิธีง่ายๆ ในการช่วยโลก</h3>
          <p>เริ่มต้นการอนุรักษ์สิ่งแวดล้อมด้วยการปฏิบัติง่ายๆ ในชีวิตประจำวัน</p>
          <div class="tips-list">
            <div class="tip-item clickable-tip" data-tip="reusable-bottles" onclick="openTipModal('reusable-bottles')">
              <span class="tip-icon">🚰</span>
              <span>ใช้ขวดน้ำที่นำกลับมาใช้ได้</span>
            </div>
            <div class="tip-item clickable-tip" data-tip="waste-separation" onclick="openTipModal('waste-separation')">
              <span class="tip-icon">🗂️</span>
              <span>แยกขยะให้ถูกประเภท</span>
            </div>
            <div class="tip-item clickable-tip" data-tip="reduce-plastic" onclick="openTipModal('reduce-plastic')">
              <span class="tip-icon">🌱</span>
              <span>ลดการใช้พลาสติกใช้ครั้งเดียว</span>
            </div>
            <div class="tip-item clickable-tip" data-tip="support-recycled" onclick="openTipModal('support-recycled')">
              <span class="tip-icon">♻️</span>
              <span>สนับสนุนผลิตภัณฑ์รีไซเคิล</span>
            </div>
          </div>
        </article>

        <!-- Global Impact Card -->
        <article class="card magnetic-hover particle-burst" data-aos="fade-up" data-aos-duration="800" data-aos-delay="400">
          <span class="chip wave-animation shimmer-on-hover">🌏 ผลกระทบระดับโลก 🌏</span>
          <h3>สถิติขยะพลาสติกทั่วโลก</h3>
          <p>ทุกปีมีขยะพลาสติกเข้าสู่มหาสมุทรมากกว่า 8 ล้านตัน การรีไซเคิลคือทางออกที่สำคัญ</p>
          <div class="global-stats">
            <div class="global-stat">
              <span class="global-number gradient-text">8M</span>
              <span class="global-label">ตันต่อปี เข้าสู่มหาสมุทร</span>
            </div>
            <div class="global-stat">
              <span class="global-number gradient-text">91%</span>
              <span class="global-label">ของพลาสติกไม่ได้รีไซเคิล</span>
            </div>
          </div>
        </article>

        <!-- Action Call Card -->
        <article class="card magnetic-hover particle-burst" data-aos="fade-up" data-aos-duration="800" data-aos-delay="500">
          <span class="chip wave-animation shimmer-on-hover">🎯 ร่วมเป็นส่วนหนึ่ง 🎯</span>
          <h3>เริ่มต้นการเปลี่ยนแปลงวันนี้</h3>
          <p>ทุกขวดที่คุณรีไซเคิลคือก้าวเล็กๆ ที่นำไปสู่การเปลี่ยนแปลงใหญ่เพื่อโลกใบนี้</p>
          <div class="action-buttons">
            <a class="btn btn-primary shimmer-on-hover" href="login.html">
              <span>🚀</span> เริ่มรีไซเคิลเลย
            </a>
            <button class="btn btn-ghost shimmer-on-hover" onclick="scrollToSection('machine-map')">
              <span>📍</span> หาเครื่องใกล้ฉัน
            </button>
          </div>
        </article>

        <!-- Fun Facts Card -->
        <article class="card magnetic-hover particle-burst" data-aos="fade-up" data-aos-duration="800" data-aos-delay="600">
          <span class="chip wave-animation shimmer-on-hover">🤓 ข้อเท็จจริงน่ารู้ 🤓</span>
          <h3>รู้หรือไม่?</h3>
          <div class="fun-facts">
            <div class="fact-item">
              <span class="fact-icon">🍼</span>
              <p>ขวดพลาสติก 1 ใบสามารถรีไซเคิลได้ไม่จำกัดครั้ง</p>
            </div>
            <div class="fact-item">
              <span class="fact-icon">👕</span>
              <p>ขวดพลาสติก 25 ใบ ทำเสื้อยืด 1 ตัวได้</p>
            </div>
            <div class="fact-item">
              <span class="fact-icon">⚡</span>
              <p>การรีไซเคิลใช้พลังงานน้อยกว่าการผลิตใหม่ 95%</p>
            </div>
            <div class="fact-item">
              <span class="fact-icon">🌳</span>
              <p>รีไซเคิล 1 ตันพลาสติก = ช่วยโลกเท่ากับปลูกต้นไม้ 2,000 ต้น</p>
            </div>
          </div>
        </article>
      </div>
    </div>
  </section>

  <!-- LEADERBOARD -->
  <section id="leaderboard" class="section">
    <div class="container">
      <h2 class="gradient-text spotlight-effect" data-aos="fade-up" data-aos-duration="800">🏆 อันดับผู้เก็บขวดยอดเยี่ยม</h2>
      <div class="leaderboard-container" data-aos="fade-up" data-aos-duration="1000" data-aos-delay="200">
        <div class="leaderboard-loading" id="leaderboard-loading">
          <div class="skeleton-container">
            <div class="skeleton-podium">
              <div class="skeleton skeleton-podium-item">
                <div class="skeleton skeleton-avatar"></div>
                <div class="skeleton skeleton-text short" style="margin: 16px auto 8px;"></div>
                <div class="skeleton skeleton-text medium" style="margin: 8px auto;"></div>
              </div>
              <div class="skeleton skeleton-podium-item">
                <div class="skeleton skeleton-avatar"></div>
                <div class="skeleton skeleton-text short" style="margin: 16px auto 8px;"></div>
                <div class="skeleton skeleton-text medium" style="margin: 8px auto;"></div>
              </div>
              <div class="skeleton skeleton-podium-item">
                <div class="skeleton skeleton-avatar"></div>
                <div class="skeleton skeleton-text short" style="margin: 16px auto 8px;"></div>
                <div class="skeleton skeleton-text medium" style="margin: 8px auto;"></div>
              </div>
            </div>
            <div class="skeleton-list">
              <div class="skeleton skeleton-list-item"></div>
              <div class="skeleton skeleton-list-item"></div>
              <div class="skeleton skeleton-list-item"></div>
              <div class="skeleton skeleton-list-item"></div>
              <div class="skeleton skeleton-list-item"></div>
            </div>
          </div>
        </div>
        <div class="leaderboard-content" id="leaderboard-content" style="display: none;">
          <div class="leaderboard-podium">
            <!-- Top 3 will be inserted here -->
          </div>
          <div class="leaderboard-list">
            <!-- Other rankings will be inserted here -->
          </div>
        </div>
        <div class="leaderboard-error" id="leaderboard-error" style="display: none;">
          <p>⚠️ ไม่สามารถโหลดข้อมูลได้ กรุณาลองใหม่อีกครั้ง</p>
          <button class="btn btn-ghost" onclick="loadLeaderboard()">โหลดใหม่</button>
        </div>
      </div>
    </div>
  </section>

  <!-- MONTHLY STATISTICS -->
  <section id="monthly-stats" class="section">
    <div class="container">
      <h2 class="gradient-text spotlight-effect" data-aos="fade-up" data-aos-duration="800">📊 สถิติการเก็บขวดประจำเดือน</h2>
      <div class="monthly-stats-container" data-aos="fade-up" data-aos-duration="1000" data-aos-delay="200">
        <div class="monthly-stats-grid">
          <div class="monthly-stat-card magnetic-hover particle-burst tooltip-container" data-aos="zoom-in" data-aos-duration="600" data-aos-delay="100">
            <div class="monthly-stat-icon floating-icon">🗓️</div>
            <div class="monthly-stat-content">
              <h3 class="gradient-text">เดือนนี้</h3>
              <div class="monthly-stat-number shimmer-on-hover" id="monthly-bottles">0</div>
              <span class="monthly-stat-label">ขวดที่เก็บได้</span>
              <div class="monthly-stat-progress">
                <div class="progress-bar">
                  <div class="progress-fill wave-animation" id="monthly-progress" style="width: 0%"></div>
                </div>
                <span class="progress-text" id="monthly-progress-text">0% ของเป้าหมาย</span>
              </div>
            </div>
            <div class="tooltip" id="monthly-tooltip">
              <div class="tooltip-header">📊 รายละเอียดเดือนนี้</div>
              <div class="tooltip-content">
                <div class="tooltip-item">
                  <span class="tooltip-label">🎯 เป้าหมาย:</span>
                  <span class="tooltip-value" id="tooltip-target">1000 ขวด</span>
                </div>
                <div class="tooltip-item">
                  <span class="tooltip-label">📈 เฉลี่ยต่อวัน:</span>
                  <span class="tooltip-value" id="tooltip-daily-avg">0 ขวด</span>
                </div>
                <div class="tooltip-item">
                  <span class="tooltip-label">⏰ วันที่เหลือ:</span>
                  <span class="tooltip-value" id="tooltip-days-left">0 วัน</span>
                </div>
                <div class="tooltip-item">
                  <span class="tooltip-label">🌟 คะแนนรวม:</span>
                  <span class="tooltip-value" id="tooltip-points">0 คะแนน</span>
                </div>
              </div>
            </div>
          </div>
          
          <div class="monthly-stat-card magnetic-hover particle-burst tooltip-container" data-aos="zoom-in" data-aos-duration="600" data-aos-delay="200">
            <div class="monthly-stat-icon floating-icon">📈</div>
            <div class="monthly-stat-content">
              <h3 class="gradient-text">การเติบโต</h3>
              <div class="monthly-stat-number shimmer-on-hover" id="growth-percentage">+0%</div>
              <span class="monthly-stat-label">เทียบกับเดือนที่แล้ว</span>
              <div class="growth-indicator" id="growth-indicator">
                <span class="growth-arrow">📊</span>
                <span class="growth-text">คงที่</span>
              </div>
            </div>
            <div class="tooltip" id="growth-tooltip">
              <div class="tooltip-header">📈 รายละเอียดการเติบโต</div>
              <div class="tooltip-content">
                <div class="tooltip-item">
                  <span class="tooltip-label">📅 เดือนที่แล้ว:</span>
                  <span class="tooltip-value" id="tooltip-last-month">0 ขวด</span>
                </div>
                <div class="tooltip-item">
                  <span class="tooltip-label">📊 เดือนนี้:</span>
                  <span class="tooltip-value" id="tooltip-this-month">0 ขวด</span>
                </div>
                <div class="tooltip-item">
                  <span class="tooltip-label">🔢 ผลต่าง:</span>
                  <span class="tooltip-value" id="tooltip-difference">0 ขวด</span>
                </div>
                <div class="tooltip-item">
                  <span class="tooltip-label">🎯 แนวโน้ม:</span>
                  <span class="tooltip-value" id="tooltip-trend">คงที่</span>
                </div>
              </div>
            </div>
          </div>
          
          <div class="monthly-stat-card magnetic-hover particle-burst tooltip-container" data-aos="zoom-in" data-aos-duration="600" data-aos-delay="300">
            <div class="monthly-stat-icon floating-icon">🎯</div>
            <div class="monthly-stat-content">
              <h3 class="gradient-text">เป้าหมาย</h3>
              <div class="monthly-stat-number shimmer-on-hover" id="monthly-target">1000</div>
              <span class="monthly-stat-label">ขวดต่อเดือน</span>
              <div class="target-status" id="target-status">
                <span class="target-icon">⏳</span>
                <span class="target-text">กำลังดำเนินการ</span>
              </div>
            </div>
            <div class="tooltip" id="target-tooltip">
              <div class="tooltip-header">🎯 รายละเอียดเป้าหมาย</div>
              <div class="tooltip-content">
                <div class="tooltip-item">
                  <span class="tooltip-label">🏁 เป้าหมายรวม:</span>
                  <span class="tooltip-value" id="tooltip-total-target">1000 ขวด</span>
                </div>
                <div class="tooltip-item">
                  <span class="tooltip-label">✅ ความสำเร็จ:</span>
                  <span class="tooltip-value" id="tooltip-success-rate">0%</span>
                </div>
                <div class="tooltip-item">
                  <span class="tooltip-label">📊 ต้องเก็บต่อวัน:</span>
                  <span class="tooltip-value" id="tooltip-daily-needed">0 ขวด</span>
                </div>
                <div class="tooltip-item">
                  <span class="tooltip-label">🏆 สถานะ:</span>
                  <span class="tooltip-value" id="tooltip-status">กำลังดำเนินการ</span>
                </div>
              </div>
            </div>
          </div>
          
          <div class="monthly-stat-card magnetic-hover particle-burst tooltip-container" data-aos="zoom-in" data-aos-duration="600" data-aos-delay="400">
            <div class="monthly-stat-icon floating-icon">👥</div>
            <div class="monthly-stat-content">
              <h3 class="gradient-text">ผู้ใช้งาน</h3>
              <div class="monthly-stat-number shimmer-on-hover" id="user-count">0</div>
              <span class="monthly-stat-label">คนที่ใช้งานระบบ</span>
              <div class="user-impact">
                <span class="impact-icon">🌟</span>
                <span class="impact-text" id="user-impact-text">มีผู้ใช้งานทั้งหมด 0 คน</span>
              </div>
            </div>
            <div class="tooltip" id="user-tooltip">
              <div class="tooltip-header">👥 รายละเอียดผู้ใช้งาน</div>
              <div class="tooltip-content">
                <div class="tooltip-item">
                  <span class="tooltip-label">🆕 ผู้ใช้ใหม่เดือนนี้:</span>
                  <span class="tooltip-value" id="tooltip-new-users">0 คน</span>
                </div>
                <div class="tooltip-item">
                  <span class="tooltip-label">🔥 ผู้ใช้ที่ใช้งานบ่อย:</span>
                  <span class="tooltip-value" id="tooltip-active-users">0 คน</span>
                </div>
                <div class="tooltip-item">
                  <span class="tooltip-label">📱 เฉลี่ยต่อวัน:</span>
                  <span class="tooltip-value" id="tooltip-daily-users">0 คน</span>
                </div>
                <div class="tooltip-item">
                  <span class="tooltip-label">💪 ความมีส่วนร่วม:</span>
                  <span class="tooltip-value" id="tooltip-engagement">0%</span>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="monthly-chart-container" data-aos="fade-up" data-aos-duration="1000" data-aos-delay="600">
          <div class="chart-card magnetic-hover">
            <h3 class="gradient-text">📊 กราฟการเก็บขวดรายวัน (7 วันล่าสุด)</h3>
            <div class="daily-chart" id="daily-chart">
              <div class="chart-bars">
                <div class="chart-bar tooltip-container" data-day="จันทร์" data-bottles="0">
                  <div class="bar-fill wave-animation" style="height: 0%"></div>
                  <span class="bar-label">จ.</span>
                  <span class="bar-value">0</span>
                  <div class="chart-tooltip">
                    <div class="tooltip-header">📅 วันจันทร์</div>
                    <div class="tooltip-content">
                      <div class="tooltip-item">
                        <span class="tooltip-label">🗂️ ขวดที่เก็บได้:</span>
                        <span class="tooltip-value">0 ขวด</span>
                      </div>
                      <div class="tooltip-item">
                        <span class="tooltip-label">🏆 คะแนน:</span>
                        <span class="tooltip-value">0 คะแนน</span>
                      </div>
                      <div class="tooltip-item">
                        <span class="tooltip-label">⏰ ชั่วโมงจิตอาสา:</span>
                        <span class="tooltip-value">0.0 ชม.</span>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="chart-bar tooltip-container" data-day="อังคาร" data-bottles="0">
                  <div class="bar-fill wave-animation" style="height: 0%"></div>
                  <span class="bar-label">อ.</span>
                  <span class="bar-value">0</span>
                  <div class="chart-tooltip">
                    <div class="tooltip-header">📅 วันอังคาร</div>
                    <div class="tooltip-content">
                      <div class="tooltip-item">
                        <span class="tooltip-label">🗂️ ขวดที่เก็บได้:</span>
                        <span class="tooltip-value">0 ขวด</span>
                      </div>
                      <div class="tooltip-item">
                        <span class="tooltip-label">🏆 คะแนน:</span>
                        <span class="tooltip-value">0 คะแนน</span>
                      </div>
                      <div class="tooltip-item">
                        <span class="tooltip-label">⏰ ชั่วโมงจิตอาสา:</span>
                        <span class="tooltip-value">0.0 ชม.</span>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="chart-bar tooltip-container" data-day="พุธ" data-bottles="0">
                  <div class="bar-fill wave-animation" style="height: 0%"></div>
                  <span class="bar-label">พ.</span>
                  <span class="bar-value">0</span>
                  <div class="chart-tooltip">
                    <div class="tooltip-header">📅 วันพุธ</div>
                    <div class="tooltip-content">
                      <div class="tooltip-item">
                        <span class="tooltip-label">🗂️ ขวดที่เก็บได้:</span>
                        <span class="tooltip-value">0 ขวด</span>
                      </div>
                      <div class="tooltip-item">
                        <span class="tooltip-label">🏆 คะแนน:</span>
                        <span class="tooltip-value">0 คะแนน</span>
                      </div>
                      <div class="tooltip-item">
                        <span class="tooltip-label">⏰ ชั่วโมงจิตอาสา:</span>
                        <span class="tooltip-value">0.0 ชม.</span>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="chart-bar tooltip-container" data-day="พฤหัสบดี" data-bottles="0">
                  <div class="bar-fill wave-animation" style="height: 0%"></div>
                  <span class="bar-label">พฤ.</span>
                  <span class="bar-value">0</span>
                  <div class="chart-tooltip">
                    <div class="tooltip-header">📅 วันพฤหัสบดี</div>
                    <div class="tooltip-content">
                      <div class="tooltip-item">
                        <span class="tooltip-label">🗂️ ขวดที่เก็บได้:</span>
                        <span class="tooltip-value">0 ขวด</span>
                      </div>
                      <div class="tooltip-item">
                        <span class="tooltip-label">🏆 คะแนน:</span>
                        <span class="tooltip-value">0 คะแนน</span>
                      </div>
                      <div class="tooltip-item">
                        <span class="tooltip-label">⏰ ชั่วโมงจิตอาสา:</span>
                        <span class="tooltip-value">0.0 ชม.</span>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="chart-bar tooltip-container" data-day="ศุกร์" data-bottles="0">
                  <div class="bar-fill wave-animation" style="height: 0%"></div>
                  <span class="bar-label">ศ.</span>
                  <span class="bar-value">0</span>
                  <div class="chart-tooltip">
                    <div class="tooltip-header">📅 วันศุกร์</div>
                    <div class="tooltip-content">
                      <div class="tooltip-item">
                        <span class="tooltip-label">🗂️ ขวดที่เก็บได้:</span>
                        <span class="tooltip-value">0 ขวด</span>
                      </div>
                      <div class="tooltip-item">
                        <span class="tooltip-label">🏆 คะแนน:</span>
                        <span class="tooltip-value">0 คะแนน</span>
                      </div>
                      <div class="tooltip-item">
                        <span class="tooltip-label">⏰ ชั่วโมงจิตอาสา:</span>
                        <span class="tooltip-value">0.0 ชม.</span>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="chart-bar tooltip-container" data-day="เสาร์" data-bottles="0">
                  <div class="bar-fill wave-animation" style="height: 0%"></div>
                  <span class="bar-label">ส.</span>
                  <span class="bar-value">0</span>
                  <div class="chart-tooltip">
                    <div class="tooltip-header">📅 วันเสาร์</div>
                    <div class="tooltip-content">
                      <div class="tooltip-item">
                        <span class="tooltip-label">🗂️ ขวดที่เก็บได้:</span>
                        <span class="tooltip-value">0 ขวด</span>
                      </div>
                      <div class="tooltip-item">
                        <span class="tooltip-label">🏆 คะแนน:</span>
                        <span class="tooltip-value">0 คะแนน</span>
                      </div>
                      <div class="tooltip-item">
                        <span class="tooltip-label">⏰ ชั่วโมงจิตอาสา:</span>
                        <span class="tooltip-value">0.0 ชม.</span>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="chart-bar tooltip-container" data-day="อาทิตย์" data-bottles="0">
                  <div class="bar-fill wave-animation" style="height: 0%"></div>
                  <span class="bar-label">อา.</span>
                  <span class="bar-value">0</span>
                  <div class="chart-tooltip">
                    <div class="tooltip-header">📅 วันอาทิตย์</div>
                    <div class="tooltip-content">
                      <div class="tooltip-item">
                        <span class="tooltip-label">🗂️ ขวดที่เก็บได้:</span>
                        <span class="tooltip-value">0 ขวด</span>
                      </div>
                      <div class="tooltip-item">
                        <span class="tooltip-label">🏆 คะแนน:</span>
                        <span class="tooltip-value">0 คะแนน</span>
                      </div>
                      <div class="tooltip-item">
                        <span class="tooltip-label">⏰ ชั่วโมงจิตอาสา:</span>
                        <span class="tooltip-value">0.0 ชม.</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- MACHINE LOCATION MAP -->
  <section id="machine-map" class="section">
    <div class="container">
      <h2 class="gradient-text spotlight-effect" data-aos="fade-up" data-aos-duration="800">🗺️ แผนที่ตำแหน่งเครื่องรีไซเคิล</h2>
      <p class="section-subtitle" data-aos="fade-up" data-aos-duration="1000" data-aos-delay="200">
        ค้นหาเครื่องรีไซเคิลขวดพลาสติกในโรงเรียนของเรา
      </p>
      
      <div class="map-container" data-aos="fade-up" data-aos-duration="1000" data-aos-delay="400">
        <div class="school-map">
          <!-- School Building Layout -->
          <div class="building building-main">
            <div class="building-label">อาคารเรียน 1</div>
            <div class="machine-point active" data-location="main-building" data-status="active">
              <div class="machine-icon">🤖</div>
              <div class="machine-info">
                <div class="machine-name">เครื่องที่ 1</div>
                <div class="machine-status online">ออนไลน์</div>
              </div>
            </div>
          </div>
          
          <div class="building building-canteen">
            <div class="building-label">โรงอาหารใต้ตึกห้องสม</div>
            <div class="machine-point active" data-location="canteen" data-status="active">
              <div class="machine-icon">🤖</div>
              <div class="machine-info">
                <div class="machine-name">เครื่องที่ 2</div>
                <div class="machine-status online">ออนไลน์</div>
              </div>
            </div>
          </div>
          
          <div class="building building-library">
            <div class="building-label">ห้องสมุด</div>
            <div class="machine-point maintenance" data-location="library" data-status="maintenance">
              <div class="machine-icon">🔧</div>
              <div class="machine-info">
                <div class="machine-name">เครื่องที่ 3</div>
                <div class="machine-status maintenance">ปรับปรุง</div>
              </div>
            </div>
          </div>
          
          <div class="building building-gym">
            <div class="building-label">โดมอเนกประสงค์</div>
            <div class="machine-point active" data-location="gym" data-status="active">
              <div class="machine-icon">🤖</div>
              <div class="machine-info">
                <div class="machine-name">เครื่องที่ 4</div>
                <div class="machine-status online">ออนไลน์</div>
              </div>
            </div>
          </div>
          
          <div class="building building-science">
            <div class="building-label">อาคาร 3</div>
            <div class="machine-point offline" data-location="science" data-status="offline">
              <div class="machine-icon">⚠️</div>
              <div class="machine-info">
                <div class="machine-name">เครื่องที่ 5</div>
                <div class="machine-status offline">ออฟไลน์</div>
              </div>
            </div>
          </div>
          
          <div class="building building-parking">
            <div class="building-label">ตึกฝึกงาน</div>
            <div class="machine-point active" data-location="parking" data-status="active">
              <div class="machine-icon">🤖</div>
              <div class="machine-info">
                <div class="machine-name">เครื่องที่ 6</div>
                <div class="machine-status online">ออนไลน์</div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Map Legend -->
        <div class="map-legend" data-aos="fade-left" data-aos-duration="800" data-aos-delay="600">
          <h3>สัญลักษณ์</h3>
          <div class="legend-item">
            <div class="legend-icon online">🤖</div>
            <span>ใช้งานได้ปกติ</span>
          </div>
          <div class="legend-item">
            <div class="legend-icon maintenance">🔧</div>
            <span>อยู่ระหว่างปรับปรุง</span>
          </div>
          <div class="legend-item">
            <div class="legend-icon offline">⚠️</div>
            <span>ไม่สามารถใช้งานได้</span>
          </div>
        </div>
      </div>
      
      <!-- Machine Status Summary -->
      <div class="machine-summary" data-aos="fade-up" data-aos-duration="1000" data-aos-delay="800">
        <div class="summary-card active-machines">
          <div class="summary-icon">✅</div>
          <div class="summary-content">
            <div class="summary-number" id="active-machines">4</div>
            <div class="summary-label">เครื่องที่ใช้งานได้</div>
          </div>
        </div>
        
        <div class="summary-card maintenance-machines">
          <div class="summary-icon">🔧</div>
          <div class="summary-content">
            <div class="summary-number" id="maintenance-machines">1</div>
            <div class="summary-label">เครื่องที่ปรับปรุง</div>
          </div>
        </div>
        
        <div class="summary-card offline-machines">
          <div class="summary-icon">⚠️</div>
          <div class="summary-content">
            <div class="summary-number" id="offline-machines">1</div>
            <div class="summary-label">เครื่องที่ขัดข้อง</div>
          </div>
        </div>
        
        <div class="summary-card total-capacity">
          <div class="summary-icon">📊</div>
          <div class="summary-content">
            <div class="summary-number" id="total-capacity">85%</div>
            <div class="summary-label">ความจุรวม</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Interactive widgets removed -->

  <!-- MINI GAME -->
  <section id="mini-game" class="section">
    <div class="container">
      <h2 data-aos="fade-up" data-aos-duration="800">🎮 มินิเกม: รักโลก เก็บขวด</h2>
      <div class="game-container" data-aos="fade-up" data-aos-duration="1000" data-aos-delay="200">
        <div class="game-info">
          <div class="game-stats">
            <div class="stat-item">
              <span class="stat-label">คะแนน:</span>
              <span class="stat-value" id="game-score">0</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">เวลา:</span>
              <span class="stat-value" id="game-time">60</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">ชีวิต:</span>
              <span class="stat-value" id="game-lives">❤️❤️❤️</span>
            </div>
          </div>
          <button class="btn btn-primary" id="start-game">เริ่มเกม</button>
          <button class="btn btn-ghost" id="pause-game" style="display:none;">หยุดชั่วคราว</button>
        </div>
        <div class="game-area" id="game-area">
          <div class="game-instructions">
            <h3>🌍 ช่วยรักษาโลก!</h3>
            <p>เลื่อนตะกร้าไปมาเพื่อเก็บขวดพลาสติก</p>
            <p>🎯 เก็บขวดได้ +10 คะแนน</p>
            <p>💔 ขวดตกพื้น -1 ชีวิต</p>
            <p>⚡ ของพิเศษ +50 คะแนน</p>
            <div class="game-controls">
              <span>ใช้ลูกศร ← → ↑ ↓ หรือ A D W S</span>
              <br><small>หรือแตะ/คลิกเพื่อเลื่อนตะกร้า</small>
            </div>
          </div>
          <div class="basket" id="basket">🗑️</div>
        </div>
        <div class="game-over" id="game-over" style="display:none;">
          <h3>🎉 เกมจบแล้ว!</h3>
          <p>คะแนนของคุณ: <span id="final-score">0</span></p>
          <p id="game-message"></p>
          <button class="btn btn-primary" id="restart-game">เล่นอีกครั้ง</button>
        </div>
      </div>
    </div>
  </section>

  <!-- RECYCLING AND ENVIRONMENTAL CONSERVATION INFORMATION SECTION -->
  <section class="info-section" id="recycling-info">
    <div class="container">
      <div class="info-container" data-aos="fade-up" data-aos-duration="800">
        <div class="info-header">
          <h2 class="gradient-text">♻️ ข้อมูลการรีไซเคิลและการอนุรักษ์สิ่งแวดล้อม</h2>
          <p class="info-subtitle">ความรู้สำคัญเพื่อโลกที่ยั่งยืน</p>
        </div>
        
        <div class="info-grid">
          <!-- ความสำคัญของการรีไซเคิล -->
          <div class="info-card" data-aos="fade-up" data-aos-delay="100">
            <div class="info-icon">🌍</div>
            <h3>ความสำคัญของการรีไซเคิล</h3>
            <p>การรีไซเคิลเป็นกระบวนการสำคัญที่ช่วยลดปริมาณขยะ ประหยัดทรัพยากรธรรมชาติ และลดการปล่อยก๊าซเรือนกระจก ซึ่งเป็นสาเหตุหลักของการเปลี่ยนแปลงสภาพภูมิอากาศ</p>
          </div>

          <!-- สถานการณ์ขยะพลาสติกในไทย -->
          <div class="info-card" data-aos="fade-up" data-aos-delay="200">
            <div class="info-icon">📊</div>
            <h3>สถานการณ์ขยะพลาสติกในไทย</h3>
            <p>ประเทศไทยผลิตขยะพลาสติกประมาณ 2 ล้านตันต่อปี แต่สามารถนำกลับไปใช้ประโยชน์ได้เพียง 25% เท่านั้น ตามแผน Roadmap การจัดการขยะพลาสติก พ.ศ. 2561-2573 มีเป้าหมายให้นำขยะพลาสติกกลับมาใช้ประโยชน์ 100% ภายในปี 2565</p>
          </div>

          <!-- หลัก 3R -->
          <div class="info-card" data-aos="fade-up" data-aos-delay="300">
            <div class="info-icon">♻️</div>
            <h3>หลัก 3R เพื่อสิ่งแวดล้อม</h3>
            <ul>
              <li><strong>Reduce (ลด)</strong> - ลดการใช้ทรัพยากรและการผลิตขยะ</li>
              <li><strong>Reuse (ใช้ซ้ำ)</strong> - นำสิ่งของมาใช้ซ้ำให้เกิดประโยชน์</li>
              <li><strong>Recycle (รีไซเคิล)</strong> - แปรรูปขยะให้กลายเป็นผลิตภัณฑ์ใหม่</li>
            </ul>
          </div>

          <!-- พฤติกรรมการลดขยะของคนไทย -->
          <div class="info-card" data-aos="fade-up" data-aos-delay="400">
            <div class="info-icon">👥</div>
            <h3>พฤติกรรมการลดขยะของคนไทย</h3>
            <p>จากการสำรวจพบว่าประชาชนไทยส่วนใหญ่ลดขยะพลาสติกโดย:</p>
            <ul>
              <li>ใช้ถุงผ้าแทนถุงพลาสติก</li>
              <li>ใช้แก้วน้ำส่วนตัว</li>
              <li>คัดแยกขยะเพื่อรีไซเคิล</li>
              <li>หลีกเลี่ยงการใช้ผลิตภัณฑ์พลาสติกใช้ครั้งเดียว</li>
            </ul>
          </div>

          <!-- ประเภทขยะพลาสติกที่รีไซเคิลได้ -->
          <div class="info-card" data-aos="fade-up" data-aos-delay="500">
            <div class="info-icon">🔢</div>
            <h3>ประเภทขยะพลาสติก 7 ชนิด</h3>
            <p>พลาสติกแบ่งออกเป็น 7 ประเภทตามสัญลักษณ์รีไซเคิล แต่ละประเภทมีวิธีการรีไซเคิลและการใช้ประโยชน์ที่แตกต่างกัน การแยกขยะอย่างถูกต้องจะช่วยเพิ่มประสิทธิภาพการรีไซเคิล</p>
          </div>

          <!-- ประโยชน์ต่อการลดก๊าซเรือนกระจก -->
          <div class="info-card" data-aos="fade-up" data-aos-delay="600">
            <div class="info-icon">🌱</div>
            <h3>ประโยชน์ต่อการลดก๊าซเรือนกระจก</h3>
            <p>การรีไซเคิลช่วยลดการปล่อยก๊าซเรือนกระจกอย่างมีนัยสำคัญ เนื่องจากลดความจำเป็นในการผลิตวัตถุดิบใหม่ ซึ่งใช้พลังงานสูง ตามแผนปฏิบัติการลดก๊าซเรือนกระจกของประเทศไทย พ.ศ. 2564-2573 การจัดการของเสียเป็นหนึ่งในมาตรการสำคัญ</p>
          </div>
        </div>

        <!-- แหล่งอ้างอิง -->
        <div class="references-section" data-aos="fade-up" data-aos-delay="700">
          <h3>📚 แหล่งอ้างอิง</h3>
          <div class="references-list">
            <p><strong>1.</strong> มหาวิทยาลัยพะเยา. "การอนุรักษ์สิ่งแวดล้อม." <a href="https://www.up.ac.th" target="_blank">https://www.up.ac.th</a></p>
            <p><strong>2.</strong> Nestle. "การรีไซเคิลขยะ 6 ชนิดที่ช่วยลดคาร์บอนไดออกไซด์." <a href="https://www.nestle.co.th" target="_blank">https://www.nestle.co.th</a></p>
            <p><strong>3.</strong> Dittothailand. "การแยกขยะเพื่อลดมลพิษและปัญหาขยะล้นโลก." <a href="https://www.dittothailand.com" target="_blank">https://www.dittothailand.com</a></p>
            <p><strong>4.</strong> กรมควบคุมมลพิษ. "Roadmap การจัดการขยะพลาสติก พ.ศ. 2561-2573." <a href="https://www.pcd.go.th" target="_blank">https://www.pcd.go.th</a></p>
            <p><strong>5.</strong> สำนักงานนโยบายและแผนทรัพยากรธรรมชาติและสิ่งแวดล้อม. "แผนปฏิบัติการลดก๊าซเรือนกระจก พ.ศ. 2564-2573." <a href="https://www.onep.go.th" target="_blank">https://www.onep.go.th</a></p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ADVERTISEMENT SECTION -->
  <section class="advertisement-section" id="advertisement">
    <div class="container">
      <div class="ad-container" data-aos="fade-up" data-aos-duration="800">
        <div class="ad-header">
          <h2 class="gradient-text">🎯 พื้นที่โฆษณา</h2>
          <p class="ad-subtitle">สนับสนุนโครงการเพื่อสิ่งแวดล้อม</p>
        </div>
        
        <!-- Banner Ad Slot -->
        <div class="ad-banner-slot magnetic-hover" data-aos="zoom-in" data-aos-duration="600" data-aos-delay="200">
          <div class="ad-placeholder">
            <div class="ad-icon">📢</div>
            <h3>แบนเนอร์โฆษณา</h3>
            <p>ขนาด 728x90 พิกเซล</p>
            <div class="ad-demo-content">
              <div class="demo-banner">
                <span class="demo-logo">🌱</span>
                <div class="demo-text">
                  <strong>Green Future</strong>
                  <small>ร่วมสร้างอนาคตสีเขียว</small>
                </div>
                <button class="demo-btn">เรียนรู้เพิ่มเติม</button>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Square Ad Slots -->
        <div class="ad-grid" data-aos="fade-up" data-aos-duration="800" data-aos-delay="400">
          <div class="ad-square-slot magnetic-hover">
            <div class="ad-placeholder">
              <div class="ad-icon">🎨</div>
              <h4>โฆษณาสี่เหลี่ยม</h4>
              <p>ขนาด 300x300 พิกเซล</p>
              <div class="ad-demo-content">
                <div class="demo-square">
                  <div class="demo-product">♻️</div>
                  <strong>EcoProduct</strong>
                  <small>สินค้าเพื่อสิ่งแวดล้อม</small>
                </div>
              </div>
            </div>
          </div>
          
          <div class="ad-square-slot magnetic-hover">
            <div class="ad-placeholder">
              <div class="ad-icon">🏢</div>
              <h4>โฆษณาองค์กร</h4>
              <p>ขนาด 300x300 พิกเซล</p>
              <div class="ad-demo-content">
                <div class="demo-square">
                  <div class="demo-product">🌍</div>
                  <strong>GreenCorp</strong>
                  <small>บริษัทเพื่อโลก</small>
                </div>
              </div>
            </div>
          </div>
          
          <div class="ad-square-slot magnetic-hover">
            <div class="ad-placeholder">
              <div class="ad-icon">🎯</div>
              <h4>โฆษณาเป้าหมาย</h4>
              <p>ขนาด 300x300 พิกเซล</p>
              <div class="ad-demo-content">
                <div class="demo-square">
                  <div class="demo-product">🎁</div>
                  <strong>EcoReward</strong>
                  <small>รางวัลสีเขียว</small>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Text Ad Section -->
        <div class="ad-text-section" data-aos="slide-up" data-aos-duration="800" data-aos-delay="600">
          <div class="ad-text-slot">
            <div class="ad-placeholder">
              <div class="ad-icon">📝</div>
              <h4>โฆษณาข้อความ</h4>
              <div class="ad-demo-content">
                <div class="demo-text-ad">
                  <span class="demo-sponsor">สปอนเซอร์</span>
                  <strong>ร่วมสนับสนุนโครงการรีไซเคิล</strong>
                  <p>เข้าร่วมกับเราในการสร้างโลกที่ยั่งยืน ด้วยเทคโนโลยี AI และการรีไซเคิลที่ทันสมัย</p>
                  <a href="#" class="demo-link">เรียนรู้เพิ่มเติม →</a>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Ad Management Info -->
        <div class="ad-info" data-aos="fade-up" data-aos-duration="600" data-aos-delay="800">
          <div class="ad-info-card">
            <h5>💼 สำหรับผู้ลงโฆษณา</h5>
            <p>ต้องการลงโฆษณาในพื้นที่นี้? ติดต่อเราเพื่อสนับสนุนโครงการเพื่อสิ่งแวดล้อม</p>
            <button class="btn btn-outline contact-ad-btn" onclick="openContactModal()">ติดต่อลงโฆษณา</button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA STRIP -->
  <section class="container cta-strip" id="start" data-aos="zoom-in" data-aos-duration="800">
    <div class="cta-content">
      <h2 class="cta-title">🌱 พร้อมเริ่มต้นการเปลี่ยนแปลงหรือยัง?</h2>
      <p class="cta-subtitle">ร่วมกับเราในการสร้างโลกที่ยั่งยืน เริ่มต้นเก็บขวดพลาสติกและรับคะแนนวันนี้!</p>
      <div class="cta-buttons">
        <a class="btn btn-primary cta-btn-main" href="dashboard.html">
          <span class="btn-icon">📊</span>
          <span class="btn-text">ดูข้อมูลสถิติ</span>
        </a>
        <a class="btn btn-secondary cta-btn-secondary" href="register.html">
          <span class="btn-icon">🚀</span>
          <span class="btn-text">ลงทะเบียนเลย</span>
        </a>
        <a class="btn btn-ghost cta-btn-ghost" href="login.html">
          <span class="btn-icon">🔑</span>
          <span class="btn-text">เข้าสู่ระบบ</span>
        </a>
      </div>
      <div class="cta-extra-buttons">
        <button class="btn btn-ghost cta-btn-ghost" id="contact-btn">
          <span class="btn-icon">💬</span>
          <span class="btn-text">พูดคุยกับเรา</span>
        </button>
        <a class="btn btn-ghost cta-btn-ghost" href="https://docs.google.com/forms/d/e/1FAIpQLSfygVDaYH0LuAUvTCv-8E15Qcc3NsJbkQZ9aBTVkGHvlRbFfQ/viewform?usp=header" target="_blank">
          <span class="btn-icon">📝</span>
          <span class="btn-text">บันทึกความพึงพอใจ</span>
        </a>
      </div>
    </div>
  </section>

  <!-- Contact Modal -->
  <div class="modal-overlay" id="contact-modal">
    <div class="modal">
      <div class="modal-header">
        <h3 class="modal-title">ติดต่อเรา</h3>
        <button class="close-btn" id="close-modal">×</button>
      </div>
      <form id="contact-form" action="https://formspree.io/f/mwpqdzdk" method="POST">
        <!-- Formspree configuration fields -->
        <input type="hidden" name="_subject" value="ข้อความใหม่จากเว็บไซต์ P2P">
        <input type="hidden" name="_captcha" value="false">
        <input type="hidden" name="_template" value="table">
        
        <div class="form-group">
          <label class="form-label" for="name">ชื่อ</label>
          <input type="text" name="name" id="name" class="form-input" placeholder="กรอกชื่อของคุณ" required>
        </div>
        <div class="form-group">
          <label class="form-label" for="email">อีเมล</label>
          <input type="email" name="_replyto" id="email" class="form-input" placeholder="example@email.com" required>
        </div>
        <div class="form-group">
          <label class="form-label" for="phone">เบอร์โทร</label>
          <input type="tel" name="phone" id="phone" class="form-input" placeholder="08X-XXX-XXXX">
        </div>
        <div class="form-group">
          <label class="form-label" for="message">ข้อความ</label>
          <textarea name="message" id="message" class="form-input form-textarea" placeholder="เขียนข้อความที่คุณต้องการสื่อสาร..." required></textarea>
        </div>
        <!-- Honeypot field สำหรับป้องกัน spam -->
        <input type="text" name="_gotcha" style="display:none !important">
        
        <button type="submit" class="btn btn-primary btn-submit" id="submit-btn">
          <span class="btn-text">ส่งข้อความ</span>
          <span class="btn-loading" style="display:none;">กำลังส่ง...</span>
        </button>
      </form>
    </div>
  </div>

  <!-- FOOTER -->
  <footer data-aos="fade-up" data-aos-duration="600">
    <div class="container foot">
      <div>
        <p>© 2025 P2P (Plastic to Point). สงวนลิขสิทธิ์</p>
        <p style="font-size: 14px; margin-top: 8px; line-height: 1.5;">
          ระบบการทำงานนี้เป็นส่วนหนึ่งของรายวิชาโครงงานวิศวกรรมหุ่นยนต์และระบบอัตโนมัติ<br>
          รหัสวิชา ว32275 ชั้นมัธยมศึกษาปีที่ 5  ปีการศึกษา 2568<br>
          โรงเรียนเตรียมอุดมศึกษาพัฒนาการสุวรรณภูมิ<br>
          สำนักงานเขตพื้นที่การศึกษามัธยมศึกษากรุงเทพมหานคร เขต 2
        </p>

      </div>
    </div>
  </footer>

  <!-- AOS JavaScript -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
  

  
  <!-- Firebase SDK -->
  <script type="module">
    // Import Firebase modules
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
    import { getDatabase, ref, onValue } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';
    import { getFirestore, collection, getDocs } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

    // Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyAmw1lDRZIxYKDblO8nhS3SR5aTVCVPJbg",
      authDomain: "takultoujink.firebaseapp.com",
      projectId: "takultoujink",
      storageBucket: "takultoujink.firebasestorage.app",
      messagingSenderId: "865462073491",
      appId: "1:865462073491:web:5985dfd8a0e91b71fa3566",
      measurementId: "G-ZVXD02VSWF",
      databaseURL: "https://takultoujink-default-rtdb.asia-southeast1.firebasedatabase.app"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const database = getDatabase(app);
    const db = getFirestore(app);

    // Team color mapping
    const teamColors = {
      'red': { name: 'ทีมแดง', color: '#ef4444' },
      'yellow': { name: 'ทีมเหลือง', color: '#f59e0b' },
      'purple': { name: 'ทีมม่วง', color: '#8b5cf6' },
      'blue': { name: 'ทีมฟ้า', color: '#3b82f6' },
      'green': { name: 'ทีมเขียว', color: '#10b981' }
    };

    // Leaderboard functions
    window.loadLeaderboard = async function() {
      const loadingEl = document.getElementById('leaderboard-loading');
      const contentEl = document.getElementById('leaderboard-content');
      const errorEl = document.getElementById('leaderboard-error');
      
      // Show loading state
      loadingEl.style.display = 'block';
      contentEl.style.display = 'none';
      errorEl.style.display = 'none';
      
      try {
        // Get all users' data from Firestore and bottles data from Realtime Database
        const [usersSnapshot, bottlesSnapshot] = await Promise.all([
          getDocs(collection(db, 'users')),
          new Promise((resolve, reject) => {
            const bottlesRef = ref(database, 'bottles');
            onValue(bottlesRef, resolve, reject, { onlyOnce: true });
          })
        ]);
        
        const usersData = {};
        usersSnapshot.forEach(doc => {
          usersData[doc.id] = doc.data();
        });
        
        const bottlesData = bottlesSnapshot.val();
        
        if (bottlesData) {
          const leaderboardData = [];
          const teamStats = {
            'red': { name: 'ทีมแดง', bottles: 0, members: 0 },
            'yellow': { name: 'ทีมเหลือง', bottles: 0, members: 0 },
            'purple': { name: 'ทีมม่วง', bottles: 0, members: 0 },
            'blue': { name: 'ทีมฟ้า', bottles: 0, members: 0 },
            'green': { name: 'ทีมเขียว', bottles: 0, members: 0 }
          };
          
          // Process user data
          Object.keys(bottlesData).forEach(userId => {
            const bottleData = bottlesData[userId];
            const userData = usersData[userId];
            
            if (bottleData && bottleData.total > 0) {
              const teamColor = userData?.teamColor || 'unknown';
              
              leaderboardData.push({
                userId: userId,
                name: userData?.displayName || bottleData.displayName || bottleData.email || 'ผู้ใช้ไม่ระบุชื่อ',
                bottles: bottleData.total || 0,
                hours: Math.floor((bottleData.total || 0) / 30),
                teamColor: teamColor
              });
              
              // Update team stats
              if (teamStats[teamColor]) {
                teamStats[teamColor].bottles += bottleData.total || 0;
                teamStats[teamColor].members += 1;
              }
            }
          });
          
          // Sort by bottles count (descending)
          leaderboardData.sort((a, b) => b.bottles - a.bottles);
          
          // Display leaderboard
          displayLeaderboard(leaderboardData, teamStats);
          
          // Hide loading, show content
          loadingEl.style.display = 'none';
          contentEl.style.display = 'block';
        } else {
          throw new Error('ไม่พบข้อมูล');
        }
      } catch (error) {
        console.error('Error loading leaderboard:', error);
        loadingEl.style.display = 'none';
        errorEl.style.display = 'block';
      }
    };

    function displayLeaderboard(data) {
      // Check if we need to add tabs
      if (!document.querySelector('.leaderboard-tabs')) {
        const leaderboardSection = document.querySelector('.leaderboard');
        const leaderboardTitle = leaderboardSection.querySelector('h2');
        const tabsContainer = document.createElement('div');
        tabsContainer.className = 'leaderboard-tabs';
        tabsContainer.innerHTML = `
          <button class="tab-btn active" onclick="showLeaderboard('individual')">อันดับบุคคล</button>
          <button class="tab-btn" onclick="showLeaderboard('team')">อันดับทีม</button>
        `;
        leaderboardTitle.insertAdjacentElement('afterend', tabsContainer);
      }
      
      // Store data globally for tab switching
      window.leaderboardData = data;
      
      // Display individual leaderboard by default
      displayIndividualLeaderboard(data.users);
    }

    function showLeaderboard(type) {
      const tabs = document.querySelectorAll('.tab-btn');
      tabs.forEach(tab => tab.classList.remove('active'));
      event.target.classList.add('active');

      if (type === 'individual') {
        displayIndividualLeaderboard(window.leaderboardData.users);
      } else {
        displayTeamLeaderboard(window.leaderboardData.teams);
      }
    }

    function displayIndividualLeaderboard(users) {
      const podiumEl = document.querySelector('.leaderboard-podium');
      const listEl = document.querySelector('.leaderboard-list');
      
      // Clear existing content
      podiumEl.innerHTML = '';
      listEl.innerHTML = '';
      
      // Display top 3 in podium
      const top3 = users.slice(0, 3);
      top3.forEach((user, index) => {
        const rank = index + 1;
        const rankClass = rank === 1 ? 'first' : rank === 2 ? 'second' : 'third';
        const teamColor = teamColors[user.teamColor] || { name: 'ไม่ระบุ', color: '#gray' };
        
        const podiumItem = document.createElement('div');
        podiumItem.className = `podium-item ${rankClass}`;
        podiumItem.innerHTML = `
          <div class="podium-rank ${rankClass}">${rank}</div>
          <div class="podium-avatar" style="border: 3px solid ${teamColor.color};">${user.name.charAt(0).toUpperCase()}</div>
          <div class="podium-name">${user.name}</div>
          <div class="podium-team" style="color: ${teamColor.color};">ทีม${teamColor.name}</div>
          <div class="podium-bottles ${rankClass}">${user.bottles} ขวด</div>
          <div class="podium-hours">${user.hours} ชั่วโมงจิตอาสา</div>
        `;
        podiumEl.appendChild(podiumItem);
      });
      
      // Display remaining users in list
      const remaining = users.slice(3);
      remaining.forEach((user, index) => {
        const rank = index + 4;
        const teamColor = teamColors[user.teamColor] || { name: 'ไม่ระบุ', color: '#gray' };
        
        const listItem = document.createElement('div');
        listItem.className = 'leaderboard-item';
        listItem.innerHTML = `
          <div class="leaderboard-rank">${rank}</div>
          <div class="leaderboard-avatar" style="border: 2px solid ${teamColor.color};">${user.name.charAt(0).toUpperCase()}</div>
          <div class="leaderboard-info">
            <div class="leaderboard-name">${user.name}</div>
            <div class="leaderboard-details">ทีม${teamColor.name} • ${user.hours} ชั่วโมงจิตอาสา</div>
          </div>
          <div>
            <span class="leaderboard-bottles">${user.bottles}</span>
            <span class="leaderboard-hours">ขวด</span>
          </div>
        `;
        listEl.appendChild(listItem);
      });
      
      // If no data to show in list
      if (remaining.length === 0 && top3.length > 0) {
        listEl.innerHTML = '<div style="text-align:center; padding:20px; color:var(--muted);">🎉 ยินดีด้วย! คุณอยู่ใน Top 3</div>';
      } else if (users.length === 0) {
        podiumEl.innerHTML = '<div style="text-align:center; padding:40px; color:var(--muted); grid-column: 1 / -1;">📊 ยังไม่มีข้อมูลการเก็บขวด<br><small>เริ่มเก็บขวดเพื่อขึ้นอันดับกันเถอะ!</small></div>';
      }
    }

    function displayTeamLeaderboard(teams) {
      const podiumEl = document.querySelector('.leaderboard-podium');
      const listEl = document.querySelector('.leaderboard-list');
      
      // Clear existing content
      podiumEl.innerHTML = '';
      listEl.innerHTML = '';
      
      // Display top 3 teams in podium
      const top3 = teams.slice(0, 3);
      top3.forEach((team, index) => {
        const rank = index + 1;
        const rankClass = rank === 1 ? 'first' : rank === 2 ? 'second' : 'third';
        const teamColor = teamColors[team.color] || { name: 'ไม่ระบุ', color: '#gray' };
        
        const podiumItem = document.createElement('div');
        podiumItem.className = `podium-item ${rankClass}`;
        podiumItem.innerHTML = `
          <div class="podium-rank ${rankClass}">${rank}</div>
          <div class="podium-avatar" style="background-color: ${teamColor.color}; color: white;">ทีม</div>
          <div class="podium-name">ทีม${teamColor.name}</div>
          <div class="podium-team">${team.members} สมาชิก</div>
          <div class="podium-bottles ${rankClass}">${team.bottles} ขวด</div>
          <div class="podium-hours">รวม ${team.hours} ชั่วโมงจิตอาสา</div>
        `;
        podiumEl.appendChild(podiumItem);
      });
      
      // Display remaining teams in list
      const remaining = teams.slice(3);
      remaining.forEach((team, index) => {
        const rank = index + 4;
        const teamColor = teamColors[team.color] || { name: 'ไม่ระบุ', color: '#gray' };
        
        const listItem = document.createElement('div');
        listItem.className = 'leaderboard-item';
        listItem.innerHTML = `
          <div class="leaderboard-rank">${rank}</div>
          <div class="leaderboard-avatar" style="background-color: ${teamColor.color}; color: white;">ทีม</div>
          <div class="leaderboard-info">
            <div class="leaderboard-name">ทีม${teamColor.name}</div>
            <div class="leaderboard-details">${team.members} สมาชิก • รวม ${team.hours} ชั่วโมงจิตอาสา</div>
          </div>
          <div>
            <span class="leaderboard-bottles">${team.bottles}</span>
            <span class="leaderboard-hours">ขวด</span>
          </div>
        `;
        listEl.appendChild(listItem);
      });
      
      // If no data to show in list
       if (remaining.length === 0 && top3.length > 0) {
         listEl.innerHTML = '<div style="text-align:center; padding:20px; color:var(--muted);">🎉 ยินดีด้วย! ทีมคุณอยู่ใน Top 3</div>';
       } else if (teams.length === 0) {
         podiumEl.innerHTML = '<div style="text-align:center; padding:40px; color:var(--muted); grid-column: 1 / -1;">📊 ยังไม่มีข้อมูลทีม<br><small>เริ่มสร้างทีมและเก็บขวดกันเถอะ!</small></div>';
       }
     }
      

    // Monthly Statistics Functions
    window.loadMonthlyStats = async function() {
      try {
        // Get current date
        const now = new Date();
        const currentMonth = now.getMonth();
        const currentYear = now.getFullYear();
        const lastMonth = currentMonth === 0 ? 11 : currentMonth - 1;
        const lastMonthYear = currentMonth === 0 ? currentYear - 1 : currentYear;
        
        // Get bottles data from Firebase
        const bottlesSnapshot = await new Promise((resolve, reject) => {
          const bottlesRef = ref(database, 'bottles');
          onValue(bottlesRef, resolve, reject, { onlyOnce: true });
        });
        
        const bottlesData = bottlesSnapshot.val();
        
        if (bottlesData) {
          let currentMonthBottles = 0;
          let lastMonthBottles = 0;
          const dailyData = Array(7).fill(0); // Last 7 days
          
          // Calculate statistics
          Object.keys(bottlesData).forEach(userId => {
            const userData = bottlesData[userId];
            if (userData && userData.history) {
              Object.keys(userData.history).forEach(dateKey => {
                const date = new Date(dateKey);
                const bottles = userData.history[dateKey] || 0;
                
                // Current month bottles
                if (date.getMonth() === currentMonth && date.getFullYear() === currentYear) {
                  currentMonthBottles += bottles;
                }
                
                // Last month bottles
                if (date.getMonth() === lastMonth && date.getFullYear() === lastMonthYear) {
                  lastMonthBottles += bottles;
                }
                
                // Last 7 days data
                const daysDiff = Math.floor((now - date) / (1000 * 60 * 60 * 24));
                if (daysDiff >= 0 && daysDiff < 7) {
                  const dayIndex = 6 - daysDiff; // Reverse order for chart
                  dailyData[dayIndex] += bottles;
                }
              });
            }
          });
          
          // Calculate growth percentage
          const growthPercentage = lastMonthBottles > 0 
            ? Math.round(((currentMonthBottles - lastMonthBottles) / lastMonthBottles) * 100)
            : currentMonthBottles > 0 ? 100 : 0;
          
          // Calculate user count (simulate based on bottles collected)
          const userCount = Math.floor(currentMonthBottles / 10) + 15; // Base users + activity-based users
          
          // Monthly target (can be configured)
          const monthlyTarget = 1000;
          const progressPercentage = Math.min(Math.round((currentMonthBottles / monthlyTarget) * 100), 100);
          
          // Update UI
          updateMonthlyStatsUI({
            currentMonthBottles,
            growthPercentage,
            userCount,
            monthlyTarget,
            progressPercentage,
            dailyData
          });
        }
      } catch (error) {
        console.error('Error loading monthly stats:', error);
        // Show error state or default values
        updateMonthlyStatsUI({
          currentMonthBottles: 0,
          growthPercentage: 0,
          userCount: 15, // Default base users
          monthlyTarget: 1000,
          progressPercentage: 0,
          dailyData: Array(7).fill(0)
        });
      }
    };
    
    function updateMonthlyStatsUI(stats) {
      // Update monthly bottles
      const monthlyBottlesEl = document.getElementById('monthly-bottles');
      if (monthlyBottlesEl) {
        animateNumber(monthlyBottlesEl, 0, stats.currentMonthBottles, 1500);
      }
      
      // Update growth percentage
      const growthPercentageEl = document.getElementById('growth-percentage');
      const growthIndicatorEl = document.getElementById('growth-indicator');
      if (growthPercentageEl && growthIndicatorEl) {
        const sign = stats.growthPercentage >= 0 ? '+' : '';
        growthPercentageEl.textContent = `${sign}${stats.growthPercentage}%`;
        
        const arrow = stats.growthPercentage > 0 ? '📈' : stats.growthPercentage < 0 ? '📉' : '📊';
        const text = stats.growthPercentage > 0 ? 'เติบโต' : stats.growthPercentage < 0 ? 'ลดลง' : 'คงที่';
        const color = stats.growthPercentage > 0 ? 'var(--accent-2)' : stats.growthPercentage < 0 ? 'var(--accent-4)' : 'var(--muted)';
        
        growthIndicatorEl.innerHTML = `
          <span class="growth-arrow">${arrow}</span>
          <span class="growth-text" style="color: ${color}">${text}</span>
        `;
      }
      
      // Update monthly target
      const monthlyTargetEl = document.getElementById('monthly-target');
      if (monthlyTargetEl) {
        monthlyTargetEl.textContent = stats.monthlyTarget.toLocaleString();
      }
      
      // Update progress
      const monthlyProgressEl = document.getElementById('monthly-progress');
      const monthlyProgressTextEl = document.getElementById('monthly-progress-text');
      if (monthlyProgressEl && monthlyProgressTextEl) {
        setTimeout(() => {
          monthlyProgressEl.style.width = `${stats.progressPercentage}%`;
        }, 500);
        monthlyProgressTextEl.textContent = `${stats.progressPercentage}% ของเป้าหมาย`;
      }
      
      // Update user count
      const userCountEl = document.getElementById('user-count');
      const userImpactTextEl = document.getElementById('user-impact-text');
      if (userCountEl && userImpactTextEl) {
        animateNumber(userCountEl, 0, stats.userCount, 1500);
        userImpactTextEl.textContent = `มีผู้ใช้งานทั้งหมด ${stats.userCount} คน`;
      }
      
      // Update target status
      const targetStatusEl = document.getElementById('target-status');
      if (targetStatusEl) {
        const isCompleted = stats.progressPercentage >= 100;
        const icon = isCompleted ? '🎉' : stats.progressPercentage >= 75 ? '🔥' : '⏳';
        const text = isCompleted ? 'บรรลุเป้าหมาย!' : stats.progressPercentage >= 75 ? 'ใกล้เป้าหมาย' : 'กำลังดำเนินการ';
        const color = isCompleted ? 'var(--accent-2)' : stats.progressPercentage >= 75 ? 'var(--accent)' : 'var(--muted)';
        
        targetStatusEl.innerHTML = `
          <span class="target-icon">${icon}</span>
          <span class="target-text" style="color: ${color}">${text}</span>
        `;
      }
      
      // Update daily chart
      updateDailyChart(stats.dailyData);
      
      // Update tooltip data
      updateTooltipData(stats);
    }
    
    function updateTooltipData(stats) {
      // Calculate additional data for tooltips
      const now = new Date();
      const daysInMonth = new Date(now.getFullYear(), now.getMonth() + 1, 0).getDate();
      const currentDay = now.getDate();
      const daysLeft = daysInMonth - currentDay;
      const dailyAverage = Math.round(stats.currentMonthBottles / currentDay);
      const dailyNeeded = Math.round((stats.monthlyTarget - stats.currentMonthBottles) / Math.max(daysLeft, 1));
      const totalPoints = stats.currentMonthBottles * 2; // 2 points per bottle
      const lastMonthBottles = Math.round(stats.currentMonthBottles / (1 + stats.growthPercentage / 100));
      const difference = stats.currentMonthBottles - lastMonthBottles;
      
      // Update monthly tooltip
      const tooltipTarget = document.getElementById('tooltip-target');
      const tooltipDailyAvg = document.getElementById('tooltip-daily-avg');
      const tooltipDaysLeft = document.getElementById('tooltip-days-left');
      const tooltipPoints = document.getElementById('tooltip-points');
      
      if (tooltipTarget) tooltipTarget.textContent = `${stats.monthlyTarget.toLocaleString()} ขวด`;
      if (tooltipDailyAvg) tooltipDailyAvg.textContent = `${dailyAverage} ขวด`;
      if (tooltipDaysLeft) tooltipDaysLeft.textContent = `${daysLeft} วัน`;
      if (tooltipPoints) tooltipPoints.textContent = `${totalPoints.toLocaleString()} คะแนน`;
      
      // Update growth tooltip
      const tooltipLastMonth = document.getElementById('tooltip-last-month');
      const tooltipThisMonth = document.getElementById('tooltip-this-month');
      const tooltipDifference = document.getElementById('tooltip-difference');
      const tooltipTrend = document.getElementById('tooltip-trend');
      
      if (tooltipLastMonth) tooltipLastMonth.textContent = `${lastMonthBottles.toLocaleString()} ขวด`;
      if (tooltipThisMonth) tooltipThisMonth.textContent = `${stats.currentMonthBottles.toLocaleString()} ขวด`;
      if (tooltipDifference) {
        const sign = difference >= 0 ? '+' : '';
        tooltipDifference.textContent = `${sign}${difference.toLocaleString()} ขวด`;
      }
      if (tooltipTrend) {
        const trend = stats.growthPercentage > 10 ? 'เติบโตสูง' : 
                     stats.growthPercentage > 0 ? 'เติบโต' : 
                     stats.growthPercentage < -10 ? 'ลดลงมาก' : 
                     stats.growthPercentage < 0 ? 'ลดลง' : 'คงที่';
        tooltipTrend.textContent = trend;
      }
      
      // Update target tooltip
      const tooltipTotalTarget = document.getElementById('tooltip-total-target');
      const tooltipSuccessRate = document.getElementById('tooltip-success-rate');
      const tooltipDailyNeeded = document.getElementById('tooltip-daily-needed');
      const tooltipStatus = document.getElementById('tooltip-status');
      
      if (tooltipTotalTarget) tooltipTotalTarget.textContent = `${stats.monthlyTarget.toLocaleString()} ขวด`;
      if (tooltipSuccessRate) tooltipSuccessRate.textContent = `${stats.progressPercentage}%`;
      if (tooltipDailyNeeded) tooltipDailyNeeded.textContent = `${Math.max(dailyNeeded, 0)} ขวด`;
      if (tooltipStatus) {
        const status = stats.progressPercentage >= 100 ? 'บรรลุเป้าหมาย!' : 
                      stats.progressPercentage >= 75 ? 'ใกล้เป้าหมาย' : 
                      stats.progressPercentage >= 50 ? 'กำลังดำเนินการ' : 
                      'ต้องเร่งความเร็ว';
        tooltipStatus.textContent = status;
      }
      
      // Update user tooltip
      const newUsers = Math.floor(stats.userCount * 0.2); // 20% new users
      const activeUsers = Math.floor(stats.userCount * 0.7); // 70% active users
      const dailyUsers = Math.floor(stats.userCount * 0.4); // 40% daily active
      const engagement = Math.round((activeUsers / stats.userCount) * 100);
      
      const tooltipNewUsers = document.getElementById('tooltip-new-users');
      const tooltipActiveUsers = document.getElementById('tooltip-active-users');
      const tooltipDailyUsers = document.getElementById('tooltip-daily-users');
      const tooltipEngagement = document.getElementById('tooltip-engagement');
      
      if (tooltipNewUsers) tooltipNewUsers.textContent = `${newUsers} คน`;
      if (tooltipActiveUsers) tooltipActiveUsers.textContent = `${activeUsers} คน`;
      if (tooltipDailyUsers) tooltipDailyUsers.textContent = `${dailyUsers} คน`;
      if (tooltipEngagement) tooltipEngagement.textContent = `${engagement}%`;
      
      // Update chart tooltips
      updateChartTooltips(stats.dailyData);
    }
    
    function updateChartTooltips(dailyData) {
      const chartBars = document.querySelectorAll('.chart-bar');
      const days = ['จันทร์', 'อังคาร', 'พุธ', 'พฤหัสบดี', 'ศุกร์', 'เสาร์', 'อาทิตย์'];
      
      chartBars.forEach((bar, index) => {
        const bottles = dailyData[index] || 0;
        const points = bottles * 2; // 2 points per bottle
        const hours = bottles * 0.1; // 0.1 hours per bottle
        const dayName = days[index];
        
        // Update tooltip content
        const tooltip = bar.querySelector('.chart-tooltip');
        if (tooltip) {
          const header = tooltip.querySelector('.tooltip-header');
          const bottleValue = tooltip.querySelector('.tooltip-value');
          const pointValues = tooltip.querySelectorAll('.tooltip-value');
          
          if (header) header.textContent = `📅 วัน${dayName}`;
          
          // Update all tooltip values
          const tooltipItems = tooltip.querySelectorAll('.tooltip-item');
          if (tooltipItems.length >= 3) {
            tooltipItems[0].querySelector('.tooltip-value').textContent = `${bottles} ขวด`;
            tooltipItems[1].querySelector('.tooltip-value').textContent = `${points} คะแนน`;
            tooltipItems[2].querySelector('.tooltip-value').textContent = `${hours.toFixed(1)} ชม.`;
          }
        }
      });
    }
    
    function updateDailyChart(dailyData) {
      const chartBars = document.querySelectorAll('.chart-bar');
      const maxValue = Math.max(...dailyData, 1); // Prevent division by zero
      
      chartBars.forEach((bar, index) => {
        const barFill = bar.querySelector('.bar-fill');
        const barValue = bar.querySelector('.bar-value');
        const bottles = dailyData[index] || 0;
        const height = Math.max((bottles / maxValue) * 100, 2); // Minimum 2% height
        
        if (barFill && barValue) {
          setTimeout(() => {
            barFill.style.height = `${height}%`;
          }, index * 100 + 800); // Staggered animation
          
          barValue.textContent = bottles;
          bar.setAttribute('data-bottles', bottles);
        }
      });
    }
    
    function animateNumber(element, start, end, duration) {
      const startTime = performance.now();
      const difference = end - start;
      
      function updateNumber(currentTime) {
        const elapsed = currentTime - startTime;
        const progress = Math.min(elapsed / duration, 1);
        
        // Easing function for smooth animation
        const easeOutQuart = 1 - Math.pow(1 - progress, 4);
        const current = Math.round(start + (difference * easeOutQuart));
        
        element.textContent = current.toLocaleString();
        
        if (progress < 1) {
          requestAnimationFrame(updateNumber);
        }
      }
      
      requestAnimationFrame(updateNumber);
    }

    // Load leaderboard and monthly stats when page loads
    document.addEventListener('DOMContentLoaded', () => {
      loadLeaderboard();
      loadMonthlyStats();
      
      // Auto refresh every 30 seconds
      setInterval(loadLeaderboard, 30000);
      setInterval(loadMonthlyStats, 60000); // Refresh monthly stats every minute
    });

    // Mini Game Logic
    class BottleGame {
      constructor() {
        this.gameArea = document.getElementById('game-area');
        this.basket = document.getElementById('basket');
        this.scoreElement = document.getElementById('game-score');
        this.timeElement = document.getElementById('game-time');
        this.livesElement = document.getElementById('game-lives');
        this.gameOverElement = document.getElementById('game-over');
        this.finalScoreElement = document.getElementById('final-score');
        this.gameMessageElement = document.getElementById('game-message');
        
        this.score = 0;
        this.lives = 3;
        this.timeLeft = 60;
        this.gameRunning = false;
        this.gamePaused = false;
        this.basketPosition = 50;
        this.basketVerticalPosition = 10; // Distance from bottom in pixels
        this.fallingItems = [];
        this.gameInterval = null;
        this.spawnInterval = null;
        this.timeInterval = null;
        
        this.items = [
          { emoji: '🍶', points: 10, type: 'bottle' },
          { emoji: '🥤', points: 10, type: 'bottle' },
          { emoji: '🧴', points: 10, type: 'bottle' },
          { emoji: '⚡', points: 50, type: 'special' },
          { emoji: '🌟', points: 30, type: 'special' },
          { emoji: '💎', points: 100, type: 'rare' }
        ];
        
        this.initEventListeners();
      }
      
      initEventListeners() {
        document.getElementById('start-game').addEventListener('click', () => this.startGame());
        document.getElementById('pause-game').addEventListener('click', () => this.togglePause());
        document.getElementById('restart-game').addEventListener('click', () => this.restartGame());
        
        document.addEventListener('keydown', (e) => {
           if (!this.gameRunning || this.gamePaused) return;
           
           switch(e.key) {
             case 'ArrowLeft':
             case 'a':
             case 'A':
               this.moveBasket(-5, 0);
               break;
             case 'ArrowRight':
             case 'd':
             case 'D':
               this.moveBasket(5, 0);
               break;
             case 'ArrowUp':
             case 'w':
             case 'W':
               this.moveBasket(0, 5);
               break;
             case 'ArrowDown':
             case 's':
             case 'S':
               this.moveBasket(0, -5);
               break;
           }
         });
         
         // Touch controls for mobile
         let touchStartX = 0;
         let touchStartY = 0;
         this.gameArea.addEventListener('touchstart', (e) => {
           touchStartX = e.touches[0].clientX;
           touchStartY = e.touches[0].clientY;
         });
         
         this.gameArea.addEventListener('touchmove', (e) => {
           e.preventDefault();
           if (!this.gameRunning || this.gamePaused) return;
           
           const touchX = e.touches[0].clientX;
           const touchY = e.touches[0].clientY;
           const deltaX = touchX - touchStartX;
           const deltaY = touchY - touchStartY;
           
           if (Math.abs(deltaX) > 10) {
             this.moveBasket(deltaX > 0 ? 3 : -3, 0);
             touchStartX = touchX;
           }
           if (Math.abs(deltaY) > 10) {
             this.moveBasket(0, deltaY > 0 ? -3 : 3); // Inverted Y for natural movement
             touchStartY = touchY;
           }
         });
         
         // Click/tap controls
         this.gameArea.addEventListener('click', (e) => {
           if (!this.gameRunning || this.gamePaused) return;
           
           const rect = this.gameArea.getBoundingClientRect();
           const clickX = ((e.clientX - rect.left) / rect.width) * 100;
           const clickY = rect.height - (e.clientY - rect.top); // Convert to bottom-based coordinate
           
           const horizontalMove = clickX < this.basketPosition ? -8 : 8;
           const verticalMove = clickY > this.basketVerticalPosition ? 8 : -8;
           
           // Move towards click position
           this.moveBasket(horizontalMove, verticalMove);
         });
      }
      
      startGame() {
        this.score = 0;
        this.lives = 3;
        this.timeLeft = 60;
        this.basketPosition = 50;
        this.basketVerticalPosition = 10;
        this.fallingItems = [];
        this.gameRunning = true;
        this.gamePaused = false;
        
        // Reset basket position
        this.basket.style.left = this.basketPosition + '%';
        this.basket.style.bottom = this.basketVerticalPosition + 'px';
        this.basket.style.display = 'block';
        
        this.updateUI();
        this.hideInstructions();
        this.hideGameOver();
        
        document.getElementById('start-game').style.display = 'none';
        document.getElementById('pause-game').style.display = 'inline-block';
        
        this.gameInterval = setInterval(() => this.updateGame(), 50);
        this.spawnInterval = setInterval(() => this.spawnItem(), 1200);
        this.timeInterval = setInterval(() => this.updateTime(), 1000);
      }
      
      togglePause() {
        this.gamePaused = !this.gamePaused;
        const pauseBtn = document.getElementById('pause-game');
        pauseBtn.textContent = this.gamePaused ? 'ดำเนินต่อ' : 'หยุดชั่วคราว';
      }
      
      restartGame() {
        this.endGame();
        this.startGame();
      }
      
      moveBasket(horizontalDirection, verticalDirection = 0) {
        this.basketPosition += horizontalDirection;
        this.basketPosition = Math.max(5, Math.min(95, this.basketPosition));
        
        this.basketVerticalPosition += verticalDirection;
        this.basketVerticalPosition = Math.max(5, Math.min(350, this.basketVerticalPosition));
        
        this.basket.style.left = this.basketPosition + '%';
        this.basket.style.bottom = this.basketVerticalPosition + 'px';
      }
      
      spawnItem() {
        if (!this.gameRunning || this.gamePaused) return;
        
        const randomItem = this.items[Math.floor(Math.random() * this.items.length)];
        const item = {
          element: document.createElement('div'),
          x: Math.random() * 90 + 5,
          y: -50,
          speed: Math.random() * 3 + 4,
          data: randomItem
        };
        
        item.element.className = 'falling-item';
        item.element.textContent = randomItem.emoji;
        item.element.style.left = item.x + '%';
        item.element.style.top = item.y + 'px';
        // Remove CSS animation, use JavaScript animation instead
        // item.element.style.animationDuration = (400 / item.speed) + 's';
        
        this.gameArea.appendChild(item.element);
        this.fallingItems.push(item);
      }
      
      updateGame() {
        if (!this.gameRunning || this.gamePaused) return;
        
        this.fallingItems.forEach((item, index) => {
          item.y += item.speed;
          item.element.style.top = item.y + 'px';
          
          // Check collision with basket
          const basketLeft = this.basketPosition - 5;
          const basketRight = this.basketPosition + 5;
          const basketTop = 400 - this.basketVerticalPosition - 50; // 50px basket height
          const basketBottom = 400 - this.basketVerticalPosition;
          
          if (item.y > basketTop && item.y < basketBottom && item.x > basketLeft && item.x < basketRight) {
            this.collectItem(item, index);
          }
          // Check if item fell off screen
          else if (item.y > 400) {
            this.missItem(item, index);
          }
        });
      }
      
      collectItem(item, index) {
        this.score += item.data.points;
        this.basket.style.animation = 'bounce 0.3s ease';
        setTimeout(() => this.basket.style.animation = '', 300);
        
        this.removeItem(index);
        this.updateUI();
      }
      
      missItem(item, index) {
        if (item.data.type === 'bottle') {
          this.lives--;
          if (this.lives <= 0) {
            this.endGame();
            return;
          }
        }
        this.removeItem(index);
        this.updateUI();
      }
      
      removeItem(index) {
        const item = this.fallingItems[index];
        if (item && item.element && item.element.parentNode) {
          item.element.parentNode.removeChild(item.element);
        }
        this.fallingItems.splice(index, 1);
      }
      
      updateTime() {
        if (!this.gameRunning || this.gamePaused) return;
        
        this.timeLeft--;
        if (this.timeLeft <= 0) {
          this.endGame();
        }
        this.updateUI();
      }
      
      updateUI() {
        this.scoreElement.textContent = this.score;
        this.timeElement.textContent = this.timeLeft;
        this.livesElement.textContent = '❤️'.repeat(this.lives);
      }
      
      endGame() {
        this.gameRunning = false;
        
        clearInterval(this.gameInterval);
        clearInterval(this.spawnInterval);
        clearInterval(this.timeInterval);
        
        // Clear falling items
        this.fallingItems.forEach(item => {
          if (item.element && item.element.parentNode) {
            item.element.parentNode.removeChild(item.element);
          }
        });
        this.fallingItems = [];
        
        // Show game over
        this.finalScoreElement.textContent = this.score;
        
        let message = '';
        if (this.score >= 500) {
          message = '🌟 ยอดเยี่ยม! คุณเป็นนักรักษ์โลกตัวจริง!';
        } else if (this.score >= 300) {
          message = '👏 เก่งมาก! โลกขอบคุณคุณ!';
        } else if (this.score >= 150) {
          message = '😊 ดีแล้ว! ช่วยรักษาโลกได้ดี!';
        } else {
          message = '💪 ลองใหม่อีกครั้ง เพื่อโลกที่สะอาด!';
        }
        
        this.gameMessageElement.textContent = message;
        this.showGameOver();
        
        document.getElementById('start-game').style.display = 'inline-block';
        document.getElementById('pause-game').style.display = 'none';
      }
      
      hideInstructions() {
        const instructions = this.gameArea.querySelector('.game-instructions');
        if (instructions) instructions.style.display = 'none';
      }
      
      showGameOver() {
        this.gameOverElement.style.display = 'block';
      }
      
      hideGameOver() {
        this.gameOverElement.style.display = 'none';
      }
    }
    
    // Initialize game when page loads
    document.addEventListener('DOMContentLoaded', () => {
      new BottleGame();
    });
  </script>
  
  <script>
    // Initialize AOS
    AOS.init({
      duration: 800,
      offset: 100,
      delay: 0,
      once: true,
      mirror: false,
      anchorPlacement: 'top-bottom',
      easing: 'ease-out-cubic'
    });

    // Smooth scrolling
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
        }
      });
    });

    // Modal functionality
    const contactBtn = document.getElementById('contact-btn');
    const contactModal = document.getElementById('contact-modal');
    const closeModal = document.getElementById('close-modal');
    const contactForm = document.getElementById('contact-form');

    // เปิด modal
    contactBtn.addEventListener('click', () => {
      contactModal.classList.add('active');
      document.body.style.overflow = 'hidden';
    });

    // ปิด modal เมื่อกดปุ่มปิด
    closeModal.addEventListener('click', () => {
      contactModal.classList.remove('active');
      document.body.style.overflow = 'auto';
    });

    // ปิด modal เมื่อกดพื้นหลัง
    contactModal.addEventListener('click', (e) => {
      if (e.target === contactModal) {
        contactModal.classList.remove('active');
        document.body.style.overflow = 'auto';
      }
    });

    // ปิด modal เมื่อกด ESC
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && contactModal.classList.contains('active')) {
        contactModal.classList.remove('active');
        document.body.style.overflow = 'auto';
      }
    });

    // Handle form submission with Formspree
    contactForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const submitBtn = document.getElementById('submit-btn');
      const btnText = submitBtn.querySelector('.btn-text');
      const btnLoading = submitBtn.querySelector('.btn-loading');
      
      // แสดงสถานะกำลังส่ง
      submitBtn.disabled = true;
      btnText.style.display = 'none';
      btnLoading.style.display = 'inline';
      
      try {
        const formData = new FormData(contactForm);
        
        // เพิ่ม hidden field สำหรับ Formspree
        formData.append('_subject', 'ข้อความใหม่จากเว็บไซต์ P2P');
        formData.append('_next', window.location.href);
        formData.append('_captcha', 'false');
        
        const response = await fetch('https://formspree.io/f/mwpqdzdk', {
          method: 'POST',
          body: formData,
          headers: {
            'Accept': 'application/json'
          }
        });
        
        if (response.ok) {
          // ส่งสำเร็จ
          alert('✅ ขอบคุณสำหรับการติดต่อ! เราจะติดต่อกลับในเร็วๆ นี้');
          contactForm.reset();
          contactModal.classList.remove('active');
          document.body.style.overflow = 'auto';
        } else {
          // เกิดข้อผิดพลาด
          let errorMessage = 'เกิดข้อผิดพลาดในการส่งข้อความ';
          
          try {
            const data = await response.json();
            if (data.errors && data.errors.length > 0) {
              errorMessage = 'เกิดข้อผิดพลาด: ' + data.errors.map(error => error.message).join(', ');
            } else if (data.error) {
              errorMessage = 'เกิดข้อผิดพลาด: ' + data.error;
            }
          } catch (parseError) {
            console.log('Could not parse error response:', parseError);
          }
          
          alert('❌ ' + errorMessage + ' กรุณาลองใหม่อีกครั้ง');
        }
      } catch (error) {
        console.error('Network Error:', error);
        alert('❌ เกิดข้อผิดพลาดในการเชื่อมต่อ กรุณาตรวจสอบการเชื่อมต่ออินเทอร์เน็ตและลองใหม่');
      } finally {
        // คืนสถานะปุ่ม
        submitBtn.disabled = false;
        btnText.style.display = 'inline';
        btnLoading.style.display = 'none';
      }
    });

    // Theme Switcher JavaScript
    document.addEventListener('DOMContentLoaded', function() {
      const themeBlocks = document.querySelectorAll('.block__item[data-theme]');
      const body = document.body;
      
      // Load saved theme from localStorage
      const savedTheme = localStorage.getItem('selectedTheme') || 'playful';
      applyTheme(savedTheme);
      
      // Add click event listeners to theme blocks
      themeBlocks.forEach(block => {
        const parentBlock = block.closest('.block');
        
        parentBlock.addEventListener('click', function() {
          const theme = block.getAttribute('data-theme');
          applyTheme(theme);
          localStorage.setItem('selectedTheme', theme);
          
          // Add visual feedback
          parentBlock.style.transform = 'scale(0.95)';
          setTimeout(() => {
            parentBlock.style.transform = '';
          }, 150);
        });
        
        // Add keyboard support
        parentBlock.addEventListener('keydown', function(e) {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            parentBlock.click();
          }
        });
      });
      
      function applyTheme(themeName) {
        // Remove all existing theme classes
        body.classList.remove('theme-playful', 'theme-nature', 'theme-sunset', 'theme-ocean', 'theme-dark');
        
        // Add new theme class
        body.classList.add(`theme-${themeName}`);
        
        // Set data-theme attribute for CSS variables
        body.setAttribute('data-theme', themeName);
        
        // Update theme-specific gradients for blocks
        updateBlockGradients(themeName);
        
        // Add smooth transition effect
        body.style.transition = 'all 0.5s ease';
        setTimeout(() => {
          body.style.transition = '';
        }, 500);
      }
      
      function updateBlockGradients(theme) {
        const gradients = {
          playful: 'linear-gradient(135deg, #ec4899, #06b6d4, #f59e0b)',
          nature: 'linear-gradient(135deg, #10b981, #84cc16, #22c55e)',
          sunset: 'linear-gradient(135deg, #f59e0b, #ef4444, #ec4899)',
          ocean: 'linear-gradient(135deg, #06b6d4, #3b82f6, #8b5cf6)',
          space: 'linear-gradient(135deg, #7c3aed, #3b82f6, #8b5cf6)'
        };
        
        themeBlocks.forEach(block => {
          const blockTheme = block.getAttribute('data-theme');
          if (blockTheme === theme) {
            block.style.background = gradients[theme];
            block.style.boxShadow = '0 4px 15px rgba(0,0,0,0.2)';
          } else {
            block.style.background = gradients[blockTheme];
            block.style.boxShadow = '';
          }
        });
      }
    });

    // Machine Location Map JavaScript
    document.addEventListener('DOMContentLoaded', function() {
      const machinePoints = document.querySelectorAll('.machine-point');
      const summaryCards = document.querySelectorAll('.summary-card');
      
      // Machine status data
      const machineData = {
        'main-building': { name: 'เครื่องที่ 1', status: 'active', capacity: 85, lastUpdate: '5 นาทีที่แล้ว' },
        'canteen': { name: 'เครื่องที่ 2', status: 'active', capacity: 92, lastUpdate: '2 นาทีที่แล้ว' },
        'library': { name: 'เครื่องที่ 3', status: 'maintenance', capacity: 0, lastUpdate: '1 ชั่วโมงที่แล้ว' },
        'gym': { name: 'เครื่องที่ 4', status: 'active', capacity: 67, lastUpdate: '10 นาทีที่แล้ว' },
        'science': { name: 'เครื่องที่ 5', status: 'offline', capacity: 0, lastUpdate: '3 ชั่วโมงที่แล้ว' },
        'parking': { name: 'เครื่องที่ 6', status: 'active', capacity: 78, lastUpdate: '1 นาทีที่แล้ว' }
      };
      
      // Add click handlers for machine points
      machinePoints.forEach(point => {
        point.addEventListener('click', function() {
          const location = this.getAttribute('data-location');
          const data = machineData[location];
          
          if (data) {
            showMachineDetails(data, this);
          }
        });
        
        // Add hover effects
        point.addEventListener('mouseenter', function() {
          const location = this.getAttribute('data-location');
          const data = machineData[location];
          
          if (data) {
            showMachineTooltip(data, this);
          }
        });
        
        point.addEventListener('mouseleave', function() {
          hideMachineTooltip();
        });
      });
      
      // Update summary statistics
      function updateSummaryStats() {
        const machines = Object.values(machineData);
        const activeMachines = machines.filter(m => m.status === 'active').length;
        const maintenanceMachines = machines.filter(m => m.status === 'maintenance').length;
        const offlineMachines = machines.filter(m => m.status === 'offline').length;
        const totalCapacity = Math.round(machines.filter(m => m.status === 'active').reduce((sum, m) => sum + m.capacity, 0) / activeMachines);
        
        document.getElementById('active-machines').textContent = activeMachines;
        document.getElementById('maintenance-machines').textContent = maintenanceMachines;
        document.getElementById('offline-machines').textContent = offlineMachines;
        document.getElementById('total-capacity').textContent = totalCapacity + '%';
      }
      
      // Show machine details modal
      function showMachineDetails(data, element) {
        const modal = document.createElement('div');
        modal.className = 'machine-modal';
        modal.innerHTML = `
          <div class="machine-modal-content">
            <div class="machine-modal-header">
              <h3>${data.name}</h3>
              <button class="machine-modal-close">&times;</button>
            </div>
            <div class="machine-modal-body">
              <div class="machine-detail-item">
                <span class="detail-label">สถานะ:</span>
                <span class="detail-value status-${data.status}">
                  ${data.status === 'active' ? 'ใช้งานได้ปกติ' : 
                    data.status === 'maintenance' ? 'อยู่ระหว่างปรับปรุง' : 'ไม่สามารถใช้งานได้'}
                </span>
              </div>
              <div class="machine-detail-item">
                <span class="detail-label">ความจุ:</span>
                <span class="detail-value">${data.capacity}%</span>
              </div>
              <div class="machine-detail-item">
                <span class="detail-label">อัปเดตล่าสุด:</span>
                <span class="detail-value">${data.lastUpdate}</span>
              </div>
              ${data.status === 'active' ? `
                <div class="machine-capacity-bar">
                  <div class="capacity-fill" style="width: ${data.capacity}%"></div>
                </div>
              ` : ''}
            </div>
          </div>
        `;
        
        document.body.appendChild(modal);
        
        // Add modal styles
        const modalStyles = `
          .machine-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            animation: fadeIn 0.3s ease;
          }
          
          .machine-modal-content {
            background: var(--card);
            border-radius: var(--radius);
            padding: 0;
            max-width: 400px;
            width: 90%;
            box-shadow: var(--shadow-colorful);
            animation: slideIn 0.3s ease;
          }
          
          .machine-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid rgba(167, 139, 250, 0.1);
          }
          
          .machine-modal-header h3 {
            margin: 0;
            color: var(--text);
          }
          
          .machine-modal-close {
            background: none;
            border: none;
            font-size: 24px;
            color: var(--muted);
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s ease;
          }
          
          .machine-modal-close:hover {
            background: rgba(167, 139, 250, 0.1);
            color: var(--text);
          }
          
          .machine-modal-body {
            padding: 20px;
          }
          
          .machine-detail-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            padding: 8px 0;
          }
          
          .detail-label {
            font-weight: 600;
            color: var(--muted);
          }
          
          .detail-value {
            font-weight: 500;
            color: var(--text);
          }
          
          .detail-value.status-active {
            color: #22c55e;
          }
          
          .detail-value.status-maintenance {
            color: #fbbf24;
          }
          
          .detail-value.status-offline {
            color: #ef4444;
          }
          
          .machine-capacity-bar {
            width: 100%;
            height: 8px;
            background: rgba(167, 139, 250, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 16px;
          }
          
          .capacity-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--brand), var(--brand-2));
            border-radius: 4px;
            transition: width 1s ease;
          }
          
          @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
          }
          
          @keyframes slideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
          }
        `;
        
        if (!document.getElementById('machine-modal-styles')) {
          const styleSheet = document.createElement('style');
          styleSheet.id = 'machine-modal-styles';
          styleSheet.textContent = modalStyles;
          document.head.appendChild(styleSheet);
        }
        
        // Close modal handlers
        modal.addEventListener('click', function(e) {
          if (e.target === modal) {
            document.body.removeChild(modal);
          }
        });
        
        modal.querySelector('.machine-modal-close').addEventListener('click', function() {
          document.body.removeChild(modal);
        });
        
        // ESC key to close
        document.addEventListener('keydown', function(e) {
          if (e.key === 'Escape') {
            if (document.body.contains(modal)) {
              document.body.removeChild(modal);
            }
          }
        });
      }
      
      // Show machine tooltip
      function showMachineTooltip(data, element) {
        const tooltip = document.createElement('div');
        tooltip.className = 'machine-tooltip';
        tooltip.innerHTML = `
          <div class="tooltip-content">
            <strong>${data.name}</strong><br>
            <span class="tooltip-status status-${data.status}">
              ${data.status === 'active' ? 'ออนไลน์' : 
                data.status === 'maintenance' ? 'ปรับปรุง' : 'ออฟไลน์'}
            </span><br>
            <small>ความจุ: ${data.capacity}%</small>
          </div>
        `;
        
        document.body.appendChild(tooltip);
        
        // Position tooltip
        const rect = element.getBoundingClientRect();
        tooltip.style.position = 'fixed';
        tooltip.style.left = rect.left + rect.width / 2 + 'px';
        tooltip.style.top = rect.top - 10 + 'px';
        tooltip.style.transform = 'translateX(-50%) translateY(-100%)';
        tooltip.style.zIndex = '1001';
        
        // Add tooltip styles
        const tooltipStyles = `
          .machine-tooltip {
            background: var(--card);
            border: 1px solid rgba(167, 139, 250, 0.2);
            border-radius: 8px;
            padding: 12px;
            box-shadow: var(--shadow-soft);
            font-size: 12px;
            pointer-events: none;
            animation: tooltipFadeIn 0.2s ease;
          }
          
          .tooltip-content {
            text-align: center;
            color: var(--text);
          }
          
          .tooltip-status.status-active {
            color: #22c55e;
          }
          
          .tooltip-status.status-maintenance {
            color: #fbbf24;
          }
          
          .tooltip-status.status-offline {
            color: #ef4444;
          }
          
          @keyframes tooltipFadeIn {
            from { opacity: 0; transform: translateX(-50%) translateY(-100%) scale(0.8); }
            to { opacity: 1; transform: translateX(-50%) translateY(-100%) scale(1); }
          }
        `;
        
        if (!document.getElementById('machine-tooltip-styles')) {
          const styleSheet = document.createElement('style');
          styleSheet.id = 'machine-tooltip-styles';
          styleSheet.textContent = tooltipStyles;
          document.head.appendChild(styleSheet);
        }
      }
      
      // Hide machine tooltip
      function hideMachineTooltip() {
        const tooltip = document.querySelector('.machine-tooltip');
        if (tooltip) {
          document.body.removeChild(tooltip);
        }
      }
      
      // Initialize summary stats
      updateSummaryStats();
      
      // Simulate real-time updates
      setInterval(() => {
        // Randomly update machine capacities
        Object.keys(machineData).forEach(key => {
          const machine = machineData[key];
          if (machine.status === 'active') {
            // Simulate capacity changes
            const change = (Math.random() - 0.5) * 10;
            machine.capacity = Math.max(0, Math.min(100, machine.capacity + change));
            machine.capacity = Math.round(machine.capacity);
          }
        });
        
        updateSummaryStats();
      }, 30000); // Update every 30 seconds
    });

    // Modal functionality for tips
    const tipItems = document.querySelectorAll('.tip-item');
    const modal = document.getElementById('tipModal');
    
    // Tip data for modal content
    const tipData = {
      'reusable-bottles': {
        icon: '🚰',
        title: 'ใช้ขวดน้ำที่นำกลับมาใช้ได้',
        examples: [
          {
            title: 'ขวดสแตนเลส',
            description: 'ขวดน้ำสแตนเลสคุณภาพดี ใช้ได้นาน ไม่มีสารเคมีปนเปื้อน และรักษาอุณหภูมิได้ดี'
          },
          {
            title: 'ขวดแก้ว',
            description: 'ขวดแก้วปลอดภัย ไม่มีสารพิษ ทำความสะอาดง่าย และรีไซเคิลได้ 100%'
          },
          {
            title: 'ขวดพลาสติก BPA-Free',
            description: 'ขวดพลาสติกที่ปลอดภัย ไม่มี BPA เบา พกพาสะดวก และราคาประหยัด'
          }
        ],
        benefits: [
          'ลดขยะพลาสติกใช้ครั้งเดียวได้ปีละ 1,460 ใบ',
          'ประหยัดเงินซื้อน้ำดื่มได้ปีละ 15,000-20,000 บาท',
          'ลดการปล่อยก๊าซเรือนกระจกจากการผลิตขวดพลาสติก',
          'ปกป้องสุขภาพจากสารเคมีในพลาสติก'
        ]
      },
      'waste-separation': {
        icon: '🗂️',
        title: 'แยกขยะให้ถูกประเภท',
        examples: [
          {
            title: 'ขยะรีไซเคิล',
            description: 'กระดาษ พลาสติก แก้ว โลหะ - ล้างให้สะอาดก่อนทิ้ง แยกตามประเภทวัสดุ'
          },
          {
            title: 'ขยะอินทรีย์',
            description: 'เศษอาหาร ใบไม้ เปลือกผลไม้ - สามารถนำไปทำปุ่ยหมักหรือคอมโพสต์'
          },
          {
            title: 'ขยะอันตราย',
            description: 'ถ่านไฟฉาย หลอดไฟ ยา สารเคมี - ต้องส่งไปจุดรับพิเศษเท่านั้น'
          }
        ],
        benefits: [
          'เพิ่มประสิทธิภาพการรีไซเคิลได้ถึง 80%',
          'ลดต้นทุนการจัดการขยะของชุมชน',
          'ป้องกันการปนเปื้อนของสารพิษในสิ่งแวดล้อม',
          'สร้างรายได้จากการขายขยะรีไซเคิล'
        ]
      },
      'reduce-plastic': {
        icon: '🌱',
        title: 'ลดการใช้พลาสติกใช้ครั้งเดียว',
        examples: [
          {
            title: 'ถุงผ้า',
            description: 'ใช้ถุงผ้าแทนถุงพลาสติก ทนทาน ซักได้ และใช้ซ้ำได้หลายปี'
          },
          {
            title: 'กล่องอาหารสแตนเลส',
            description: 'ใช้กล่องอาหารสแตนเลสแทนโฟมหรือพลาสติก ปลอดภัย ทำความสะอาดง่าย'
          },
          {
            title: 'หลอดสแตนเลส/ไผ่',
            description: 'ใช้หลอดที่ใช้ซ้ำได้แทนหลอดพลาสติก มีหลายขนาด พกพาสะดวก'
          }
        ],
        benefits: [
          'ลดขยะพลาสติกในครัวเรือนได้ 70%',
          'ประหยัดค่าใช้จ่ายจากการซื้อของใช้ครั้งเดียว',
          'ลดการปล่อยไมโครพลาสติกสู่สิ่งแวดล้อม',
          'เป็นแบบอย่างที่ดีให้คนรอบข้าง'
        ]
      },
      'support-recycled': {
        icon: '♻️',
        title: 'สนับสนุนผลิตภัณฑ์รีไซเคิล',
        examples: [
          {
            title: 'เสื้อผ้าจากขวดพลาสติก',
            description: 'เสื้อผ้าที่ทำจากขวดพลาสติกรีไซเคิล นุ่ม ระบายอากาศดี และทนทาน'
          },
          {
            title: 'กระดาษรีไซเคิล',
            description: 'สมุด กระดาษ ที่ทำจากกระดาษเก่า ช่วยลดการตัดไม้ทำลายป่า'
          },
          {
            title: 'เฟอร์นิเจอร์จากวัสดุรีไซเคิล',
            description: 'โต๊ะ เก้าอี้ ที่ทำจากพลาสติกหรือไม้รีไซเคิล ทนทาน สวยงาม'
          }
        ],
        benefits: [
          'สร้างตลาดสำหรับผลิตภัณฑ์รีไซเคิล',
          'ลดการใช้ทรัพยากรธรรมชาติในการผลิตสินค้าใหม่',
          'สนับสนุนเศรษฐกิจหมุนเวียน (Circular Economy)',
          'ช่วยสร้างงานในอุตสาหกรรมรีไซเคิล'
        ]
      }
    };

    // Function to open tip modal (called by onclick)
    function openTipModal(tipType) {
      const modal = document.getElementById('tipModal');
      if (!modal) return;
      
      const modalIcon = modal.querySelector('.tip-modal-icon');
      const modalTitle = modal.querySelector('.tip-modal-title');
      const modalExamples = modal.querySelector('.tip-modal-examples');
      
      const data = tipData[tipType];
      if (data) {
        modalIcon.textContent = data.icon;
        modalTitle.textContent = data.title;
        
        modalExamples.innerHTML = `
          <div class="tip-modal-examples">
            ${data.examples.map(example => `
              <div class="tip-example">
                <h4>${example.title}</h4>
                <p>${example.description}</p>
              </div>
            `).join('')}
          </div>
          <div class="tip-benefits">
            <h4>🌟 ประโยชน์ที่ได้รับ</h4>
            <ul>
              ${data.benefits.map(benefit => `<li>${benefit}</li>`).join('')}
            </ul>
          </div>
        `;
        
        modal.style.display = 'block';
        document.body.style.overflow = 'hidden';
      }
    }
    
    if (modal) {
      const modalClose = modal.querySelector('.tip-modal-close');
      const modalIcon = modal.querySelector('.tip-modal-icon');
      const modalTitle = modal.querySelector('.tip-modal-title');
      const modalExamples = modal.querySelector('.tip-modal-examples');

    tipItems.forEach(item => {
      item.addEventListener('click', () => {
        const tipType = item.dataset.tip;
        const data = tipData[tipType];
        
        if (data) {
          modalIcon.textContent = data.icon;
          modalTitle.textContent = data.title;
          
          modalExamples.innerHTML = `
            <div class="tip-modal-examples">
              ${data.examples.map(example => `
                <div class="tip-example">
                  <h4>${example.title}</h4>
                  <p>${example.description}</p>
                </div>
              `).join('')}
            </div>
            <div class="tip-benefits">
              <h4>🌟 ประโยชน์ที่ได้รับ</h4>
              <ul>
                ${data.benefits.map(benefit => `<li>${benefit}</li>`).join('')}
              </ul>
            </div>
          `;
          
          modal.style.display = 'block';
          document.body.style.overflow = 'hidden';
        }
      });
    });

    modalClose.addEventListener('click', () => {
      modal.style.display = 'none';
      document.body.style.overflow = 'auto';
    });

    window.addEventListener('click', (e) => {
       if (e.target === modal) {
         modal.style.display = 'none';
         document.body.style.overflow = 'auto';
       }
   });
  } // Close the if (modal) block
  
  // Function to scroll to a specific section
  function scrollToSection(sectionId) {
    const element = document.getElementById(sectionId);
    if (element) {
      element.scrollIntoView({
        behavior: 'smooth',
        block: 'start'
      });
    }
  }
</script>

  <!-- Modal for Tips -->
  <div id="tipModal" class="tip-modal">
    <div class="tip-modal-content">
      <span class="tip-modal-close">&times;</span>
      <div class="tip-modal-header">
        <div class="tip-modal-icon">♻️</div>
        <h2 class="tip-modal-title">เคล็ดลับการอนุรักษ์</h2>
      </div>
      <div class="tip-modal-examples">
        <!-- Content will be populated by JavaScript -->
      </div>
    </div>
  </div>



  <style>
    /* Tip Modal Styles */
    .tip-modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(5px);
      animation: fadeIn 0.3s ease;
    }

    .tip-modal-content {
      background: var(--card);
      margin: 5% auto;
      padding: 0;
      border-radius: var(--radius);
      width: 90%;
      max-width: 600px;
      max-height: 80vh;
      overflow-y: auto;
      box-shadow: var(--shadow-colorful);
      animation: slideIn 0.3s ease;
      position: relative;
    }

    .tip-modal-close {
      position: absolute;
      top: 15px;
      right: 20px;
      color: var(--muted);
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
      z-index: 1001;
      transition: color 0.3s ease;
    }

    .tip-modal-close:hover {
      color: var(--text);
    }

    .tip-modal-header {
      background: linear-gradient(135deg, var(--brand), var(--brand-2));
      color: white;
      padding: 30px;
      border-radius: var(--radius) var(--radius) 0 0;
      text-align: center;
    }

    .tip-modal-icon {
      font-size: 48px;
      margin-bottom: 15px;
      display: block;
    }

    .tip-modal-title {
      margin: 0;
      font-size: 24px;
      font-weight: 600;
    }

    .tip-modal-examples {
      padding: 30px;
    }

    .tip-example {
      background: rgba(167, 139, 250, 0.05);
      border: 1px solid rgba(167, 139, 250, 0.1);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
      transition: all 0.3s ease;
    }

    .tip-example:hover {
      background: rgba(167, 139, 250, 0.1);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(167, 139, 250, 0.2);
    }

    .tip-example h4 {
      color: var(--brand);
      margin: 0 0 10px 0;
      font-size: 18px;
      font-weight: 600;
    }

    .tip-example p {
      color: var(--text);
      margin: 0;
      line-height: 1.6;
    }

    .tip-benefits {
      margin-top: 30px;
      padding-top: 20px;
      border-top: 1px solid rgba(167, 139, 250, 0.1);
    }

    .tip-benefits h4 {
      color: var(--brand);
      margin: 0 0 15px 0;
      font-size: 20px;
      font-weight: 600;
    }

    .tip-benefits ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .tip-benefits li {
      background: rgba(34, 197, 94, 0.1);
      border-left: 4px solid #22c55e;
      padding: 12px 16px;
      margin-bottom: 10px;
      border-radius: 0 8px 8px 0;
      color: var(--text);
      line-height: 1.5;
      transition: all 0.3s ease;
    }

    .tip-benefits li:hover {
      background: rgba(34, 197, 94, 0.15);
      transform: translateX(5px);
    }

    .clickable-tip {
      cursor: pointer;
      transition: all 0.3s ease;
      border-radius: 8px;
      padding: 8px;
    }

    .clickable-tip:hover {
      background: rgba(167, 139, 250, 0.1);
      transform: translateX(5px);
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes slideIn {
      from { transform: translateY(-50px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    @media (max-width: 768px) {
      .tip-modal-content {
        width: 95%;
        margin: 10% auto;
        max-height: 85vh;
      }

      .tip-modal-header {
        padding: 20px;
      }

      .tip-modal-icon {
        font-size: 36px;
      }

      .tip-modal-title {
        font-size: 20px;
      }

      .tip-modal-examples {
        padding: 20px;
      }

      .tip-example {
        padding: 15px;
      }
    }

    .back-to-top-btn-inline {
      width: 48px;
      height: 48px;
      display: grid;
      place-items: center;
      align-content: center;
      cursor: pointer;
      text-decoration: none;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
    }

    .back-to-top-btn-inline.show {
      opacity: 1;
      visibility: visible;
    }

    .btn-flip {
      opacity: 1;
      outline: 0;
      color: #fff;
      line-height: 40px;
      position: relative;
      text-align: center;
      letter-spacing: 1px;
      display: inline-block;
      text-decoration: none;
      font-family: 'Open Sans', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      text-transform: uppercase;
      border-radius: 8px;
      font-size: 12px;
      font-weight: 600;
    }

    .btn-flip:hover:after {
      opacity: 1;
      transform: translateY(0) rotateX(0);
    }

    .btn-flip:hover:before {
      opacity: 0;
      transform: translateY(50%) rotateX(90deg);
    }

    .btn-flip:after {
      top: 0;
      left: 0;
      opacity: 0;
      width: 100%;
      color: #fff;
      display: block;
      transition: 0.5s;
      position: absolute;
      background: linear-gradient(135deg, #2c2c2c, #000000);
      content: attr(data-back);
      transform: translateY(-50%) rotateX(90deg);
      border-radius: 8px;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
    }

    .btn-flip:before {
      top: 0;
      left: 0;
      opacity: 1;
      color: #fff;
      display: block;
      padding: 0 15px;
      line-height: 40px;
      transition: 0.5s;
      position: relative;
      background: linear-gradient(135deg, #000000, #2c2c2c);
      content: attr(data-front);
      transform: translateY(0) rotateX(0);
      border-radius: 8px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    }

    @media (max-width: 768px) {
      .back-to-top-btn-inline {
        width: 40px;
        height: 40px;
      }
      
      .btn-flip {
        line-height: 35px;
        font-size: 11px;
      }
      
      .btn-flip:before {
        line-height: 35px;
        padding: 0 10px;
      }
    }
  </style>

  <script>
    // Back to Top functionality
    function scrollToTop() {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    }

    // Show/hide back to top button based on scroll position
    window.addEventListener('scroll', function() {
      const backToTopBtn = document.getElementById('backToTopBtn');
      if (window.pageYOffset > 0) {
        backToTopBtn.classList.add('show');
      } else {
        backToTopBtn.classList.remove('show');
      }
    });

    // Image Modal Functions
    function openImageModal(imageSrc, imageAlt) {
      const modal = document.getElementById('imageModal');
      const modalImg = document.getElementById('modalImage');
      const caption = document.getElementById('modalCaption');
      
      modal.style.display = 'block';
      modalImg.src = imageSrc;
      caption.textContent = imageAlt;
      document.body.style.overflow = 'hidden';
    }

    function closeImageModal() {
      const modal = document.getElementById('imageModal');
      modal.style.display = 'none';
      document.body.style.overflow = 'auto';
    }

    // Close modal when clicking outside the image
    window.onclick = function(event) {
      const modal = document.getElementById('imageModal');
      if (event.target === modal) {
        closeImageModal();
      }
    }

    // Close modal with Escape key
    document.addEventListener('keydown', function(event) {
      if (event.key === 'Escape') {
        closeImageModal();
        closeEcoInfoModal();
      }
    });

    // Eco Information Modal Functions
    function openEcoInfoModal(type) {
      const modal = document.getElementById('ecoInfoModal');
      const title = document.getElementById('ecoModalTitle');
      const content = document.getElementById('ecoModalContent');
      
      const ecoData = {
        world: {
          title: '🌎 ขวดที่แยกวันนี้ คือ โลกที่สดใสในวันหน้า',
          content: `
            <div class="eco-info-section">
              <h4>🌍 ผลกระทบต่อโลก</h4>
              <ul>
                <li><strong>ลดขยะพลาสติก:</strong> ขวดพลาสติก 1 ใบใช้เวลาย่อยสลายถึง 450 ปี</li>
                <li><strong>ประหยัดพลังงาน:</strong> การรีไซเคิลใช้พลังงานน้อยกว่าการผลิตใหม่ 60%</li>
                <li><strong>ลดก๊าซเรือนกระจก:</strong> การรีไซเคิล 1 ตัน ลดการปล่อย CO2 ได้ 2 ตัน</li>
                <li><strong>อนุรักษ์ทรัพยากร:</strong> ลดการใช้น้ำมันดิบในการผลิตพลาสติกใหม่</li>
              </ul>
            </div>
            <div class="eco-info-section">
              <h4>📊 สถิติที่น่าสนใจ</h4>
              <div class="eco-stats">
                <div class="eco-stat-item">
                  <span class="eco-number">8 ล้านตัน</span>
                  <span class="eco-label">ขยะพลาสติกลงสู่มหาสมุทรทุกปี</span>
                </div>
                <div class="eco-stat-item">
                  <span class="eco-number">91%</span>
                  <span class="eco-label">ของพลาสติกไม่ได้รับการรีไซเคิล</span>
                </div>
                <div class="eco-stat-item">
                  <span class="eco-number">1 ล้านปี</span>
                  <span class="eco-label">เวลาที่ธรรมชาติต้องใช้ฟื้นฟูจากมลพิษพลาสติก</span>
                </div>
              </div>
            </div>
          `
        },
        recycle: {
          title: '♻️ รักษ์โลกง่ายๆ เริ่มต้นที่การแยกขวด',
          content: `
            <div class="eco-info-section">
              <h4>🔄 กระบวนการรีไซเคิล</h4>
              <div class="recycle-process">
                <div class="process-step">
                  <div class="step-icon">1️⃣</div>
                  <div class="step-content">
                    <h5>เก็บและแยก</h5>
                    <p>แยกขวดพลาสติกออกจากขยะทั่วไป ล้างให้สะอาด</p>
                  </div>
                </div>
                <div class="process-step">
                  <div class="step-icon">2️⃣</div>
                  <div class="step-content">
                    <h5>ขนส่งและคัดแยก</h5>
                    <p>นำส่งไปยังโรงงานรีไซเคิล คัดแยกตามประเภทพลาสติก</p>
                  </div>
                </div>
                <div class="process-step">
                  <div class="step-icon">3️⃣</div>
                  <div class="step-content">
                    <h5>หลอมและขึ้นรูป</h5>
                    <p>หลอมพลาสติกและขึ้นรูปเป็นผลิตภัณฑ์ใหม่</p>
                  </div>
                </div>
                <div class="process-step">
                  <div class="step-icon">4️⃣</div>
                  <div class="step-content">
                    <h5>ผลิตภัณฑ์ใหม่</h5>
                    <p>กลายเป็นเสื้อผ้า เฟอร์นิเจอร์ หรือขวดใหม่</p>
                  </div>
                </div>
              </div>
            </div>
            <div class="eco-info-section">
              <h4>💡 เทคนิคการแยกขวดที่ถูกต้อง</h4>
              <ul>
                <li>ล้างขวดให้สะอาดก่อนทิ้ง</li>
                <li>ถอดฝาขวดและฉลากออก (ถ้าทำได้)</li>
                <li>ไม่บีบขวดให้แบน เพื่อง่ายต่อการคัดแยก</li>
                <li>แยกตามสัญลักษณ์รีไซเคิล (PET, HDPE, etc.)</li>
              </ul>
            </div>
          `
        },
        participate: {
          title: '🌱 ร่วมเป็นส่วนหนึ่งในการดูแลสิ่งแวดล้อม',
          content: `
            <div class="eco-info-section">
              <h4>🤝 วิธีการมีส่วนร่วม</h4>
              <div class="participation-ways">
                <div class="participation-item">
                  <div class="participation-icon">🏠</div>
                  <div class="participation-content">
                    <h5>ที่บ้าน</h5>
                    <ul>
                      <li>แยกขยะรีไซเคิลจากขยะทั่วไป</li>
                      <li>ลดการใช้พลาสติกใช้ครั้งเดียว</li>
                      <li>ใช้ขวดน้ำส่วนตัวแทนขวดพลาสติก</li>
                      <li>ซื้อผลิตภัณฑ์จากวัสดุรีไซเคิล</li>
                    </ul>
                  </div>
                </div>
                <div class="participation-item">
                  <div class="participation-icon">🏫</div>
                  <div class="participation-content">
                    <h5>ที่โรงเรียน</h5>
                    <ul>
                      <li>ใช้ระบบ EcoBottle ในการแยกขวด</li>
                      <li>รณรงค์เพื่อนๆ ให้ร่วมรีไซเคิล</li>
                      <li>จัดกิจกรรมวันสิ่งแวดล้อม</li>
                      <li>สร้างนิสัยการอนุรักษ์ในชีวิตประจำวัน</li>
                    </ul>
                  </div>
                </div>
                <div class="participation-item">
                  <div class="participation-icon">🌍</div>
                  <div class="participation-content">
                    <h5>ในชุมชน</h5>
                    <ul>
                      <li>เข้าร่วมกิจกรรมรีไซเคิลในชุมชน</li>
                      <li>สนับสนุนธุรกิจที่เป็นมิตรกับสิ่งแวดล้อม</li>
                      <li>แบ่งปันความรู้เรื่องการรีไซเคิล</li>
                      <li>เป็นแบบอย่างที่ดีให้คนรอบข้าง</li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
            <div class="eco-info-section">
              <h4>🏆 ผลประโยชน์ที่ได้รับ</h4>
              <div class="benefits-grid">
                <div class="benefit-item">
                  <span class="benefit-icon">💚</span>
                  <span class="benefit-text">ความภาคภูมิใจในการช่วยโลก</span>
                </div>
                <div class="benefit-item">
                  <span class="benefit-icon">🎯</span>
                  <span class="benefit-text">คะแนนและรางวัลจากระบบ</span>
                </div>
                <div class="benefit-item">
                  <span class="benefit-icon">🌟</span>
                  <span class="benefit-text">เป็นแบบอย่างที่ดีในสังคม</span>
                </div>
                <div class="benefit-item">
                  <span class="benefit-icon">🌈</span>
                  <span class="benefit-text">สร้างอนาคตที่ยั่งยืน</span>
                </div>
              </div>
            </div>
          `
        },
        value: {
          title: '💧 ทุกขวดมีค่า เมื่อเรารู้จักจัดการ',
          content: `
            <div class="eco-info-section">
              <h4>💰 มูลค่าทางเศรษฐกิจ</h4>
              <div class="value-stats">
                <div class="value-item">
                  <div class="value-number">15-20 บาท</div>
                  <div class="value-label">ราคาขวด PET 1 กิโลกรัม</div>
                </div>
                <div class="value-item">
                  <div class="value-number">50,000 ล้านบาท</div>
                  <div class="value-label">มูลค่าตลาดรีไซเคิลไทยต่อปี</div>
                </div>
                <div class="value-item">
                  <div class="value-number">300,000 คน</div>
                  <div class="value-label">จำนวนคนที่ทำงานในอุตสาหกรรมรีไซเคิล</div>
                </div>
              </div>
            </div>
            <div class="eco-info-section">
              <h4>🔄 วงจรมูลค่าของขวด</h4>
              <div class="value-cycle">
                <div class="cycle-step">
                  <div class="cycle-icon">🥤</div>
                  <div class="cycle-content">
                    <h5>ขวดใหม่</h5>
                    <p>ราคา 10-15 บาท</p>
                  </div>
                </div>
                <div class="cycle-arrow">→</div>
                <div class="cycle-step">
                  <div class="cycle-icon">♻️</div>
                  <div class="cycle-content">
                    <h5>ขวดรีไซเคิล</h5>
                    <p>มูลค่า 2-3 บาท</p>
                  </div>
                </div>
                <div class="cycle-arrow">→</div>
                <div class="cycle-step">
                  <div class="cycle-icon">👕</div>
                  <div class="cycle-content">
                    <h5>ผลิตภัณฑ์ใหม่</h5>
                    <p>มูลค่าเพิ่ม 20-50 บาท</p>
                  </div>
                </div>
              </div>
            </div>
            <div class="eco-info-section">
              <h4>🌟 มูลค่าที่ไม่ใช่เงิน</h4>
              <ul>
                <li><strong>สุขภาพ:</strong> ลดมลพิษและโรคจากขยะพลาสติก</li>
                <li><strong>สิ่งแวดล้อม:</strong> ลดการทำลายระบบนิเวศ</li>
                <li><strong>การศึกษา:</strong> สร้างจิตสำนึกรักษ์โลกให้เด็กๆ</li>
                <li><strong>ชุมชน:</strong> สร้างงานและรายได้ให้ชุมชน</li>
                <li><strong>อนาคต:</strong> สร้างโลกที่ยั่งยืนให้คนรุ่นหลัง</li>
              </ul>
            </div>
            <div class="eco-info-section">
              <h4>📈 เป้าหมายการรีไซเคิลของไทย</h4>
              <p>รัฐบาลไทยตั้งเป้าหมายให้มีการรีไซเคิลขยะพลาสติก <strong>100%</strong> ภายในปี 2030 และลดการใช้พลาสติกใช้ครั้งเดียวลง <strong>50%</strong> เพื่อสร้างเศรษฐกิจหมุนเวียนที่ยั่งยืน</p>
            </div>
          `
        }
      };
      
      const data = ecoData[type];
      if (data) {
        title.innerHTML = data.title;
        content.innerHTML = data.content;
        modal.style.display = 'block';
        document.body.style.overflow = 'hidden';
      }
    }

    function closeEcoInfoModal() {
      const modal = document.getElementById('ecoInfoModal');
      modal.style.display = 'none';
      document.body.style.overflow = 'auto';
    }

    // Close eco modal when clicking outside
    window.addEventListener('click', function(event) {
      const ecoModal = document.getElementById('ecoInfoModal');
      if (event.target === ecoModal) {
        closeEcoInfoModal();
      }
    });
  </script>

  <!-- Image Modal -->
  <div id="imageModal" class="image-modal">
    <span class="modal-close" onclick="closeImageModal()">&times;</span>
    <img class="modal-content" id="modalImage">
    <div id="modalCaption" class="modal-caption"></div>
  </div>

  <style>
    .image-modal {
      display: none;
      position: fixed;
      z-index: 9999;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.9);
      backdrop-filter: blur(5px);
    }

    .modal-content {
      margin: auto;
      display: block;
      max-width: 90%;
      max-height: 90%;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      border-radius: 12px;
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
      animation: modalZoom 0.3s ease-out;
    }

    @keyframes modalZoom {
      from {
        transform: translate(-50%, -50%) scale(0.7);
        opacity: 0;
      }
      to {
        transform: translate(-50%, -50%) scale(1);
        opacity: 1;
      }
    }

    .modal-close {
      position: absolute;
      top: 20px;
      right: 35px;
      color: #fff;
      font-size: 40px;
      font-weight: bold;
      cursor: pointer;
      z-index: 10000;
      transition: color 0.3s ease;
    }

    .modal-close:hover {
      color: #ff6b6b;
    }

    .modal-caption {
      margin: auto;
      display: block;
      width: 80%;
      max-width: 700px;
      text-align: center;
      color: #ccc;
      padding: 20px 0;
      font-size: 18px;
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.7);
      border-radius: 8px;
      padding: 10px 20px;
    }

    @media (max-width: 768px) {
      .modal-content {
        max-width: 95%;
        max-height: 85%;
      }
      
      .modal-close {
        top: 10px;
        right: 20px;
        font-size: 30px;
      }
      
      .modal-caption {
        font-size: 16px;
        width: 90%;
        bottom: 10px;
      }
    }
  </style>

  <!-- Eco Information Modal -->
  <div id="ecoInfoModal" class="eco-modal">
    <div class="eco-modal-content">
      <div class="eco-modal-header">
        <h2 id="ecoModalTitle"></h2>
        <span class="eco-close" onclick="closeEcoInfoModal()">&times;</span>
      </div>
      <div class="eco-modal-body">
        <div id="ecoModalContent"></div>
      </div>
    </div>
  </div>

  <style>
    /* Eco Information Modal Styles */
    .eco-modal {
      display: none;
      position: fixed;
      z-index: 10000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(5px);
      animation: fadeIn 0.3s ease-out;
    }

    .eco-modal-content {
      background-color: #ffffff;
      margin: 2% auto;
      padding: 0;
      border-radius: 20px;
      width: 90%;
      max-width: 800px;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      animation: slideIn 0.3s ease-out;
      position: relative;
    }

    .eco-modal-header {
      background: linear-gradient(135deg, #4CAF50, #2E7D32);
      color: white;
      padding: 20px 30px;
      border-radius: 20px 20px 0 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .eco-modal-header h2 {
      margin: 0;
      font-size: 1.5rem;
      font-weight: 600;
    }

    .eco-close {
      color: white;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      padding: 5px 10px;
      border-radius: 50%;
    }

    .eco-close:hover {
      background-color: rgba(255, 255, 255, 0.2);
      transform: scale(1.1);
    }

    .eco-modal-body {
      padding: 30px;
      line-height: 1.6;
    }

    .eco-info-section {
      margin-bottom: 30px;
    }

    .eco-info-section h4 {
      color: #2E7D32;
      font-size: 1.3rem;
      margin-bottom: 15px;
      border-bottom: 2px solid #E8F5E8;
      padding-bottom: 8px;
    }

    .eco-info-section ul {
      list-style: none;
      padding: 0;
    }

    .eco-info-section li {
      margin-bottom: 10px;
      padding-left: 20px;
      position: relative;
    }

    .eco-info-section li:before {
      content: "🌱";
      position: absolute;
      left: 0;
    }

    .eco-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-top: 15px;
    }

    .eco-stat-item {
      background: linear-gradient(135deg, #E8F5E8, #F1F8E9);
      padding: 20px;
      border-radius: 15px;
      text-align: center;
      border-left: 4px solid #4CAF50;
    }

    .eco-number {
      display: block;
      font-size: 1.8rem;
      font-weight: bold;
      color: #2E7D32;
      margin-bottom: 5px;
    }

    .eco-label {
      font-size: 0.9rem;
      color: #555;
    }

    .recycle-process {
      display: grid;
      gap: 20px;
      margin-top: 15px;
    }

    .process-step {
      display: flex;
      align-items: flex-start;
      gap: 15px;
      padding: 20px;
      background: #F8F9FA;
      border-radius: 15px;
      border-left: 4px solid #4CAF50;
    }

    .step-icon {
      font-size: 2rem;
      min-width: 50px;
    }

    .step-content h5 {
      margin: 0 0 8px 0;
      color: #2E7D32;
      font-size: 1.1rem;
    }

    .step-content p {
      margin: 0;
      color: #666;
    }

    .participation-ways {
      display: grid;
      gap: 25px;
      margin-top: 15px;
    }

    .participation-item {
      display: flex;
      gap: 20px;
      padding: 25px;
      background: #F8F9FA;
      border-radius: 15px;
      border-left: 4px solid #4CAF50;
    }

    .participation-icon {
      font-size: 2.5rem;
      min-width: 60px;
    }

    .participation-content h5 {
      margin: 0 0 15px 0;
      color: #2E7D32;
      font-size: 1.2rem;
    }

    .participation-content ul {
      margin: 0;
    }

    .benefits-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-top: 15px;
    }

    .benefit-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 15px;
      background: linear-gradient(135deg, #E8F5E8, #F1F8E9);
      border-radius: 10px;
      border-left: 3px solid #4CAF50;
    }

    .benefit-icon {
      font-size: 1.5rem;
    }

    .benefit-text {
      font-size: 0.9rem;
      color: #555;
    }

    .value-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-top: 15px;
    }

    .value-item {
      background: linear-gradient(135deg, #E8F5E8, #F1F8E9);
      padding: 25px;
      border-radius: 15px;
      text-align: center;
      border-left: 4px solid #4CAF50;
    }

    .value-number {
      display: block;
      font-size: 1.6rem;
      font-weight: bold;
      color: #2E7D32;
      margin-bottom: 8px;
    }

    .value-label {
      font-size: 0.9rem;
      color: #555;
    }

    .value-cycle {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
      margin-top: 20px;
      flex-wrap: wrap;
    }

    .cycle-step {
      text-align: center;
      padding: 20px;
      background: #F8F9FA;
      border-radius: 15px;
      border: 2px solid #E0E0E0;
      min-width: 120px;
    }

    .cycle-icon {
      font-size: 2rem;
      margin-bottom: 10px;
      display: block;
    }

    .cycle-content h5 {
      margin: 0 0 5px 0;
      color: #2E7D32;
      font-size: 1rem;
    }

    .cycle-content p {
      margin: 0;
      color: #666;
      font-size: 0.9rem;
    }

    .cycle-arrow {
      font-size: 1.5rem;
      color: #4CAF50;
      font-weight: bold;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes slideIn {
      from {
        transform: translateY(-50px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    /* Mobile Responsive */
    @media (max-width: 768px) {
      .eco-modal-content {
        width: 95%;
        margin: 5% auto;
        max-height: 85vh;
      }

      .eco-modal-header {
        padding: 15px 20px;
      }

      .eco-modal-header h2 {
        font-size: 1.2rem;
      }

      .eco-modal-body {
        padding: 20px;
      }

      .eco-stats {
        grid-template-columns: 1fr;
      }

      .participation-item {
        flex-direction: column;
        text-align: center;
      }

      .benefits-grid {
        grid-template-columns: 1fr;
      }

      .value-cycle {
        flex-direction: column;
      }

      .cycle-arrow {
        transform: rotate(90deg);
      }

      .value-stats {
      grid-template-columns: 1fr;
    }
  }

  /* ===== NOTIFICATION SYSTEM STYLES ===== */
  
  .notification-bell {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 1000;
  }
  
  .notification-bell-btn {
    position: relative;
    background: linear-gradient(135deg, var(--brand), var(--brand-dark));
    border: none;
    border-radius: 50%;
    width: 50px;
    height: 50px;
    color: white;
    cursor: pointer;
    box-shadow: 0 4px 20px rgba(16, 185, 129, 0.3);
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .notification-bell-btn:hover {
    transform: scale(1.1);
    box-shadow: 0 6px 25px rgba(16, 185, 129, 0.4);
  }
  
  .notification-bell-btn.has-notifications {
    animation: bellShake 2s infinite;
  }
  
  @keyframes bellShake {
    0%, 50%, 100% { transform: rotate(0deg); }
    10%, 30% { transform: rotate(-10deg); }
    20%, 40% { transform: rotate(10deg); }
  }
  
  .bell-icon {
    font-size: 1.5rem;
  }
  
  .notification-badge {
    position: absolute;
    top: -5px;
    right: -5px;
    background: #ef4444;
    color: white;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    font-size: 0.75rem;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    animation: pulse 2s infinite;
  }
  
  .notification-container {
    position: fixed;
    top: 80px;
    right: 20px;
    width: 380px;
    max-height: 500px;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(20px);
    border-radius: 16px;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    z-index: 999;
    transform: translateY(-20px) scale(0.95);
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
  }
  
  .notification-container.show {
    transform: translateY(0) scale(1);
    opacity: 1;
    visibility: visible;
  }
  
  .notification-header {
    padding: 20px;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  
  .notification-header h3 {
    margin: 0;
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--text-primary);
    display: flex;
    align-items: center;
    gap: 8px;
  }
  
  .notification-actions {
    display: flex;
    gap: 8px;
    align-items: center;
  }
  
  .notification-action-btn {
    background: rgba(16, 185, 129, 0.1);
    border: none;
    border-radius: 8px;
    width: 32px;
    height: 32px;
    color: var(--brand);
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .notification-action-btn:hover {
    background: rgba(16, 185, 129, 0.2);
    transform: scale(1.1);
  }
  
  .notification-close {
    background: rgba(239, 68, 68, 0.1);
    border: none;
    border-radius: 8px;
    width: 32px;
    height: 32px;
    color: #ef4444;
    cursor: pointer;
    font-size: 1.2rem;
    transition: all 0.2s ease;
  }
  
  .notification-close:hover {
    background: rgba(239, 68, 68, 0.2);
    transform: scale(1.1);
  }
  
  .notification-list {
    max-height: 400px;
    overflow-y: auto;
    padding: 10px;
  }
  
  .notification-empty {
    text-align: center;
    padding: 40px 20px;
    color: var(--text-secondary);
  }
  
  .notification-empty-icon {
    font-size: 3rem;
    margin-bottom: 10px;
  }
  
  .notification-item {
    display: flex;
    gap: 12px;
    padding: 15px;
    border-radius: 12px;
    margin-bottom: 8px;
    transition: all 0.2s ease;
    cursor: pointer;
    border: 1px solid transparent;
  }
  
  .notification-item.unread {
    background: rgba(16, 185, 129, 0.05);
    border-color: rgba(16, 185, 129, 0.1);
  }
  
  .notification-item.read {
    background: rgba(0, 0, 0, 0.02);
    opacity: 0.7;
  }
  
  .notification-item:hover {
    background: rgba(16, 185, 129, 0.1);
    transform: translateX(4px);
  }
  
  .notification-item-icon {
    font-size: 1.5rem;
    flex-shrink: 0;
  }
  
  .notification-item-content {
    flex: 1;
  }
  
  .notification-item-title {
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 4px;
  }
  
  .notification-item-message {
    font-size: 0.9rem;
    color: var(--text-secondary);
    margin-bottom: 6px;
  }
  
  .notification-item-time {
    font-size: 0.8rem;
    color: var(--text-muted);
  }
  
  .notification-item-actions {
    display: flex;
    gap: 4px;
    align-items: flex-start;
  }
  
  .notification-mark-read,
  .notification-delete {
    background: none;
    border: none;
    padding: 4px;
    border-radius: 4px;
    cursor: pointer;
    opacity: 0.6;
    transition: all 0.2s ease;
    font-size: 0.9rem;
  }
  
  .notification-mark-read:hover {
    background: rgba(16, 185, 129, 0.1);
    color: var(--brand);
    opacity: 1;
  }
  
  .notification-delete:hover {
    background: rgba(239, 68, 68, 0.1);
    color: #ef4444;
    opacity: 1;
  }
  
  /* Toast Notifications */
  .toast {
    position: fixed;
    top: 20px;
    right: 400px;
    background: white;
    border-radius: 12px;
    padding: 16px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
    border-left: 4px solid var(--brand);
    display: flex;
    gap: 12px;
    align-items: flex-start;
    max-width: 350px;
    z-index: 1001;
    transform: translateX(100%);
    opacity: 0;
    transition: all 0.3s ease;
  }
  
  .toast.show {
    transform: translateX(0);
    opacity: 1;
  }
  
  .toast-success { border-left-color: #10b981; }
  .toast-warning { border-left-color: #f59e0b; }
  .toast-error { border-left-color: #ef4444; }
  .toast-info { border-left-color: #3b82f6; }
  .toast-achievement { border-left-color: #8b5cf6; }
  
  .toast-icon {
    font-size: 1.2rem;
    flex-shrink: 0;
  }
  
  .toast-content {
    flex: 1;
  }
  
  .toast-title {
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 4px;
  }
  
  .toast-message {
    font-size: 0.9rem;
    color: var(--text-secondary);
  }
  
  .toast-close {
    background: none;
    border: none;
    font-size: 1.2rem;
    cursor: pointer;
    opacity: 0.6;
    transition: opacity 0.2s ease;
  }
  
  .toast-close:hover {
    opacity: 1;
  }

  /* ===== ADVANCED SEARCH STYLES ===== */
  
  .search-placeholder {
    text-align: center;
    padding: 40px 20px;
    color: var(--text-secondary);
  }
  
  .search-placeholder-icon {
    font-size: 3rem;
    margin-bottom: 15px;
    opacity: 0.5;
  }
  
  .search-shortcuts {
    margin-top: 20px;
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  
  .search-shortcut {
    font-size: 0.85rem;
    color: var(--text-muted);
  }
  
  .search-shortcut kbd {
    background: rgba(0, 0, 0, 0.1);
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 0.8rem;
    border: 1px solid rgba(0, 0, 0, 0.2);
  }
  
  .search-no-results {
    text-align: center;
    padding: 40px 20px;
    color: var(--text-secondary);
  }
  
  .search-no-results-icon {
    font-size: 3rem;
    margin-bottom: 15px;
    opacity: 0.5;
  }
  
  .search-suggestions {
    margin-top: 20px;
  }
  
  .search-suggestion-tags {
    display: flex;
    gap: 8px;
    justify-content: center;
    flex-wrap: wrap;
    margin-top: 10px;
  }
  
  .search-tag {
    background: rgba(16, 185, 129, 0.1);
    color: var(--brand);
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 0.85rem;
    cursor: pointer;
    transition: all 0.2s ease;
    border: 1px solid rgba(16, 185, 129, 0.2);
  }
  
  .search-tag:hover {
    background: rgba(16, 185, 129, 0.2);
    transform: scale(1.05);
  }
  
  .search-result-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 16px;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
    border: 1px solid transparent;
  }
  
  .search-result-item:hover,
  .search-result-item.selected {
    background: rgba(16, 185, 129, 0.1);
    border-color: rgba(16, 185, 129, 0.2);
    transform: translateX(4px);
  }
  
  .search-result-icon {
    font-size: 1.2rem;
    opacity: 0.7;
  }
  
  .search-result-content {
    flex: 1;
  }
  
  .search-result-title {
    font-weight: 500;
    color: var(--text-primary);
    margin-bottom: 2px;
  }
  
  .search-result-title mark {
    background: rgba(16, 185, 129, 0.3);
    color: var(--brand-dark);
    padding: 1px 2px;
    border-radius: 2px;
  }
  
  .search-result-type {
    font-size: 0.8rem;
    color: var(--text-muted);
  }
  
  .search-result-arrow {
    opacity: 0.5;
    transition: all 0.2s ease;
  }
  
  .search-result-item:hover .search-result-arrow,
  .search-result-item.selected .search-result-arrow {
    opacity: 1;
    transform: translateX(4px);
  }

  /* Mobile Responsive for Notifications */
  @media (max-width: 768px) {
    .notification-bell {
      top: 15px;
      right: 15px;
    }
    
    .notification-bell-btn {
      width: 45px;
      height: 45px;
    }
    
    .notification-container {
      top: 70px;
      right: 15px;
      left: 15px;
      width: auto;
    }
    
    .toast {
      right: 15px;
      left: 15px;
      max-width: none;
    }
  }

  /* Interactive Widgets styles removed. Widgets were deleted from HTML and JS. */
</style>

<script>
// Search System
let searchData = [];

// Initialize search data when page loads
function initializeSearch() {
  searchData = [];
  
  // Get all headings and important elements
  const headings = document.querySelectorAll('h1, h2, h3, h4, h5, h6');
  
  headings.forEach((heading, index) => {
    const text = heading.textContent.trim();
    if (text && text.length > 0) {
      // Determine section based on parent elements
      let section = 'หน้าหลัก';
      const parent = heading.closest('section, .section, [class*="section"]');
      
      if (parent) {
        const classList = parent.className;
        if (classList.includes('hero')) section = 'หน้าแรก';
        else if (classList.includes('features')) section = 'จุดเด่น';
        else if (classList.includes('how-to')) section = 'วิธีใช้งาน';
        else if (classList.includes('simple-ways')) section = 'วิธีช่วยโลก';
        else if (classList.includes('testimonial')) section = 'คำรับรอง';
        else if (classList.includes('recycling')) section = 'ข้อมูลรีไซเคิล';
        else if (classList.includes('leaderboard')) section = 'อันดับ';
        else if (classList.includes('statistics')) section = 'สถิติ';
        else if (classList.includes('map')) section = 'แผนที่';
        else if (classList.includes('game')) section = 'เกม';
        else if (classList.includes('advertisement')) section = 'โฆษณา';
        else if (classList.includes('cta')) section = 'เริ่มต้น';
      }
      
      // Determine icon based on content
      let icon = '📄';
      if (text.includes('ขวด') || text.includes('รีไซเคิล')) icon = '♻️';
      else if (text.includes('คะแนน') || text.includes('แต้ม')) icon = '⭐';
      else if (text.includes('วิธี') || text.includes('ใช้งาน')) icon = '📋';
      else if (text.includes('สถิติ') || text.includes('จำนวน')) icon = '📊';
      else if (text.includes('อันดับ') || text.includes('ผู้เก็บ')) icon = '🏆';
      else if (text.includes('แผนที่') || text.includes('ตำแหน่ง')) icon = '🗺️';
      else if (text.includes('เกม') || text.includes('มินิ')) icon = '🎮';
      else if (text.includes('โลก') || text.includes('สิ่งแวดล้อม')) icon = '🌍';
      else if (text.includes('ติดต่อ')) icon = '📞';
      else if (text.includes('โฆษณา')) icon = '📢';
      
      searchData.push({
        id: `heading-${index}`,
        title: text,
        section: section,
        icon: icon,
        element: heading
      });
    }
  });
  
  console.log('Search data initialized:', searchData.length, 'items');
}

// Open search overlay
function openSearch() {
  const overlay = document.getElementById('searchOverlay');
  const input = document.getElementById('searchInput');
  
  overlay.classList.add('active');
  setTimeout(() => {
    input.focus();
  }, 300);
  
  // Initialize search data if not already done
  if (searchData.length === 0) {
    initializeSearch();
  }
}

// Close search overlay
function closeSearch() {
  const overlay = document.getElementById('searchOverlay');
  const input = document.getElementById('searchInput');
  const results = document.getElementById('searchResults');
  
  overlay.classList.remove('active');
  input.value = '';
  results.innerHTML = `
    <div class="search-placeholder">
      <div class="search-placeholder-icon">📝</div>
      <p>พิมพ์คำค้นหาเพื่อดูผลลัพธ์</p>
    </div>
  `;
}

// Perform search
function performSearch() {
  const query = document.getElementById('searchInput').value.toLowerCase().trim();
  const results = document.getElementById('searchResults');
  
  if (!query) {
    results.innerHTML = `
      <div class="search-placeholder">
        <div class="search-placeholder-icon">📝</div>
        <p>พิมพ์คำค้นหาเพื่อดูผลลัพธ์</p>
      </div>
    `;
    return;
  }
  
  // Filter search data
  const filteredResults = searchData.filter(item => 
    item.title.toLowerCase().includes(query) ||
    item.section.toLowerCase().includes(query)
  );
  
  if (filteredResults.length === 0) {
    results.innerHTML = `
      <div class="search-placeholder">
        <div class="search-placeholder-icon">🔍</div>
        <p>ไม่พบผลลัพธ์สำหรับ "${query}"</p>
        <p style="font-size: 0.9rem; margin-top: 8px;">ลองใช้คำค้นหาอื่น เช่น "ขวด", "คะแนน", "วิธีใช้"</p>
      </div>
    `;
    return;
  }
  
  // Display results
  results.innerHTML = filteredResults.map(item => `
    <div class="search-result-item" onclick="scrollToElement('${item.id}')">
      <div class="search-result-icon">${item.icon}</div>
      <div class="search-result-content">
        <h4 class="search-result-title">${highlightText(item.title, query)}</h4>
        <p class="search-result-section">ส่วน: ${item.section}</p>
      </div>
    </div>
  `).join('');
}

// Highlight search terms
function highlightText(text, query) {
  if (!query) return text;
  const regex = new RegExp(`(${query})`, 'gi');
  return text.replace(regex, '<mark style="background: rgba(236, 72, 153, 0.3); padding: 2px 4px; border-radius: 4px;">$1</mark>');
}

// Scroll to element
function scrollToElement(elementId) {
  const item = searchData.find(item => item.id === elementId);
  if (item && item.element) {
    closeSearch();
    
    // Smooth scroll to element
    item.element.scrollIntoView({
      behavior: 'smooth',
      block: 'center'
    });
    
    // Highlight element temporarily
    item.element.style.transition = 'all 0.3s ease';
    item.element.style.background = 'rgba(236, 72, 153, 0.2)';
    item.element.style.padding = '8px 16px';
    item.element.style.borderRadius = '8px';
    item.element.style.transform = 'scale(1.05)';
    
    setTimeout(() => {
      item.element.style.background = '';
      item.element.style.padding = '';
      item.element.style.borderRadius = '';
      item.element.style.transform = '';
    }, 2000);
  }
}

// Close search on Escape key
document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') {
    closeSearch();
  }
});

// Close search when clicking outside
document.getElementById('searchOverlay').addEventListener('click', function(e) {
  if (e.target === this) {
    closeSearch();
  }
});

// Fix scroll issue when tip modal is opened
document.addEventListener('DOMContentLoaded', function() {
  // Initialize search when page loads
  setTimeout(initializeSearch, 1000); // Wait for page to fully load
  const tipModal = document.getElementById('tipModal');
  
  if (tipModal) {
    // Override the existing click handler for tip modal close
    const modalClose = tipModal.querySelector('.tip-modal-close');
    if (modalClose) {
      modalClose.addEventListener('click', function() {
        tipModal.style.display = 'none';
        document.body.style.overflow = 'auto';
      });
    }
    
    // Enhanced click outside to close
    document.addEventListener('click', function(event) {
      if (event.target === tipModal && tipModal.style.display === 'block') {
        tipModal.style.display = 'none';
        document.body.style.overflow = 'auto';
      }
    });
    
    // ESC key to close tip modal
    document.addEventListener('keydown', function(event) {
      if (event.key === 'Escape' && tipModal.style.display === 'block') {
        tipModal.style.display = 'none';
        document.body.style.overflow = 'auto';
      }
    });
    
    // Prevent modal content clicks from closing modal
    const modalContent = tipModal.querySelector('.tip-modal-content');
    if (modalContent) {
      modalContent.addEventListener('click', function(event) {
        event.stopPropagation();
      });
    }
  }
  
  // Reset body overflow on page load to prevent scroll issues
  document.body.style.overflow = 'auto';
});

// Quick Navigation Menu Functions
function toggleQuickNav() {
  const quickNavItems = document.getElementById('quickNavItems');
  quickNavItems.classList.toggle('active');
}

function closeQuickNav() {
  const quickNavItems = document.getElementById('quickNavItems');
  quickNavItems.classList.remove('active');
}

// Close quick nav when clicking outside
document.addEventListener('click', function(e) {
  const quickNavMenu = document.getElementById('quickNavMenu');
  const quickNavItems = document.getElementById('quickNavItems');
  
  if (quickNavMenu && !quickNavMenu.contains(e.target)) {
    quickNavItems.classList.remove('active');
  }
});

// Close quick nav on escape key
document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') {
    closeQuickNav();
  }
});

// Smooth scroll to sections
document.querySelectorAll('.quick-nav-item[href^="#"]').forEach(link => {
  link.addEventListener('click', function(e) {
    e.preventDefault();
    const targetId = this.getAttribute('href').substring(1);
    const targetElement = document.getElementById(targetId);
    
    if (targetElement) {
      targetElement.scrollIntoView({
        behavior: 'smooth',
        block: 'start'
      });
    }
    
    closeQuickNav();
  });
});

// ===== NOTIFICATION & ALERT SYSTEM =====

class NotificationSystem {
  constructor() {
    this.notifications = [];
    this.maxNotifications = 5;
    this.init();
  }
  
  init() {
    this.createNotificationContainer();
    this.createNotificationBell();
    this.setupEventListeners();
    this.startRealTimeUpdates();
  }
  
  createNotificationContainer() {
    const container = document.createElement('div');
    container.id = 'notificationContainer';
    container.className = 'notification-container';
    container.innerHTML = `
      <div class="notification-header">
        <h3><span class="notification-icon">🔔</span> การแจ้งเตือน</h3>
        <div class="notification-actions">
          <button class="notification-action-btn" onclick="notificationSystem.markAllAsRead()" title="อ่านทั้งหมด">
            <span>✓</span>
          </button>
          <button class="notification-action-btn" onclick="notificationSystem.clearAll()" title="ลบทั้งหมด">
            <span>🗑️</span>
          </button>
          <button class="notification-close" onclick="notificationSystem.hideNotifications()">×</button>
        </div>
      </div>
      <div class="notification-list" id="notificationList">
        <div class="notification-empty">
          <div class="notification-empty-icon">📭</div>
          <p>ไม่มีการแจ้งเตือนใหม่</p>
        </div>
      </div>
    `;
    document.body.appendChild(container);
  }
  
  createNotificationBell() {
    const bell = document.createElement('div');
    bell.id = 'notificationBell';
    bell.className = 'notification-bell';
    bell.innerHTML = `
      <button class="notification-bell-btn" onclick="notificationSystem.toggleNotifications()">
        <span class="bell-icon">🔔</span>
        <span class="notification-badge" id="notificationBadge">0</span>
      </button>
    `;
    document.body.appendChild(bell);
  }
  
  setupEventListeners() {
    // Close notifications when clicking outside
    document.addEventListener('click', (e) => {
      const container = document.getElementById('notificationContainer');
      const bell = document.getElementById('notificationBell');
      
      if (container && bell && !container.contains(e.target) && !bell.contains(e.target)) {
        this.hideNotifications();
      }
    });
    
    // Keyboard shortcuts
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        this.hideNotifications();
      }
      if (e.ctrlKey && e.key === 'n') {
        e.preventDefault();
        this.toggleNotifications();
      }
    });
  }
  
  startRealTimeUpdates() {
    // Simulate real-time notifications
    setInterval(() => {
      this.checkForNewNotifications();
    }, 30000); // Check every 30 seconds
    
    // Add some sample notifications
    setTimeout(() => {
      this.addNotification({
        type: 'success',
        title: 'ยินดีต้อนรับ!',
        message: 'ระบบ P2P พร้อมใช้งานแล้ว',
        timestamp: new Date()
      });
    }, 2000);
    
    setTimeout(() => {
      this.addNotification({
        type: 'info',
        title: 'เคล็ดลับใหม่',
        message: 'ลองใช้ฟีเจอร์ค้นหาด่วนด้วยการกด Ctrl+K',
        timestamp: new Date()
      });
    }, 5000);
  }
  
  checkForNewNotifications() {
    // Simulate checking for new notifications
    const randomEvents = [
      { type: 'success', title: 'ขวดใหม่ถูกตรวจพบ!', message: 'มีการเพิ่มแต้ม +10 คะแนน' },
      { type: 'warning', title: 'เครื่องเต็ม', message: 'เครื่องที่ตึก A ใกล้เต็มแล้ว' },
      { type: 'info', title: 'อัปเดตระบบ', message: 'ระบบได้รับการปรับปรุงใหม่' },
      { type: 'achievement', title: 'ความสำเร็จใหม่!', message: 'คุณได้รับตราสัญลักษณ์ "นักรีไซเคิล"' }
    ];
    
    if (Math.random() < 0.3) { // 30% chance
      const event = randomEvents[Math.floor(Math.random() * randomEvents.length)];
      this.addNotification({
        ...event,
        timestamp: new Date()
      });
    }
  }
  
  addNotification(notification) {
    notification.id = Date.now() + Math.random();
    notification.read = false;
    
    this.notifications.unshift(notification);
    
    // Limit notifications
    if (this.notifications.length > this.maxNotifications) {
      this.notifications = this.notifications.slice(0, this.maxNotifications);
    }
    
    this.updateNotificationDisplay();
    this.updateBadge();
    this.showToast(notification);
  }
  
  showToast(notification) {
    const toast = document.createElement('div');
    toast.className = `toast toast-${notification.type}`;
    toast.innerHTML = `
      <div class="toast-icon">${this.getNotificationIcon(notification.type)}</div>
      <div class="toast-content">
        <div class="toast-title">${notification.title}</div>
        <div class="toast-message">${notification.message}</div>
      </div>
      <button class="toast-close" onclick="this.parentElement.remove()">×</button>
    `;
    
    document.body.appendChild(toast);
    
    // Animate in
    setTimeout(() => toast.classList.add('show'), 100);
    
    // Auto remove
    setTimeout(() => {
      toast.classList.remove('show');
      setTimeout(() => toast.remove(), 300);
    }, 5000);
  }
  
  getNotificationIcon(type) {
    const icons = {
      success: '✅',
      warning: '⚠️',
      error: '❌',
      info: 'ℹ️',
      achievement: '🏆'
    };
    return icons[type] || 'ℹ️';
  }
  
  updateNotificationDisplay() {
    const list = document.getElementById('notificationList');
    if (!list) return;
    
    if (this.notifications.length === 0) {
      list.innerHTML = `
        <div class="notification-empty">
          <div class="notification-empty-icon">📭</div>
          <p>ไม่มีการแจ้งเตือนใหม่</p>
        </div>
      `;
      return;
    }
    
    list.innerHTML = this.notifications.map(notification => `
      <div class="notification-item ${notification.read ? 'read' : 'unread'}" data-id="${notification.id}">
        <div class="notification-item-icon">${this.getNotificationIcon(notification.type)}</div>
        <div class="notification-item-content">
          <div class="notification-item-title">${notification.title}</div>
          <div class="notification-item-message">${notification.message}</div>
          <div class="notification-item-time">${this.formatTime(notification.timestamp)}</div>
        </div>
        <div class="notification-item-actions">
          ${!notification.read ? `<button class="notification-mark-read" onclick="notificationSystem.markAsRead('${notification.id}')" title="ทำเครื่องหมายว่าอ่านแล้ว">✓</button>` : ''}
          <button class="notification-delete" onclick="notificationSystem.deleteNotification('${notification.id}')" title="ลบ">🗑️</button>
        </div>
      </div>
    `).join('');
  }
  
  formatTime(timestamp) {
    const now = new Date();
    const diff = now - timestamp;
    const minutes = Math.floor(diff / 60000);
    const hours = Math.floor(diff / 3600000);
    const days = Math.floor(diff / 86400000);
    
    if (minutes < 1) return 'เมื่อสักครู่';
    if (minutes < 60) return `${minutes} นาทีที่แล้ว`;
    if (hours < 24) return `${hours} ชั่วโมงที่แล้ว`;
    return `${days} วันที่แล้ว`;
  }
  
  toggleNotifications() {
    const container = document.getElementById('notificationContainer');
    container.classList.toggle('show');
  }
  
  hideNotifications() {
    const container = document.getElementById('notificationContainer');
    container.classList.remove('show');
  }
  
  markAsRead(id) {
    const notification = this.notifications.find(n => n.id == id);
    if (notification) {
      notification.read = true;
      this.updateNotificationDisplay();
      this.updateBadge();
    }
  }
  
  markAllAsRead() {
    this.notifications.forEach(n => n.read = true);
    this.updateNotificationDisplay();
    this.updateBadge();
  }
  
  deleteNotification(id) {
    this.notifications = this.notifications.filter(n => n.id != id);
    this.updateNotificationDisplay();
    this.updateBadge();
  }
  
  clearAll() {
    this.notifications = [];
    this.updateNotificationDisplay();
    this.updateBadge();
  }
  
  updateBadge() {
    const badge = document.getElementById('notificationBadge');
    const unreadCount = this.notifications.filter(n => !n.read).length;
    
    if (badge) {
      badge.textContent = unreadCount;
      badge.style.display = unreadCount > 0 ? 'block' : 'none';
    }
    
    // Update bell animation
    const bell = document.querySelector('.notification-bell-btn');
    if (bell && unreadCount > 0) {
      bell.classList.add('has-notifications');
    } else if (bell) {
      bell.classList.remove('has-notifications');
    }
  }
}

// Initialize notification system
const notificationSystem = new NotificationSystem();

// ===== ADVANCED SEARCH SYSTEM =====

class AdvancedSearchSystem {
  constructor() {
    this.searchData = [];
    this.searchHistory = [];
    this.init();
  }
  
  init() {
    this.buildSearchIndex();
    this.setupAdvancedSearch();
    this.setupSearchShortcuts();
  }
  
  buildSearchIndex() {
    // Build searchable content index
    this.searchData = [
      { id: 'features', title: 'จุดเด่นหลัก', content: 'AI ตรวจจับขวด Arduino Firebase แต้มสะสม', type: 'section' },
      { id: 'how-to-use', title: 'วิธีใช้งาน', content: 'หย่อนขวด สแกน QR รับแต้ม', type: 'section' },
      { id: 'rewards', title: 'รางวัล', content: 'แต้มสะสม ของรางวัล แลกเปลี่ยน', type: 'section' },
      { id: 'leaderboard', title: 'อันดับผู้เก็บขวด', content: 'การแข่งขัน อันดับ คะแนน', type: 'section' },
      { id: 'stats', title: 'สถิติ', content: 'ข้อมูล กราฟ วิเคราะห์', type: 'section' },
      { id: 'machine-map', title: 'แผนที่เครื่อง', content: 'ตำแหน่ง เครื่องรับขวด แผนที่', type: 'section' },
      { id: 'dashboard', title: 'Dashboard', content: 'แดชบอร์ด จัดการ ข้อมูล', type: 'page' },
      { id: 'login', title: 'เข้าสู่ระบบ', content: 'ล็อกอิน เข้าสู่ระบบ', type: 'page' },
      { id: 'register', title: 'ลงทะเบียน', content: 'สมัครสมาชิก ลงทะเบียน', type: 'page' }
    ];
  }
  
  setupAdvancedSearch() {
    const searchInput = document.getElementById('searchInput');
    if (searchInput) {
      searchInput.addEventListener('input', (e) => {
        this.performAdvancedSearch(e.target.value);
      });
      
      searchInput.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
          this.selectFirstResult();
        }
        if (e.key === 'ArrowDown') {
          e.preventDefault();
          this.navigateResults('down');
        }
        if (e.key === 'ArrowUp') {
          e.preventDefault();
          this.navigateResults('up');
        }
      });
    }
  }
  
  setupSearchShortcuts() {
    document.addEventListener('keydown', (e) => {
      if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
        e.preventDefault();
        this.openAdvancedSearch();
      }
    });
  }
  
  openAdvancedSearch() {
    const overlay = document.getElementById('searchOverlay');
    if (overlay) {
      overlay.classList.add('active');
      const input = document.getElementById('searchInput');
      if (input) {
        input.focus();
      }
    }
  }
  
  performAdvancedSearch(query) {
    if (!query.trim()) {
      this.showSearchPlaceholder();
      return;
    }
    
    const results = this.searchData.filter(item => {
      const searchText = (item.title + ' ' + item.content).toLowerCase();
      return searchText.includes(query.toLowerCase());
    });
    
    this.displaySearchResults(results, query);
    this.addToSearchHistory(query);
  }
  
  displaySearchResults(results, query) {
    const container = document.getElementById('searchResults');
    if (!container) return;
    
    if (results.length === 0) {
      container.innerHTML = `
        <div class="search-no-results">
          <div class="search-no-results-icon">🔍</div>
          <p>ไม่พบผลลัพธ์สำหรับ "${query}"</p>
          <div class="search-suggestions">
            <p>ลองค้นหา:</p>
            <div class="search-suggestion-tags">
              <span class="search-tag" onclick="document.getElementById('searchInput').value='ขวด'; advancedSearchSystem.performAdvancedSearch('ขวด')">ขวด</span>
              <span class="search-tag" onclick="document.getElementById('searchInput').value='แต้ม'; advancedSearchSystem.performAdvancedSearch('แต้ม')">แต้ม</span>
              <span class="search-tag" onclick="document.getElementById('searchInput').value='รางวัล'; advancedSearchSystem.performAdvancedSearch('รางวัล')">รางวัล</span>
            </div>
          </div>
        </div>
      `;
      return;
    }
    
    container.innerHTML = results.map((result, index) => `
      <div class="search-result-item ${index === 0 ? 'selected' : ''}" data-id="${result.id}" onclick="advancedSearchSystem.selectResult('${result.id}', '${result.type}')">
        <div class="search-result-icon">${this.getResultIcon(result.type)}</div>
        <div class="search-result-content">
          <div class="search-result-title">${this.highlightText(result.title, query)}</div>
          <div class="search-result-type">${this.getResultTypeText(result.type)}</div>
        </div>
        <div class="search-result-arrow">→</div>
      </div>
    `).join('');
  }
  
  getResultIcon(type) {
    const icons = {
      section: '📄',
      page: '🔗',
      feature: '⭐'
    };
    return icons[type] || '📄';
  }
  
  getResultTypeText(type) {
    const types = {
      section: 'หัวข้อ',
      page: 'หน้า',
      feature: 'ฟีเจอร์'
    };
    return types[type] || 'เนื้อหา';
  }
  
  highlightText(text, query) {
    if (!query) return text;
    const regex = new RegExp(`(${query})`, 'gi');
    return text.replace(regex, '<mark>$1</mark>');
  }
  
  selectResult(id, type) {
    if (type === 'page') {
      window.location.href = `${id}.html`;
    } else {
      const element = document.getElementById(id);
      if (element) {
        element.scrollIntoView({ behavior: 'smooth' });
        this.closeSearch();
      }
    }
  }
  
  selectFirstResult() {
    const firstResult = document.querySelector('.search-result-item');
    if (firstResult) {
      firstResult.click();
    }
  }
  
  navigateResults(direction) {
    const results = document.querySelectorAll('.search-result-item');
    const selected = document.querySelector('.search-result-item.selected');
    
    if (!results.length) return;
    
    let newIndex = 0;
    if (selected) {
      const currentIndex = Array.from(results).indexOf(selected);
      if (direction === 'down') {
        newIndex = (currentIndex + 1) % results.length;
      } else {
        newIndex = currentIndex === 0 ? results.length - 1 : currentIndex - 1;
      }
      selected.classList.remove('selected');
    }
    
    results[newIndex].classList.add('selected');
  }
  
  showSearchPlaceholder() {
    const container = document.getElementById('searchResults');
    if (container) {
      container.innerHTML = `
        <div class="search-placeholder">
          <div class="search-placeholder-icon">📝</div>
          <p>พิมพ์คำค้นหาเพื่อดูผลลัพธ์</p>
          <div class="search-shortcuts">
            <div class="search-shortcut">
              <kbd>Ctrl</kbd> + <kbd>K</kbd> เปิดค้นหา
            </div>
            <div class="search-shortcut">
              <kbd>↑</kbd> <kbd>↓</kbd> เลือกผลลัพธ์
            </div>
            <div class="search-shortcut">
              <kbd>Enter</kbd> เลือก
            </div>
          </div>
        </div>
      `;
    }
  }
  
  closeSearch() {
    const overlay = document.getElementById('searchOverlay');
    if (overlay) {
      overlay.classList.remove('active');
    }
  }
  
  addToSearchHistory(query) {
    if (!this.searchHistory.includes(query)) {
      this.searchHistory.unshift(query);
      if (this.searchHistory.length > 10) {
        this.searchHistory = this.searchHistory.slice(0, 10);
      }
    }
  }
}

// Initialize advanced search system
const advancedSearchSystem = new AdvancedSearchSystem();

// Update existing search functions to use new system
function openSearch() {
  advancedSearchSystem.openAdvancedSearch();
}

function closeSearch() {
  advancedSearchSystem.closeSearch();
}

function performSearch() {
  const input = document.getElementById('searchInput');
  if (input) {
    advancedSearchSystem.performAdvancedSearch(input.value);
  }
}

/* Interactive Widgets removed: HTML/CSS/JS cleaned up. */

// เพิ่ม event listener เพื่อให้แน่ใจว่า animations.js โหลดเสร็จแล้ว
document.addEventListener('DOMContentLoaded', function() {
  // ตรวจสอบว่า animations.js โหลดเสร็จแล้วหรือไม่
  if (typeof AnimationController !== 'undefined') {
    console.log('✅ Animation System พร้อมใช้งาน');
  }
  
  // Interactive widgets: removed from this build
  
  // เพิ่ม event listeners สำหรับปุ่มนำทาง
  const loginButtons = document.querySelectorAll('a[href="login.html"]');
  const registerButtons = document.querySelectorAll('a[href="register.html"]');
  const dashboardButtons = document.querySelectorAll('a[href="dashboard.html"]');
  
  loginButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      console.log('🔐 กำลังไปหน้าเข้าสู่ระบบ...');
      // ให้ browser ทำการนำทางตามปกติ
    });
  });
  
  registerButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      console.log('📝 กำลังไปหน้าลงทะเบียน...');
      // ให้ browser ทำการนำทางตามปกติ
    });
  });
  
  dashboardButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      console.log('📊 กำลังไป Dashboard...');
      // ให้ browser ทำการนำทางตามปกติ
    });
  });
});
</script>

<script src="animations.js"></script>
</body>
</html>